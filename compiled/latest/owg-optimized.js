function ba(a){throw a;}var h=void 0,j=null;function n(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function q(a){return function(){return a}}var s,v=this;function ga(a){for(var a=a.split("."),b=v,c;c=a.shift();)if(b[c]!=j)b=b[c];else return j;return b}function ha(){}
function ja(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function w(a){return a!==h}function la(a){return ja(a)=="array"}function ma(a){var b=ja(a);return b=="array"||b=="object"&&typeof a.length=="number"}function na(a){return typeof a=="string"}function oa(a){return ja(a)=="function"}function pa(a){a=ja(a);return a=="object"||a=="array"||a=="function"}function qa(a){return a[sa]||(a[sa]=++ua)}var sa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ua=0;
function va(a){return a.call.apply(a.bind,arguments)}function wa(a,b){var c=b||v;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}}function Aa(){Aa=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?va:wa;return Aa.apply(j,arguments)}var Ba=Date.now||function(){return+new Date};
function x(a,b){var c=a.split("."),d=v;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&w(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function Ca(a,b){function c(){}c.prototype=b.prototype;a.sg=b.prototype;a.prototype=new c;a.prototype.constructor=a};var B=0,C=1,Da=2,Ea=3,Fa=4,Ga=5,Ha=6,Ia=7,Ja=108,Ka=8,La=9,Ma=10,Na=11,Oa=12,Pa=13,Qa=14,Ra=15,Sa=16,Ta=17,Ua=18,Va=19,Wa=20,Xa=21,Ya=22,Za=23,$a=24,ab=65533,bb=65534,cb=25,db=26,eb=65535;x("OG_OBJECT_CONTEXT",B);x("OG_OBJECT_SCENE",C);x("OG_OBJECT_WORLD",Da);x("OG_OBJECT_IMAGELAYER",Ea);x("OG_OBJECT_ELEVATIONLAYER",Fa);x("OG_OBJECT_WAYPOINTLAYER",Ga);x("OG_OBJECT_GEOMETRYLAYER",Ia);x("OG_OBJECT_POILAYER",Ha);x("OG_OBJECT_POINTCLOUDLAYER",Ja);x("OG_OBJECT_VOXELLAYER",Ka);
x("OG_OBJECT_VECTORLAYER",La);x("OG_OBJECT_IMAGE",Ma);x("OG_OBJECT_TEXTURE",Na);x("OG_OBJECT_PIXELBUFFER",Oa);x("OG_OBJECT_GEOMETRY",Pa);x("OG_OBJECT_MESH",Qa);x("OG_OBJECT_SURFACE",Ra);x("OG_OBJECT_VECTOR",Sa);x("OG_OBJECT_CAMERA",Ta);x("OG_OBJECT_TEXT",Ua);x("OG_OBJECT_BINARYDATA",Va);x("OG_OBJECT_LIGHT",Wa);x("OG_OBJECT_NAVIGATIONCONTROLLER",Xa);x("OG_OBJECT_POI",Ya);x("OG_OBJECT_BILLBOARD",Za);x("OG_OBJECT_BILLBOARDLAYER",$a);x("OG_OBJECT_AOEIMAGELAYER",ab);x("OG_OBJECT_AOEIMAGE",bb);
x("OG_OBJECT_POINTSPRITE",cb);x("OG_OBJECT_EARTHPOLYLINE",db);x("OG_OBJECT_INVALID",eb);x("OG_RENDEREFFECT_RGB",0);x("OG_RENDEREFFECT_CHROMADEPTH",1);var fb=1,gb=2,hb=3,ib=4;x("OG_SCENE_3D_ELLIPSOID_WGS84",fb);x("OG_SCENE_3D_FLAT_CARTESIAN",gb);x("OG_SCENE_2D_SCREEN",hb);x("OG_SCENE_CUSTOM",ib);x("OG_NAVIGATIONMODE_GLOBE",0);x("OG_NAVIGATIONMODE_FLIGHT",1);x("OG_NAVIGATIONMODE_CONSTRAINED",2);x("OG_NAVIGATIONMODE_DYNAMIC",3);var jb=1,kb=2;x("OG_OBJECT_READY",jb);x("OG_OBJECT_BUSY",kb);
x("OG_OBJECT_FAILED",3);var lb=[];function D(a){if(a==-1)return j;for(var b=0;b<lb.length;b++)if(lb[b].id==a)return lb[b];return j}function E(){this.parent=j;this.name="ogObject";this.type=eb;this.id=-1;this.status=jb;this.D=this.F=j}E.prototype.jb=n();function F(a){for(var a=a.id,b=0;b<lb.length;b++)if(lb[b].id==a){lb[b].jb();lb.splice(b,1);break}}E.prototype.Pa=n();function mb(a,b){for(var c in a)b.call(h,a[c],c,a)}function nb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var ob=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function pb(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<ob.length;e++)b=ob[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function qb(a){this.stack=Error().stack||"";if(a)this.message=String(a)}Ca(qb,Error);qb.prototype.name="CustomError";function rb(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function sb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function tb(a){if(!ub.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(vb,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(wb,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(xb,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(yb,"&quot;"));return a}var vb=/&/g,wb=/</g,xb=/>/g,yb=/\"/g,ub=/[&<>\"]/;
function zb(a){return sb(a.replace(/  /g," &#160;"),h)}
function Ab(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var i=d[g]||"",k=e[g]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var p=l.exec(i)||["","",""],o=m.exec(k)||["","",""];if(p[0].length==0&&o[0].length==0)break;c=Bb(p[1].length==0?0:parseInt(p[1],10),o[1].length==0?0:parseInt(o[1],10))||Bb(p[2].length==0,o[2].length==0)||Bb(p[2],o[2])}while(c==
0)}return c}function Bb(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function Cb(a,b){b.unshift(a);qb.call(this,rb.apply(j,b));b.shift();this.Hr=a}Ca(Cb,qb);Cb.prototype.name="AssertionError";function Db(a){ba(new Cb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Eb=Array.prototype,Fb=Eb.indexOf?function(a,b,c){return Eb.indexOf.call(a,b,c)}:function(a,b,c){c=c==j?0:c<0?Math.max(0,a.length+c):c;if(na(a)){if(!na(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Gb=Eb.forEach?function(a,b,c){Eb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Hb(){return Eb.concat.apply(Eb,arguments)}
function Ib(a){if(la(a))return Hb(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function Jb(a,b,c){return arguments.length<=2?Eb.slice.call(a,b):Eb.slice.call(a,b,c)};var Kb="StopIteration"in v?v.StopIteration:Error("StopIteration");function Lb(){}Lb.prototype.next=function(){ba(Kb)};Lb.prototype.Ek=function(){return this};function Mb(a){if(a instanceof Lb)return a;if(typeof a.Ek=="function")return a.Ek(!1);if(ma(a)){var b=0,c=new Lb;c.next=function(){for(;;)if(b>=a.length&&ba(Kb),b in a)return a[b++];else b++};return c}ba(Error("Not implemented"))}
function Nb(a,b){if(ma(a))try{Gb(a,b,h)}catch(c){c!==Kb&&ba(c)}else{a=Mb(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==Kb&&ba(d)}}};function Ob(a){this.fd={};this.Eb=[];var b=arguments.length;if(b>1){b%2&&ba(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){if(a instanceof Ob)b=a.pj(),c=a.ul();else{var b=nb(a),d=[],e=0;for(c in a)d[e++]=a[c];c=d}for(d=0;d<b.length;d++)this.set(b[d],c[d])}}s=Ob.prototype;s.$a=0;s.Yj=0;s.$f=da("$a");s.ul=function(){Pb(this);for(var a=[],b=0;b<this.Eb.length;b++)a.push(this.fd[this.Eb[b]]);return a};s.pj=function(){Pb(this);return this.Eb.concat()};
s.k=function(a,b){if(this===a)return!0;if(this.$a!=a.$f())return!1;var c=b||Qb;Pb(this);for(var d,e=0;d=this.Eb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Qb(a,b){return a===b}s.clear=function(){this.fd={};this.Yj=this.$a=this.Eb.length=0};
function Pb(a){if(a.$a!=a.Eb.length){for(var b=0,c=0;b<a.Eb.length;){var d=a.Eb[b];Object.prototype.hasOwnProperty.call(a.fd,d)&&(a.Eb[c++]=d);b++}a.Eb.length=c}if(a.$a!=a.Eb.length){for(var e={},c=b=0;b<a.Eb.length;)d=a.Eb[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Eb[c++]=d,e[d]=1),b++;a.Eb.length=c}}s.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.fd,a))return this.fd[a];return b};
s.set=function(a,b){Object.prototype.hasOwnProperty.call(this.fd,a)||(this.$a++,this.Eb.push(a),this.Yj++);this.fd[a]=b};s.Ek=function(a){Pb(this);var b=0,c=this.Eb,d=this.fd,e=this.Yj,f=this,g=new Lb;g.next=function(){for(;;){e!=f.Yj&&ba(Error("The map has changed since the iterator was created"));b>=c.length&&ba(Kb);var g=c[b++];return a?g:d[g]}};return g};function Rb(a){return Sb(a||arguments.callee.caller,[])}
function Sb(a,b){var c=[];if(Fb(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(Tb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Tb(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Sb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Tb(a){a=String(a);if(!Ub[a]){var b=/function ([^\(]+)/.exec(a);Ub[a]=b?b[1]:"[Anonymous]"}return Ub[a]}var Ub={};function Vb(a,b,c,d,e){this.reset(a,b,c,d,e)}Vb.prototype.Iq=0;Vb.prototype.hl=j;Vb.prototype.fl=j;var Wb=0;Vb.prototype.reset=function(a,b,c,d,e){this.Iq=typeof e=="number"?e:Wb++;this.Go=d||Ba();this.Ge=a;this.Qn=b;this.Jn=c;delete this.hl;delete this.fl};Vb.prototype.Fj=ca("Ge");function Xb(a){this.tq=a}Xb.prototype.Aj=j;Xb.prototype.Ge=j;Xb.prototype.al=j;Xb.prototype.Yh=j;function Yb(a,b){this.name=a;this.value=b}Yb.prototype.toString=da("name");var Zb=new Yb("SHOUT",1200),$b=new Yb("SEVERE",1E3),ac=new Yb("WARNING",900),bc=new Yb("INFO",800),cc=new Yb("CONFIG",700),dc=[new Yb("OFF",Infinity),Zb,$b,ac,bc,cc,new Yb("FINE",500),new Yb("FINER",400),new Yb("FINEST",300),new Yb("ALL",0)],ec=j;
function fc(a){if(!ec){ec={};for(var b=0,c;c=dc[b];b++)ec[c.value]=c,ec[c.name]=c}return ec[a]||j}s=Xb.prototype;s.getParent=da("Aj");s.Fj=ca("Ge");function gc(a){if(a.Ge)return a.Ge;if(a.Aj)return gc(a.Aj);Db("Root logger has no level set.");return j}s.log=function(a,b,c){if(a.value>=gc(this).value){a=this.lq(a,b,c);this.In("log:"+a.Qn);for(b=this;b;){var c=b,d=a;if(c.Yh)for(var e=0,f=h;f=c.Yh[e];e++)f(d);b=b.getParent()}}};
s.lq=function(a,b,c){var d=new Vb(a,String(b),this.tq);if(c){d.hl=c;var e;var f=arguments.callee.caller;try{var g;var i=ga("window.location.href");if(na(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:i,stack:"Not available"};else{var k,l,m=!1;try{k=c.lineNumber||c.Er||"Not available"}catch(p){k="Not available",m=!0}try{l=c.fileName||c.filename||c.sourceURL||i}catch(o){l="Not available",m=!0}g=m||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:l,stack:c.stack||"Not available"}:c}e="Message: "+tb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+tb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+tb(Rb(f)+"-> ")}catch(r){e="Exception trying to expose exception! You win, we lose. "+r}d.fl=e}return d};function hc(a,b){a.log(ac,b,h)}s.info=function(a,b){this.log(bc,a,b)};s.In=function(a){v.console&&v.console.markTimeline&&v.console.markTimeline(a)};
var ic={},jc=j;function kc(){jc||(jc=new Xb(""),ic[""]=jc,jc.Fj(cc))}function G(a){kc();var b;if(!(b=ic[a])){b=new Xb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=G(a.substr(0,c));if(!c.al)c.al={};c.al[d]=b;b.Aj=c;ic[a]=b}return b};function lc(){this.name="ogTexture";this.type=Na;this.m=j;this.Eo="";this.status=kb}lc.prototype=new E;
lc.prototype.Pa=function(a){if(a==j)hc(G("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==j)hc(G("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=C)hc(G("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.m=this.parent.parent.c.Sj.wm(a.url,function(){b.status=jb;b.F&&b.F(b.id)},function(){b.status=3;b.D&&b.D(b.id)},!1);this.Eo=a.url}};
lc.prototype.jb=function(){if(this.m)this.parent.parent.c.Sj.ym(this.Eo),this.m=j,this.status=3};lc.prototype.U=function(a,b,c){this.status==jb&&this.m&&(c!=j?this.m.U(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.m.U(a,b))};var mc=6378137,nc=0.006694379990197,oc=0.006739496742,H=1.1920930376163766E-7,pc=8388607;function J(a){return a*0.017453292519943295}function qc(a){return a*57.29577951308232}function rc(a){for(var b=1;a>b;)b*=2;return b};function sc(){this.name="ogCamera";this.type=Ta;this.sc=this.pitch=this.eb=this.lc=this.nc=this.oc=0}sc.prototype=new E;s=sc.prototype;s.jb=function(){this.sc=this.pitch=this.eb=this.lc=this.nc=this.oc=0};s.Ia=function(a,b,c){this.oc=a;this.nc=b;this.lc=c;this.parent.Pf==this&&tc(this).Ia(a,b,c)};s.wf=function(){var a={};a.longitude=this.oc;a.latitude=this.nc;a.elevation=this.lc;return a};s.Nb=function(a,b,c){this.eb=a;this.pitch=b;this.sc=c;this==this.parent.Pf&&tc(this).Nb(J(a),J(b),J(c))};
s.eh=function(){var a={};a.yaw=this.eb;a.pitch=this.pitch;a.roll=this.sc;return a};s.qh=function(a,b,c,d){this==this.parent.Pf&&tc(this).qh(a,b,c,d)};function tc(a){var b=j,a=a.parent.parent.c;if(a.d&&a.d.T)b=a.d.T;return b}function uc(a){var b=tc(a),c=b.wf(),b=b.eh();a.oc=c.longitude;a.nc=c.latitude;a.lc=c.elevation;a.eb=qc(b.eb);a.pitch=qc(b.pitch);a.sc=qc(b.sc)};function K(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.Dc=new Float32Array([a,b,c])}s=K.prototype;s.n=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};s.na=function(){this.Dc[0]=this.a[0];this.Dc[1]=this.a[1];this.Dc[2]=this.a[2];return this.Dc};s.dh=da("a");s.uf=function(){var a=new K;a.n(this.a[0],this.a[1],this.a[2]);return a};s.Zo=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};s.Dk=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
s.tp=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};s.cp=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function vc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}s.ep=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
s.rk=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};s.sp=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};s.Wc=function(){var a=this.rk();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};s.op=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};s.Cg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};x("Cross",vc);x("vec3",K);K.prototype.Add=K.prototype.Zo;
K.prototype.Cross=K.prototype.cp;K.prototype.Dot=K.prototype.ep;K.prototype.Get=K.prototype.dh;K.prototype.Length=K.prototype.rk;K.prototype.Neg=K.prototype.op;K.prototype.Normalize=K.prototype.Wc;K.prototype.Set=K.prototype.n;K.prototype.SquaredLength=K.prototype.sp;K.prototype.Subtract=K.prototype.tp;K.prototype.Sub=K.prototype.Dk;K.prototype.ToString=K.prototype.Cg;function L(){this.a=Array(16);this.Di();this.Dc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}s=L.prototype;s.Qd=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};s.na=function(){for(var a=0;a<16;a++)this.Dc[a]=this.a[a];return this.Dc};s.dh=da("a");s.uf=function(){for(var a=new L,b=0;b<16;b++)a.a[b]=this.a[b];return a};s.W=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
s.Di=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};s.up=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.xd=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};s.zg=function(a,b,c){this.a[12]=a;this.a[13]=b;this.a[14]=c};s.me=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
s.Ak=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};s.Jm=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
s.Km=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
s.np=function(a,b,c,d,e,f,g,i,k){var l,m,p,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;l=i*f-k*e;k=k*d-g*f;g=g*e-i*d;(o=Math.sqrt(l*l+k*k+g*g))?(o=1/o,l*=o,k*=o,g*=o):g=k=l=0;i=e*g-f*k;m=f*l-d*g;p=d*k-e*l;(o=Math.sqrt(i*i+m*m+p*p))?(o=1/o,i*=o,m*=o,p*=o):p=m=i=0;this.a[0]=l;this.a[4]=k;this.a[8]=g;this.a[12]=-(l*a+k*b+g*c);this.a[1]=i;this.a[5]=m;this.a[9]=p;this.a[13]=-(i*a+m*b+p*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
s.ba=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],i=a.a[5],k=a.a[6],l=a.a[7],m=a.a[8],p=a.a[9],o=a.a[10],r=a.a[11],t=a.a[12],u=a.a[13],z=a.a[14],y=a.a[15],A=b.a[0],T=b.a[1],ka=b.a[2],V=b.a[3],W=b.a[4],N=b.a[5],Z=b.a[6],$=b.a[7],aa=b.a[8],xa=b.a[9],ya=b.a[10],za=b.a[11],I=b.a[12],ea=b.a[13],ra=b.a[14],fa=b.a[15];this.a[0]=A*c+T*g+ka*m+V*t;this.a[1]=A*d+T*i+ka*p+V*u;this.a[2]=A*e+T*k+ka*o+V*z;this.a[3]=A*f+T*l+ka*r+V*y;this.a[4]=W*c+N*g+Z*m+$*t;this.a[5]=W*d+N*i+Z*p+$*u;this.a[6]=
W*e+N*k+Z*o+$*z;this.a[7]=W*f+N*l+Z*r+$*y;this.a[8]=aa*c+xa*g+ya*m+za*t;this.a[9]=aa*d+xa*i+ya*p+za*u;this.a[10]=aa*e+xa*k+ya*o+za*z;this.a[11]=aa*f+xa*l+ya*r+za*y;this.a[12]=I*c+ea*g+ra*m+fa*t;this.a[13]=I*d+ea*i+ra*p+fa*u;this.a[14]=I*e+ea*k+ra*o+fa*z;this.a[15]=I*f+ea*l+ra*r+fa*y};s.Ye=function(){for(var a=this.uf(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
s.Ha=function(a){var b=new K;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
s.hp=function(a,b,c,d,e,f){var g=b-a,i=d-c,k=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/i;this.a[9]=(d+c)/i;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(f*e*2)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
s.Hm=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
s.Fm=function(a,b,c,d,e,f){var g=b-a,i=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/i;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/i;this.a[14]=-(f+e)/k;this.a[15]=1};s.Gm=function(a,b,c,d){this.Fm(a,b,c,d,-1,1)};
s.ge=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.bp=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.sm=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.Yg=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.fp=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],i=this.a[10];Math.abs(b)<1.0E-6&&Math.abs(d)<1.0E-6?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,i))};
s.tf=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};s.gk=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.gp=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,i=d*d;this.a[0]=e+f-g-i;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-i;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+i;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.wg=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,i=a*b,k=a*c,l=b*c;a*=d;b*=d;c*=d;this.a[0]=1-2*f-2*g;this.a[4]=2*i+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*i-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*l+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*l-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.qp=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],i=this.a[6],k=this.a[10],l=a+e+k;l>0?(l=Math.sqrt(l+1)*2,a=0.25*l,e=(i-f)/l,k=(c-g)/l,b=(d-b)/l):a>e&a>k?(l=Math.sqrt(1+a-e-k)*2,a=(i-f)/l,e=0.25*l,k=(b+d)/l,b=(c+g)/l):e>k?(l=Math.sqrt(1+e-a-k)*2,a=(c-g)/l,e=(b+d)/l,k=0.25*l,b=(f+i)/l):(l=Math.sqrt(1+k-a-e)*2,a=(d-b)/l,e=(c+g)/l,k=(f+i)/l,b=0.25*l);return[e,k,b,a]};
s.xf=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],i=a.a[6],k=a.a[7],l=a.a[8],m=a.a[9],p=a.a[10],o=a.a[11],r=a.a[12],t=a.a[13],u=a.a[14],a=a.a[15],z=1/(b*g*p*a+b*i*o*t+b*k*m*u+c*f*o*u+c*i*l*a+c*k*p*r+d*f*m*a+d*g*o*r+d*k*l*t+e*f*p*t+e*g*l*u+e*i*m*r-b*g*o*u-b*i*m*a-b*k*p*t-c*f*p*a-c*i*o*r-c*k*l*u-d*f*o*t-d*g*l*a-d*k*m*r-e*f*m*u-e*g*p*r-e*i*l*t);this.a[0]=(g*p*a+i*o*t+k*m*u-g*o*u-i*m*a-k*p*t)*z;this.a[4]=(f*o*u+i*l*a+k*p*r-f*p*a-i*o*r-k*l*u)*z;this.a[8]=(f*m*a+g*o*r+k*l*t-f*o*
t-g*l*a-k*m*r)*z;this.a[12]=(f*p*t+g*l*u+i*m*r-f*m*u-g*p*r-i*l*t)*z;this.a[1]=(c*o*u+d*m*a+e*p*t-c*p*a-d*o*t-e*m*u)*z;this.a[5]=(b*p*a+d*o*r+e*l*u-b*o*u-d*l*a-e*p*r)*z;this.a[9]=(b*o*t+c*l*a+e*m*r-b*m*a-c*o*r-e*l*t)*z;this.a[13]=(b*m*u+c*p*r+d*l*t-b*p*t-c*l*u-d*m*r)*z;this.a[2]=(c*i*a+d*k*t+e*g*u-c*k*u-d*g*a-e*i*t)*z;this.a[6]=(b*k*u+d*f*a+e*i*r-b*i*a-d*k*r-e*f*u)*z;this.a[10]=(b*g*a+c*k*r+e*f*t-b*k*t-c*f*a-e*g*r)*z;this.a[14]=(b*i*t+c*f*u+d*g*r-b*g*u-c*i*r-d*f*t)*z;this.a[3]=(c*k*p+d*g*o+e*i*m-c*
i*o-d*k*m-e*g*p)*z;this.a[7]=(b*i*o+d*k*l+e*f*p-b*k*p-d*f*o-e*i*l)*z;this.a[11]=(b*k*m+c*f*o+e*g*l-b*g*o-c*k*l-e*f*m)*z;this.a[15]=(b*g*p+c*i*l+d*f*m-b*i*m-c*f*p-d*g*l)*z};s.Cg=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};x("mat4",L);L.prototype.CalcBodyFrame=L.prototype.Yg;
L.prototype.CalcNavigationFrame=L.prototype.ge;L.prototype.Cami3d=L.prototype.tf;L.prototype.CopyFrom=L.prototype.W;L.prototype.Copy=L.prototype.uf;L.prototype.Frustum=L.prototype.hp;L.prototype.Get=L.prototype.dh;L.prototype.Identity=L.prototype.Di;L.prototype.Inverse=L.prototype.xf;L.prototype.LookAt=L.prototype.np;L.prototype.Multiply=L.prototype.ba;L.prototype.MultiplyVec3=L.prototype.Ha;L.prototype.Ortho2D=L.prototype.Gm;L.prototype.Ortho=L.prototype.Fm;L.prototype.OverwriteTranslation=L.prototype.zg;
L.prototype.Perspective=L.prototype.Hm;L.prototype.RotationX=L.prototype.Ak;L.prototype.RotationY=L.prototype.Jm;L.prototype.RotationZ=L.prototype.Km;L.prototype.Scale=L.prototype.me;L.prototype.SetFromArray=L.prototype.Qd;L.prototype.ToString=L.prototype.Cg;L.prototype.Translation=L.prototype.xd;L.prototype.Transpose=L.prototype.Ye;L.prototype.Zero=L.prototype.up;L.prototype.CalcNavigationFrame2=L.prototype.bp;L.prototype.CalcNavigationFrameZUp=L.prototype.sm;L.prototype.ExtractEulerAngles=L.prototype.fp;
L.prototype.CamViewFrustum=L.prototype.gk;L.prototype.FromQuaternion=L.prototype.gp;L.prototype.FromQuaternionComponents=L.prototype.wg;L.prototype.Rot2Quat=L.prototype.qp;function wc(){this.Fi=[];this.Ei=[];this.yg=[];this.Pb={};this.Pb.x=0;this.Pb.y=0;this.Pb.j=0;this.Wd={};this.Wd.longitude=0;this.Wd.latitude=0;this.Wd.elevation=0;this.Cd=!1;this.gb=[0,0];this.hd=-1;this.El=0;this.Ga=xc;this.Aa=0}var xc=0,yc=1,zc=2,Ac=3,Bc=4,Cc=5;wc.prototype.Ia=function(a,b,c){this.Pb.x=a;this.Pb.y=b;this.Pb.j=c};wc.prototype.wf=da("Pb");function Dc(a,b,c,d){a.Wd.longitude=b;a.Wd.latitude=c;a.Wd.elevation=d};function Ec(){this.result={};this.result.R=0;this.result.qd=0;this.result.fe=0;this.Vb={};this.Vb.x=0;this.Vb.y=0;this.Vb.j=0;this.Wb={};this.Wb.x=0;this.Wb.y=0;this.Wb.j=0;this.wb={};this.wb.x=0;this.wb.y=0;this.wb.j=0;this.cc={};this.cc.x=0;this.cc.y=0;this.cc.j=0;this.dc={};this.dc.x=0;this.dc.y=0;this.uj=this.$e=this.dc.j=0;this.zm=2.220446049250313E-16}
Ec.prototype.pk=function(a,b,c,d,e,f,g,i,k,l,m,p,o,r,t){this.Vb.x=l-g;this.Vb.y=m-i;this.Vb.j=p-k;this.Wb.x=o-g;this.Wb.y=r-i;this.Wb.j=t-k;this.cc.x=e*this.Wb.j-f*this.Wb.y;this.cc.y=f*this.Wb.x-d*this.Wb.j;this.cc.j=d*this.Wb.y-e*this.Wb.x;this.$e=this.Vb.x*this.cc.x+this.Vb.y*this.cc.y+this.Vb.j*this.cc.j;this.wb.x=a-g;this.wb.y=b-i;this.wb.j=c-k;this.uj=1/this.$e;this.dc.x=this.wb.y*this.Vb.j-this.wb.j*this.Vb.y;this.dc.y=this.wb.j*this.Vb.x-this.wb.x*this.Vb.j;this.dc.j=this.wb.x*this.Vb.y-this.wb.y*
this.Vb.x;if(this.$e>this.zm){this.result.qd=this.wb.x*this.cc.x+this.wb.y*this.cc.y+this.wb.j*this.cc.j;if(this.result.qd<0||this.result.qd>this.$e)return j;this.result.fe=d*this.dc.x+e*this.dc.y+f*this.dc.j;if(this.result.fe<0||this.result.qd+this.result.fe>this.$e)return j}else if(this.$e<-this.zm){this.result.qd=this.wb.x*this.cc.x+this.wb.y*this.cc.y+this.wb.j*this.cc.j;if(this.result.qd>0||this.result.qd<this.$e)return j;this.result.fe=d*this.dc.x+e*this.dc.y+f*this.dc.j;if(this.result.fe>0||
this.result.qd+this.result.fe<this.$e)return j}else return j;this.result.R=this.Wb.x*this.dc.x+this.Wb.y*this.dc.y+this.Wb.j*this.dc.j;this.result.qd*=this.uj;this.result.fe*=this.uj;this.result.R*=this.uj;return this.result};x("TriangleIntersector",Ec);Ec.prototype.IntersectTriangle=Ec.prototype.pk;function Fc(){this.si=this.ti=this.qi=this.ri=0;this.nj=1;this.result={qf:0,pf:0}}
Fc.prototype.fh=function(a,b,c,d,e,f,g,i,k,l,m,p){this.nj=1;d>=0?(this.result.qf=(g-a)/d,this.result.pf=(l-a)/d):(this.result.qf=(l-a)/d,this.result.pf=(g-a)/d);e>=0?(this.ri=(i-b)/e,this.qi=(m-b)/e):(this.ri=(m-b)/e,this.qi=(i-b)/e);if(this.result.qf>this.qi||this.ri>this.result.pf)this.nj=-1;if(this.ri>this.result.qf)this.result.qf=this.ri;if(this.qi<this.result.pf)this.result.pf=this.qi;f>=0?(this.ti=(k-c)/f,this.si=(p-c)/f):(this.ti=(p-c)/f,this.si=(k-c)/f);if(this.result.qf>this.si||this.ti>
this.result.pf)this.nj=-1;if(this.ti>this.result.qf)this.result.qf=this.ti;if(this.si<this.result.pf)this.result.pf=this.si;return this.nj>0?this.result:j};x("AABB",Fc);Fc.prototype.HitBox=Fc.prototype.fh;function Gc(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.Dc=new Float32Array([a,b,c,d])}Gc.prototype.n=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};Gc.prototype.na=function(){this.Dc[0]=this.a[0];this.Dc[1]=this.a[1];this.Dc[2]=this.a[2];this.Dc[3]=this.a[3];return this.Dc};Gc.prototype.dh=da("a");Gc.prototype.Cg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};x("vec4",Gc);Gc.prototype.Get=Gc.prototype.dh;Gc.prototype.Set=Gc.prototype.n;function Hc(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}ba(Error("Invalid JSON string: "+a))};function M(a){this.c=a;this.b=a.b;this.A=this.m=this.Xb=this.S=j;this.mode="";this.pb=this.mg=0;this.Ee=this.Y=j;this.ma=!1;this.gn=this.ed=this.Q=j;this.pn=new Gc;this.pn.n(1,1,1,1);this.qn=new Gc;this.qn.n(1,1,1,1);this.Kc=new Gc;this.Kc.n(1,1,1,1);this.uc=new Gc;this.uc.n(1,0,0,1);this.Bn=new Ec;this.aa=this.Ca=this.ha=j;this.$p=0;this.Yi=new Fc;this.va=j;this.di=this.Z=0;this.G={};this.ve=Array(3);this.ue=Array(3);this.Ke=new L;this.xj=!1;this.Fb=-1;this.hn=new L;this.jn=new L;this.un=this.tn=
0}s=M.prototype;s.Cf=function(a,b,c,d){this.Kc.n(a,b,c,d)};function Ic(a,b){if(b.length%3==0)a.A=new Float32Array(b),a.mode="p",a.Z=3}function Jc(a,b){if(b.length%8==0)a.A=new Float32Array(b),a.mode="pnt",a.Z=8}function Kc(a,b){if(b.length%7==0)a.A=new Float32Array(b),a.mode="pc",a.Z=7}function Lc(a,b){if(b.length%10==0)a.A=new Float32Array(b),a.mode="pnc",a.Z=10}function Mc(a,b){if(b.length%5==0)a.A=new Float32Array(b),a.mode="pt",a.Z=5}
function Nc(a,b){if(b.length%12==0)a.A=new Float32Array(b),a.mode="pnct",a.Z=12}function Oc(a,b){if(b.length%5==0)a.A=new Float32Array(b),a.mode="poi",a.Z=5}function Pc(a,b,c){a.Y=new Uint16Array(b);a.Ee=c;a.pb=b.length;a.ma=!0;switch(c){case "TRIANGLES":a.di=b.length/3;break;case "TRIANGLESTRIP":a.di=b.length-2}}s.Yc=ca("m");
s.yd=function(){this.S=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.bufferData(this.b.ARRAY_BUFFER,this.A,this.b.STATIC_DRAW);this.Xb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Xb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.Y,this.b.STATIC_DRAW)};
s.o=function(){if(this.S)this.b.deleteBuffer(this.S),this.S=j;if(this.Xb)this.b.deleteBuffer(this.Xb),this.Xb=j;this.xj?this.m.o():this.m=j;this.A=j;this.mode="";this.pb=this.mg=0;this.Ee=this.Y=j};
s.pa=function(a,b,c,d,e){if(this.ma){b=b||0;c=c||0;this.S==j&&this.yd();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Xb);this.va&&(this.c.ic(),this.Ke.ba(this.va,this.c.Gb),this.c.jc(this.Ke));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,12,0);Qc(this.c.Ta,this.c.ua,this.uc);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.Ta,e=this.c.bi,f=this.c.gg,g=this.c.gd;d.bc&&(d.b.useProgram(d.bc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.bc,"matModelView"),!1,f.na()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.bc,"matProjection"),!1,g.na()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.bc,"matNormal"),!1,e.na()),d.b.uniform1i(d.b.getUniformLocation(d.bc,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);Rc(this.c.Ta,this.c.ua,this.Kc);break;case "pnc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,40,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,40,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,
!1,40,24);Sc(this.c.Ta,this.c.bi,this.c.gg,this.c.ua,this.Kc);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Ta;e=this.c.ua;f=this.Kc;d.Sc&&(d.b.useProgram(d.Sc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Sc,"matMVP"),!1,e.na()),d.b.uniform1i(d.b.getUniformLocation(d.Sc,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.Sc,"uColor"),f.na()));
break;case "pt_stereo":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);var d=this.c.Ta,e=this.c.ua,f=this.hn,g=this.jn,i=this.tn,k=this.un;d.Kb&&(d.b.useProgram(d.Kb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Kb,"matMVP"),!1,e.na()),d.b.uniform1i(d.b.getUniformLocation(d.Kb,"uTexture1"),0),d.b.uniform1i(d.b.getUniformLocation(d.Kb,"uTexture2"),1),d.b.uniform1f(d.b.getUniformLocation(d.Kb,
"dx"),i),d.b.uniform1f(d.b.getUniformLocation(d.Kb,"dy"),k),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Kb,"uColorMat1"),!1,f.na()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Kb,"uColorMat2"),!1,g.na()));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,
this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,!1,48,40);d=this.c.Ta;e=this.c.ua;d.Rc&&(d.b.useProgram(d.Rc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Rc,"matMVP"),!1,e.na()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==j)d=this.pn;e=this.c.Ta;f=this.c.ua;e.jd&&(e.b.useProgram(e.jd),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.jd,
"matMVP"),!1,f.na()),e.b.uniform4fv(e.b.getUniformLocation(e.jd,"uColor"),d.na()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(e==j)e=this.qn;d=this.c.Ta;f=this.c.ua;d.ld&&(d.b.useProgram(d.ld),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.ld,"matMVP"),!1,f.na()),d.b.uniform4fv(d.b.getUniformLocation(d.ld,"uColor"),e.na()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);
this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Ta;e=this.c.ua;f=this.c.Gb;d.Tc&&(d.b.useProgram(d.Tc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tc,"matM"),!1,f.na()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tc,"matMVP"),!1,e.na()),d.b.uniform1i(d.b.getUniformLocation(d.Tc,"uTexture"),0));break;default:alert("Draw: unknown surface mode!!")}if(this.m)d=this.m,d.ec&&(d.b.activeTexture(d.b.TEXTURE0),
d.b.bindTexture(d.b.TEXTURE_2D,d.m));switch(this.Ee){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.pb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.pb,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.pb,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,
this.pb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.pb,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.va&&this.c.yc();if(this.m)a=this.m,a.ec&&a.b.bindTexture(a.b.TEXTURE_2D,j);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
s.Mb=function(a,b,c,d){d||(d=this);if(c)this.Ma=c;if(b)this.Bb=b;if(a.BoundingBox)d.ha=a.BoundingBox[0],d.Ca=a.BoundingBox[1];if(a.Offset)d.aa=a.Offset;if(a.CurtainIndex)d.$p=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.mg=a.Vertices.length/3;Ic(d,a.Vertices);d.mode="p";Pc(d,a.Indices,a.IndexSemantic);d.pb=a.Indices.length;break;case "pnt":d.mg=a.Vertices.length/8;Jc(d,a.Vertices);d.mode="pnt";Pc(d,a.Indices,a.IndexSemantic);d.pb=a.Indices.length;break;case "pc":d.mg=a.Vertices.length/7;d.mode=
"pc";Kc(d,a.Vertices);Pc(d,a.Indices,a.IndexSemantic);d.pb=a.Indices.length;break;case "pnc":d.mg=a.Vertices.length/10;d.mode="pnc";Lc(d,a.Vertices);Pc(d,a.Indices,a.IndexSemantic);d.pb=a.Indices.length;break;case "pt":case "pt_stereo":d.mg=a.Vertices.length/5;d.mode=a.VertexSemantic;Mc(d,a.Vertices);Pc(d,a.Indices,a.IndexSemantic);d.pb=a.Indices.length;break;case "pnct":d.mg=a.Vertices.length/12;d.mode="p";Nc(d,a.Vertices);Pc(d,a.Indices,a.IndexSemantic);d.pb=a.Indices.length;break;default:alert("CreateFromJSONObject: unknown surface mode!!")}if(a.DiffuseMap)d.m=
new O(d.c),d.m.repeat=!0,P(d.m,a.DiffuseMap,function(){var a=d;a.ec=!0;a.Bb&&a.Bb(a)},function(){var a=d;hc(G("owg.Mesh"),"Downloading Error: Texture not found...");a.Ma&&a.Ma(a)},!0),d.xj=!0;a.Center&&d.oh(a.Center[0],a.Center[1],a.Center[2]);if(!d.xj)d.ec=!0;d.gn&&d.gn();d.Bb&&!d.xj&&d.Bb(d)};
function Tc(a,b,c,d){b==j?alert("invalid json-url"):(a.ed=b,a.Q=new window.XMLHttpRequest,a.Q.open("GET",a.ed,!0),a.Bb=c,a.Ma=d,a.Q.onreadystatechange=function(){if(a.Q.readyState==4)if(a.Q.status==404)a.Ma&&a.Ma(a);else{var b=Hc(a.Q.responseText);a.Mb(b,j,j,a)}},a.Q.send())}
s.Xe=function(a,b,c,d,e,f){var g=!1,i,k,l,m;k=i=0;l=1.0E20;for(var p=0;p<this.di;p++){var o;o=p;switch(this.Ee){case "TRIANGLES":this.G.ui=this.A[this.Y[o*3]*this.Z];this.G.vi=this.A[this.Y[o*3]*this.Z+1];this.G.wi=this.A[this.Y[o*3]*this.Z+2];this.G.xi=this.A[this.Y[o*3+1]*this.Z];this.G.yi=this.A[this.Y[o*3+1]*this.Z+1];this.G.zi=this.A[this.Y[o*3+1]*this.Z+2];this.G.Vj=this.A[this.Y[o*3+2]*this.Z];this.G.Wj=this.A[this.Y[o*3+2]*this.Z+1];this.G.Xj=this.A[this.Y[o*3+2]*this.Z+2];break;case "TRIANGLESTRIP":o%
2==0?(this.G.ui=this.A[this.Y[o]*this.Z],this.G.vi=this.A[this.Y[o]*this.Z+1],this.G.wi=this.A[this.Y[o]*this.Z+2],this.G.xi=this.A[this.Y[o+1]*this.Z],this.G.yi=this.A[this.Y[o+1]*this.Z+1],this.G.zi=this.A[this.Y[o+1]*this.Z+2]):(this.G.ui=this.A[this.Y[o+1]*this.Z],this.G.vi=this.A[this.Y[o+1]*this.Z+1],this.G.wi=this.A[this.Y[o+1]*this.Z+2],this.G.xi=this.A[this.Y[o]*this.Z],this.G.yi=this.A[this.Y[o]*this.Z+1],this.G.zi=this.A[this.Y[o]*this.Z+2]);this.G.Vj=this.A[this.Y[o+2]*this.Z];this.G.Wj=
this.A[this.Y[o+2]*this.Z+1];this.G.Xj=this.A[this.Y[o+2]*this.Z+2];break;default:hc(G("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.aa&&(this.G.ui+=this.aa[0],this.G.vi+=this.aa[1],this.G.wi+=this.aa[2],this.G.xi+=this.aa[0],this.G.yi+=this.aa[1],this.G.zi+=this.aa[2],this.G.Vj+=this.aa[0],this.G.Wj+=this.aa[1],this.G.Xj+=this.aa[2]);o=this.Y[o]==this.Y[o+1]||this.Y[o]==this.Y[o+2]||this.Y[o+1]==this.Y[o+2]?!1:!0;if(o){if(this.va){o=new L;
o.W(this.Ke);var r=new K;r.n(this.G.ui,this.G.vi,this.G.wi);var t=new K;t.n(this.G.xi,this.G.yi,this.G.zi);var u=new K;u.n(this.G.Vj,this.G.Wj,this.G.Xj);r=o.Ha(r);t=o.Ha(t);o=o.Ha(u);o=this.Bn.pk(a,b,c,d,e,f,r.a[0],r.a[1],r.a[2],t.a[0],t.a[1],t.a[2],o.a[0],o.a[1],o.a[2])}else o=this.Bn.pk(a,b,c,d,e,f,this.G.ui,this.G.vi,this.G.wi,this.G.xi,this.G.yi,this.G.zi,this.G.Vj,this.G.Wj,this.G.Xj);if(o&&(g=!0,o.R<l&&o.R>0))l=o.R,i=o.qd,k=o.fe,m=p}}if(g)return a={},a.R=l,a.qd=i,a.fe=k,a.Mo=m,a;return j};
function Uc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,i,k,l,m=0;m<a.A.length;m++)i=a.A[m*a.Z],k=a.A[m*a.Z+1],l=a.A[m*a.Z+2],i>e&&(e=i),k>f&&(f=k),l>g&&(g=l),i<b&&(b=i),k<c&&(c=k),l<d&&(d=l);a.va&&(m=new K(b,c,d),l=new K(e,c,d),i=new K(e,f,d),d=new K(b,f,d),k=new K(b,c,g),c=new K(b,f,g),e=new K(e,f,g),g=new K(b,f,g),b=a.va.Ha(m),f=a.va.Ha(l),i=a.va.Ha(i),d=a.va.Ha(d),k=a.va.Ha(k),c=a.va.Ha(c),l=a.va.Ha(e),m=a.va.Ha(g),e=[b.a[0],f.a[0],i.a[0],d.a[0],k.a[0],c.a[0],l.a[0],m.a[0]],
g=[b.a[1],f.a[1],i.a[1],d.a[1],k.a[1],c.a[1],l.a[1],m.a[1]],i=[b.a[2],f.a[2],i.a[2],d.a[2],k.a[2],c.a[2],l.a[2],m.a[2]],e.sort(),g.sort(),i.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=i[0],g=i[i.length-1]);a.aa&&(b+=a.aa[0],c+=a.aa[1],d+=a.aa[2],e+=a.aa[0],f+=a.aa[1],g+=a.aa[2]);if(a.ha===j)a.ha=Array(3);if(a.Ca===j)a.Ca=Array(3);a.ha[0]=b;a.ha[1]=c;a.ha[2]=d;a.Ca[0]=e;a.Ca[1]=f;a.Ca[2]=g}
s.Ym=function(a,b,c,d,e,f){return this.Yi.fh(a,b,c,d,e,f,this.ha[0],this.ha[1],this.ha[2],this.Ca[0],this.Ca[1],this.Ca[2])};s.nh=function(a,b,c,d,e,f){var g=this.c.M.a,i=new L;this.ve[0]=a;this.ve[1]=b;this.ve[2]=c;this.ue[0]=d||0;this.ue[1]=e||0;this.ue[2]=f||0;i.Qd([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.ve[0],this.ve[1],this.ve[2],1]);a=new L;a.xd(this.ue[0],this.ue[1],this.ue[2]);b=new L;b.ba(i,a);this.va=b};
function Vc(a){a.nh(a.ve[0],a.ve[1],a.ve[2],a.ue[0],a.ue[1],a.ue[2])}
s.oh=function(a,b,c,d,e,f){this.oc=a;this.nc=b;this.lc=c;var g=new Q(a,b,c),c=Array(3);g.$(c);(new L).xd(c[0],c[1],c[2]);g=new L;g.ge(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new L;b.Qd(a);a=new L;a.me(H,H,H);c=new L;c.ba(b,a);b=new L;g=new L;a=new L;d?b.Ak(e*Math.PI/180):b.Ak(-1.57079633);e&&g.Jm(d*Math.PI/180+1.57079633);f&&a.Km(f*Math.PI/180);d=new L;
d.ba(b,g);e=new L;e.ba(d,a);d=new L;d.ba(c,e);this.va=d;Uc(this)};s.Df=function(a,b,c){var d=new L;d.me(a,b,c);a=new L;b=this.va.uf();a.ba(b,d);this.va=a};
s.Nb=function(a,b,c){var d=J(a),e=J(b),f=J(c),c=new L,b=Math.cos(d),a=Math.cos(e),g=Math.cos(f),d=Math.sin(d),e=Math.sin(e),f=Math.sin(f);c.a[0]=a*g;c.a[1]=d*e*g+b*f;c.a[2]=-b*e*g+d*f;c.a[3]=0;c.a[4]=-a*f;c.a[5]=-d*e*f+b*g;c.a[6]=b*e*f+d*g;c.a[7]=0;c.a[8]=e;c.a[9]=-d*a;c.a[10]=b*a;c.a[11]=0;c.a[12]=0;c.a[13]=0;c.a[14]=0;c.a[15]=1;b=this.va.uf();a=new L;a.ba(b,c);this.va=a};
s.W=function(a){this.Yc(a.m);this.A=a.A;this.mode=a.mode;this.Z=a.Z;this.Y=a.Y;this.Ee=a.Ee;this.pb=a.pb;this.ma=a.ma;this.di=a.di;this.S=a.S;this.Xb=a.Xb;this.va=a.va;this.Ee=a.Ee};
function Wc(a,b,c,d){var e=b[0],f=b[1],b=b[2],g=c[0],i=c[1],c=c[2],k={VertexSemantic:"",Vertices:j,IndexSemantic:"",Indices:j,VertexSemantic:"p"};k.Vertices=[-0.5*g+e,-0.5*i+f,-0.5*c+b,-0.5*g+e,-0.5*i+f,0.5*c+b,0.5*g+e,-0.5*i+f,-0.5*c+b,0.5*g+e,-0.5*i+f,0.5*c+b,0.5*g+e,0.5*i+f,-0.5*c+b,0.5*g+e,0.5*i+f,0.5*c+b,-0.5*g+e,0.5*i+f,-0.5*c+b,-0.5*g+e,0.5*i+f,0.5*c+b];k.IndexSemantic="TRIANGLES";k.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];w(d)&&(d.length==4?a.uc.n(d[0],
d[1],d[2],d[3]):d.length==3&&a.uc.n(d[0],d[1],d[2],1));a.Mb(k,j,j);Uc(a)}function Xc(a){var b=[],c=a[0],d=a[1],a=a[2],e=c*c+d*d;e/=0.578106683090441;e+=a*a/0.5742366172789609;e=Math.sqrt(e);e=1/e;b.push(e*c);b.push(e*d);b.push(e*a);return b}
function Yc(a,b,c){var d=Math.sqrt(0.578106683090441),e={VertexSemantic:"",Vertices:j,IndexSemantic:"",Indices:j,VertexSemantic:"p"};e.Vertices=[-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0];e.IndexSemantic="TRIANGLES";e.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];w(b)&&(b.length==4?a.uc.n(b[0],b[1],b[2],
b[3]):b.length==3&&a.uc.n(b[0],b[1],b[2],1));b=e.Vertices;for(d=0;d<c;d++){for(var f=[],g=e.Indices,i=0;i<g.length;i+=3){for(var k=g[i],l=g[i+1],m=g[i+2],p=[(b[k*3+0]+b[l*3+0])/2,(b[k*3+1]+b[l*3+1])/2,(b[k*3+2]+b[l*3+2])/2],p=Xc(p),o=[(b[l*3+0]+b[m*3+0])/2,(b[l*3+1]+b[m*3+1])/2,(b[l*3+2]+b[m*3+2])/2],o=Xc(o),r=[(b[m*3+0]+b[k*3+0])/2,(b[m*3+1]+b[k*3+1])/2,(b[m*3+2]+b[k*3+2])/2],r=Xc(r),t=-1,u=-1,z=-1,y=0;y<b.length/3;y+=3){for(var A=!0,T=!0,ka=!0,V=0;V<3;V++)Math.abs(b[y+V]-p[V])>1.0E-7&&(A&=0),Math.abs(b[y+
V]-o[V])>1.0E-7&&(T&=0),Math.abs(b[y+V]-r[V])>1.0E-7&&(ka&=0);A&&(t=y/3);T&&(u=y/3);ka&&(z=y/3)}t==-1&&(t=b.length/3,b.push(p[0]),b.push(p[1]),b.push(p[2]));u==-1&&(u=b.length/3,b.push(o[0]),b.push(o[1]),b.push(o[2]));z==-1&&(z=b.length/3,b.push(r[0]),b.push(r[1]),b.push(r[2]));f.push(k);f.push(t);f.push(z);f.push(l);f.push(u);f.push(t);f.push(m);f.push(z);f.push(u);f.push(t);f.push(u);f.push(z)}e.Indices=f}a.Mb(e,j,j);Uc(a)}x("Surface",M);M.prototype.Draw=M.prototype.pa;M.prototype.CopyFrom=M.prototype.W;
M.prototype.SetAsBillboard=M.prototype.nh;M.prototype.SetTexture=M.prototype.Yc;M.prototype.TestBoundingBoxIntersection=M.prototype.Ym;M.prototype.TestRayIntersection=M.prototype.Xe;var Zc="art/";function O(a,b,c,d,e){this.c=a;this.b=a.b;this.m=j;this.mj=this.ec=!1;this.Fa=j;this.height=this.width=0;this.Mr=j;this.wn=this.Oo=!1;b&&$c(this,c||0,d||0,e||!1);this.repeat=!1}
function $c(a,b,c,d){ad(a);a.Vc=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Vc);a.Vc.width=b;a.Vc.height=c;a.m=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.m);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Vc.width,a.Vc.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,j);a.Dj=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.Dj);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Vc.width,a.Vc.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.m,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.Dj);a.b.bindTexture(a.b.TEXTURE_2D,j);a.b.bindRenderbuffer(a.b.RENDERBUFFER,j);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
j);a.ec=!0;a.Oo=!0;a.width=b;a.height=c}function ad(a){if(a.Vc!=j&&(a.b.deleteRenderbuffer(a.Dj),a.Dj=j,a.b.deleteFramebuffer(a.Vc),a.Vc=j,a.b.deleteTexture(a.m),a.m=j,a.Fa))a.Fa.o(),a.Fa=j}
function P(a,b,c,d,e){a.wn=w(e)?e:!1;a.m=a.b.createTexture();var f=a.m,g=a.b;a.m.cg=new Image;a.m.cg.crossOrigin="anonymous";a.m.cg.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.wn);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.cg);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,j);a.width=f.cg.width;a.height=f.cg.height;c!=j&&c(a);a.ec=!0};a.m.cg.onerror=function(){hc(G("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.mj=!0;d&&d(a)};a.m.cg.src=b}s=O.prototype;
s.U=function(a,b,c,d,e,f,g,i,k,l,m){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;i=i||!1;k=k||1;m=m||j;if(this.ec){var p=this.width,o=this.height,r=this.width/2,t=this.height/2;this.c.ic();this.c.Ck();var d=J(d),u=new L;d>0?u.Qd([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*r+Math.sin(d)*e*t+e*r+a,-Math.cos(d)*f*t-Math.sin(d)*f*r+f*t+b,c,1]):(u.xd(a,b,c),a=new L,a.me(e,f,1),u.ba(u,a));this.c.jc(u);if(this.Fa===j)this.Fa=new M(this.c),i?Oc(this.Fa,[0,0,0,0,0,p,0,0,
1,0,p,o,0,1,1,0,o,0,0,1]):Oc(this.Fa,[0,0,0,0,1,p,0,0,1,1,p,o,0,1,0,0,o,0,0,0]),Pc(this.Fa,[0,1,2,0,2,3],"TRIANGLES"),this.Fa.Yc(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);k<1&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));m&&(this.b.activeTexture(this.b.TEXTURE1),
this.b.bindTexture(this.b.TEXTURE_2D,m.m));this.Fa.pa(j,j,j,j,l);m&&(this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,j),this.b.activeTexture(this.b.TEXTURE0));g&&(this.c.b.disable(this.c.b.BLEND),this.c.b.enable(this.c.b.DEPTH_TEST));this.c.yc()}};s.o=function(){this.c.b.deleteTexture(this.m);this.m=j;this.mj=this.ec=!1;if(this.Fa)this.Fa.o(),this.Fa=j;ad(this)};
s.vh=function(){this.Oo&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Vc),this.b.viewport(0,0,this.Vc.width,this.Vc.height))};s.Zm=function(){this.b.bindTexture(this.b.TEXTURE_2D,j);this.b.bindFramebuffer(this.b.FRAMEBUFFER,j);this.b.viewport(0,0,this.c.width,this.c.height)};s.W=function(a){this.m=a.m;this.ec=a.ec;this.mj=a.mj;this.height=this.width=this.Fa=a.Fa};x("Texture",O);O.prototype.CopyFrom=O.prototype.W;O.prototype.Blit=O.prototype.U;O.prototype._EnableRenderToTexture=O.prototype.vh;
O.prototype._DisableRenderToTexture=O.prototype.Zm;function Q(a,b,c){this.J=new Float32Array([a,b,c])}Q.prototype.n=function(a,b,c){this.J[0]=a;this.J[1]=b;this.J[2]=c};Q.prototype.$=function(a){var b=Math.sin(J(this.J[1])),c=Math.cos(J(this.J[1])),d=Math.sin(J(this.J[0])),e=mc/Math.sqrt(1-nc*b*b);a[0]=(e+this.J[2])*c*Math.cos(J(this.J[0]));a[1]=(e+this.J[2])*c*d;a[2]=(0.993305620011365*e+this.J[2])*b;a[0]*=H;a[1]*=H;a[2]*=H};
Q.prototype.xc=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,i=0,g=0;a*=pc;b*=pc;c*=pc;for(var k=0;k<10;k++)g=Math.sin(e),g*=g,i=Math.cos(e),g=mc/Math.sqrt(1-nc*g),f=Math.sqrt(a*a+b*b)/i-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*nc/(g+f));this.J[0]=qc(d);this.J[1]=qc(e);this.J[2]=f};Q.prototype.Cg=function(){return" Longitude: "+this.J[0].toPrecision(17)+" Latitude: "+this.J[1].toPrecision(17)+" Elevation: "+this.J[2].toPrecision(17)};x("GeoCoord",Q);
Q.prototype.FromCartesian=Q.prototype.xc;Q.prototype.ToCartesian=Q.prototype.$;Q.prototype.ToString=Q.prototype.Cg;function bd(a){this.c=a;this.b=a.b;this.va=this.S=this.$b=j;this.Ke=new L;this.Ml=[];this.Uj=this.yj=this.aa=0}s=bd.prototype;s.Bg=function(a){this.yj+=a.length/7;if(this.Uj==0)this.Uj=this.yj*70;this.$b=j;this.$b=new Float32Array(a);this.yd()};s.o=function(){if(this.S)this.b.deleteBuffer(this.S),this.S=j;this.S=this.$b=j};
s.oh=function(a,b,c){var d=new Q(a,b,c),c=Array(3);d.$(c);(new L).xd(c[0],c[1],c[2]);d=new L;d.sm(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new L;b.Qd(a);a=new L;a.me(H,H,H);c=new L;c.ba(b,a);a=new L;b=new L;b.ba(c,a);this.va=b};
s.pa=function(){if(this.$b!=j){this.S||this.yd();this.va&&(this.c.ic(),this.Ke.ba(this.va,this.c.Gb),this.c.jc(this.Ke));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new L;a.xf(this.c.ua);cd(this.c.Ta,this.c.ua,a);this.b.drawArrays(this.b.POINTS,0,this.yj);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);
this.va&&this.c.yc()}};s.yd=function(){this.S===j?(this.S=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S),this.b.bufferData(this.b.ARRAY_BUFFER,this.Uj,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.$b)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.aa,this.$b));this.aa+=this.$b.length*4};var dd,ed,fd,gd,hd;function id(){return v.navigator?v.navigator.userAgent:j}gd=fd=ed=dd=!1;var jd;if(jd=id()){var kd=v.navigator;dd=jd.indexOf("Opera")==0;ed=!dd&&jd.indexOf("MSIE")!=-1;fd=!dd&&jd.indexOf("WebKit")!=-1;gd=!dd&&!fd&&kd.product=="Gecko"}var ld=dd,md=ed,nd=gd,od=fd,pd,qd=v.navigator;pd=qd&&qd.platform||"";hd=pd.indexOf("Mac")!=-1;var rd=pd.indexOf("Win")!=-1,sd;
a:{var td="",ud;if(ld&&v.opera)var vd=v.opera.version,td=typeof vd=="function"?vd():vd;else if(nd?ud=/rv\:([^\);]+)(\)|;)/:md?ud=/MSIE\s+([^\);]+)(\)|;)/:od&&(ud=/WebKit\/(\S+)/),ud)var wd=ud.exec(id()),td=wd?wd[1]:"";if(md){var xd,yd=v.document;xd=yd?yd.documentMode:h;if(xd>parseFloat(td)){sd=String(xd);break a}}sd=td}var zd={};function Ad(a){return zd[a]||(zd[a]=Ab(sd,a)>=0)};var Bd;var Cd="dblclick",Dd="mousedown",Ed="mouseup",Fd="mouseout",Gd="mousemove",Hd="keydown",Id="keyup";var Jd=!md||Ad("9"),Kd=md&&!Ad("8");function Ld(){Md&&(Nd[qa(this)]=this)}var Md=!1,Nd={};Ld.prototype.sn=!1;Ld.prototype.Rh=function(){if(!this.sn&&(this.sn=!0,this.Vd(),Md)){var a=qa(this);Nd.hasOwnProperty(a)||ba(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete Nd[a]}};Ld.prototype.Vd=n();function Od(a,b){Ld.call(this);this.type=a;this.currentTarget=this.target=b}Ca(Od,Ld);s=Od.prototype;s.Vd=function(){delete this.type;delete this.target;delete this.currentTarget};s.og=!1;s.ni=!0;s.stopPropagation=function(){this.og=!0};s.preventDefault=function(){this.ni=!1};var Pd=new Function("a","return a");function Qd(a,b){a&&this.Xd(a,b)}Ca(Qd,Od);var Rd=0,Sd=1,Td=2,Ud=[1,4,2];s=Qd.prototype;s.target=j;s.relatedTarget=j;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=!1;s.altKey=!1;s.shiftKey=!1;s.metaKey=!1;s.Aq=!1;s.Ce=j;
s.Xd=function(a,b){var c=this.type=a.type;Od.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(nd)try{Pd(d.nodeName)}catch(e){d=j}}else if(c=="mouseover")d=a.fromElement;else if(c==Fd)d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Aq=hd?a.metaKey:a.ctrlKey;this.state=a.state;this.Ce=a;delete this.ni;delete this.og};function Vd(a,b){return Jd?a.Ce.button==b:a.type=="click"?b==Rd:!!(a.Ce.button&Ud[b])}
s.stopPropagation=function(){Qd.sg.stopPropagation.call(this);this.Ce.stopPropagation?this.Ce.stopPropagation():this.Ce.cancelBubble=!0};s.preventDefault=function(){Qd.sg.preventDefault.call(this);var a=this.Ce;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Kd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};s.Vd=function(){Qd.sg.Vd.call(this);this.relatedTarget=this.currentTarget=this.target=this.Ce=j};function Wd(){}var Xd=0;s=Wd.prototype;s.key=0;s.Qg=!1;s.fn=!1;s.Xd=function(a,b,c,d,e,f){oa(a)?this.Dn=!0:a&&a.handleEvent&&oa(a.handleEvent)?this.Dn=!1:ba(Error("Invalid listener argument"));this.ai=a;this.oo=b;this.src=c;this.type=d;this.capture=!!e;this.vl=f;this.fn=!1;this.key=++Xd;this.Qg=!1};s.handleEvent=function(a){if(this.Dn)return this.ai.call(this.vl||this.src,a);return this.ai.handleEvent.call(this.ai,a)};var Yd,Zd=(Yd="ScriptEngine"in v&&v.ScriptEngine()=="JScript")?v.ScriptEngineMajorVersion()+"."+v.ScriptEngineMinorVersion()+"."+v.ScriptEngineBuildVersion():"0";function $d(a,b){Ld.call(this);this.Kn=b;this.Wf=[];a>this.Kn&&ba(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Wf.push(this.Nh())}Ca($d,Ld);s=$d.prototype;s.Uf=j;s.rn=j;s.getObject=function(){if(this.Wf.length)return this.Wf.pop();return this.Nh()};function ae(a,b){a.Wf.length<a.Kn?a.Wf.push(b):a.cl(b)}s.Nh=function(){return this.Uf?this.Uf():{}};s.cl=function(a){if(this.rn)this.rn(a);else if(pa(a))if(oa(a.Rh))a.Rh();else for(var b in a)delete a[b]};
s.Vd=function(){$d.sg.Vd.call(this);for(var a=this.Wf;a.length;)this.cl(a.pop());delete this.Wf};var be,ce,de,ee,fe,ge,he,ie,je,ke,le;
(function(){function a(){return{$a:0,Md:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new Wd}function e(){return new Qd}var f=Yd&&!(Ab(Zd,"5.7")>=0),g;ge=function(a){g=a};if(f){be=function(){return i.getObject()};ce=function(a){ae(i,a)};de=function(){return k.getObject()};ee=function(a){ae(k,a)};fe=function(){return l.getObject()};he=function(){ae(l,c())};ie=function(){return m.getObject()};je=function(a){ae(m,a)};ke=function(){return p.getObject()};
le=function(a){ae(p,a)};var i=new $d(0,600);i.Uf=a;var k=new $d(0,600);k.Uf=b;var l=new $d(0,600);l.Uf=c;var m=new $d(0,600);m.Uf=d;var p=new $d(0,600);p.Uf=e}else be=a,ce=ha,de=b,ee=ha,fe=c,he=ha,ie=d,je=ha,ke=e,le=ha})();var me={},ne={},oe={},pe={};
function R(a,b,c,d,e){if(b)if(la(b)){for(var f=0;f<b.length;f++)R(a,b[f],c,d,e);return j}else{var d=!!d,g=ne;b in g||(g[b]=be());g=g[b];d in g||(g[d]=be(),g.$a++);var g=g[d],i=qa(a),k;g.Md++;if(g[i]){k=g[i];for(f=0;f<k.length;f++)if(g=k[f],g.ai==c&&g.vl==e){if(g.Qg)break;return k[f].key}}else k=g[i]=de(),g.$a++;f=fe();f.src=a;g=ie();g.Xd(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);me[c]=g;oe[i]||(oe[i]=de());oe[i].push(g);a.addEventListener?(a==v||!a.on)&&a.addEventListener(b,f,d):a.attachEvent(qe(b),
f);return c}else ba(Error("Invalid event type"))}function re(a,b,c,d,e){if(la(b))for(var f=0;f<b.length;f++)re(a,b[f],c,d,e);else{d=!!d;a:{f=ne;if(b in f&&(f=f[b],d in f&&(f=f[d],a=qa(a),f[a]))){a=f[a];break a}a=j}if(a)for(f=0;f<a.length;f++)if(a[f].ai==c&&a[f].capture==d&&a[f].vl==e){S(a[f].key);break}}}
function S(a){if(me[a]){var b=me[a];if(!b.Qg){var c=b.src,d=b.type,e=b.oo,f=b.capture;c.removeEventListener?(c==v||!c.on)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(qe(d),e);c=qa(c);e=ne[d][f][c];if(oe[c]){var g=oe[c],i=Fb(g,b);i>=0&&Eb.splice.call(g,i,1);g.length==0&&delete oe[c]}b.Qg=!0;e.eo=!0;se(d,f,c,e);delete me[a]}}}
function se(a,b,c,d){if(!d.wj&&d.eo){for(var e=0,f=0;e<d.length;e++)if(d[e].Qg){var g=d[e].oo;g.src=j;he(g);je(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.eo=!1;f==0&&(ee(d),delete ne[a][b][c],ne[a][b].$a--,ne[a][b].$a==0&&(ce(ne[a][b]),delete ne[a][b],ne[a].$a--),ne[a].$a==0&&(ce(ne[a]),delete ne[a]))}}
function te(a){var b,c=0,d=b==j;b=!!b;if(a==j)mb(oe,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)S(f.key),c++}});else if(a=qa(a),oe[a])for(var a=oe[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)S(f.key),c++}}function qe(a){if(a in pe)return pe[a];return pe[a]="on"+a}
function ue(a,b,c,d,e){var f=1,b=qa(b);if(a[b]){a.Md--;a=a[b];a.wj?a.wj++:a.wj=1;try{for(var g=a.length,i=0;i<g;i++){var k=a[i];k&&!k.Qg&&(f&=ve(k,e)!==!1)}}finally{a.wj--,se(c,d,b,a)}}return Boolean(f)}function ve(a,b){var c=a.handleEvent(b);a.fn&&S(a.key);return c}
ge(function(a,b){if(!me[a])return!0;var c=me[a],d=c.type,e=ne;if(!(d in e))return!0;var e=e[d],f,g;Bd===h&&(Bd=md&&!v.addEventListener);if(Bd){f=b||ga("window.event");var i=!0 in e,k=!1 in e;if(i){if(f.keyCode<0||f.returnValue!=h)return!0;a:{var l=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(m){l=!0}if(l||f.returnValue==h)f.returnValue=!0}}l=ke();l.Xd(f,this);f=!0;try{if(i){for(var p=de(),o=l.currentTarget;o;o=o.parentNode)p.push(o);g=e[!0];g.Md=g.$a;for(var r=p.length-1;!l.og&&r>=0&&g.Md;r--)l.currentTarget=
p[r],f&=ue(g,p[r],d,!0,l);if(k){g=e[!1];g.Md=g.$a;for(r=0;!l.og&&r<p.length&&g.Md;r++)l.currentTarget=p[r],f&=ue(g,p[r],d,!1,l)}}else f=ve(c,l)}finally{if(p)p.length=0,ee(p);l.Rh();le(l)}return f}d=new Qd(b,this);try{f=ve(c,d)}finally{d.Rh()}return f});function we(){this.Wh=[];this.Gl=new Ob;this.Io=this.Jo=this.Ko=this.zo=0;this.be=new Ob;this.kn=this.Ho=0;this.uq=1;this.dl=new $d(0,4E3);this.dl.Nh=function(){return new xe};this.Ao=new $d(0,50);this.Ao.Nh=function(){return new ye};var a=this;this.xl=new $d(0,2E3);this.xl.Nh=function(){return String(a.uq++)};this.xl.cl=n();this.dq=3}function ye(){this.Zl=this.Fo=this.count=0}
ye.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.Fo*10)/10," ms)");this.Zl&&a.push(" [VarAlloc = ",this.Zl,"]");return a.join("")};function xe(){}function ze(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(Ae(a.vn-c));e.push(" ",Be(a.vn-b));a.el==0?e.push(" Start        "):a.el==1?(e.push(" Done "),e.push(Ae(a.Sr-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.Rq>0&&e.push("[VarAlloc ",a.Rq,"] ");return e.join("")}
xe.prototype.toString=function(){return this.type==j?this.Zp:"["+this.type+"] "+this.Zp};we.prototype.reset=function(a){this.dq=a;for(a=0;a<this.Wh.length;a++){var b=this.dl.id;b&&ae(this.xl,b);ae(this.dl,this.Wh[a])}this.Wh.length=0;this.Gl.clear();this.zo=Ba();this.kn=this.Ho=this.Io=this.Jo=this.Ko=0;b=this.be.pj();for(a=0;a<b.length;a++){var c=this.be.get(b[a]);c.count=0;c.Fo=0;c.Zl=0;ae(this.Ao,c)}this.be.clear()};
we.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Wh.length;d++){var e=this.Wh[d];e.el==1&&c.pop();a.push(" ",ze(e,this.zo,b,c.join("")));b=e.vn;a.push("\n");e.el==0&&c.push("|  ")}if(this.Gl.$f()!=0){var f=Ba();a.push(" Unstopped timers:\n");Nb(this.Gl,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Be(b.startTime),")\n")})}b=this.be.pj();for(d=0;d<b.length;d++)c=this.be.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Ho,"\n","Total comments created ",
this.kn,"\n","Overhead start: ",this.Ko," ms\n","Overhead end: ",this.Jo," ms\n","Overhead comment: ",this.Io," ms\n");return a.join("")};we.prototype.In=function(a){v.console&&v.console.markTimeline&&v.console.markTimeline(a)};function Ae(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function Be(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new we;new $d(0,100);var Ce=0;function De(){this.cr=Ce;Ce++;this.vd=n();this.wd=n();this.ud=n();this.Re=n();this.Qe=n();this.Ue=n();this.zf=n();this.Ve=n();this.er=this.c=j;this.Ur=[]}function Ee(a){a.Ue(a.c.K);a.Re()}De.prototype.Xc=function(){this.zf();this.Qe()};function Fe(){Ld.call(this)}Ca(Fe,Ld);s=Fe.prototype;s.on=!0;s.Hl=j;s.addEventListener=function(a,b,c,d){R(this,a,b,c,d)};s.removeEventListener=function(a,b,c,d){re(this,a,b,c,d)};
s.dispatchEvent=function(a){var b=a.type||a,c=ne;if(b in c){if(na(a))a=new Od(a,this);else if(a instanceof Od)a.target=a.target||this;else{var d=a,a=new Od(b,this);pb(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.Hl)e.push(f);f=c[!0];f.Md=f.$a;for(var g=e.length-1;!a.og&&g>=0&&f.Md;g--)a.currentTarget=e[g],d&=ue(f,e[g],a.type,!0,a)&&a.ni!=!1}if(!1 in c)if(f=c[!1],f.Md=f.$a,b)for(g=0;!a.og&&g<e.length&&f.Md;g++)a.currentTarget=e[g],d&=ue(f,e[g],a.type,!1,a)&&a.ni!=!1;else for(e=this;!a.og&&
e&&f.Md;e=e.Hl)a.currentTarget=e,d&=ue(f,e,a.type,!1,a)&&a.ni!=!1;a=Boolean(d)}else a=!0;return a};s.Vd=function(){Fe.sg.Vd.call(this);te(this);this.Hl=j};function Ge(){this.ei=this.Hj=this.Rj=this.Pj=this.Qj=this.Oj=this.Mj=this.Nj=this.Lj=this.Jj=this.Kj=this.Ij=this.Tg=this.Ug=this.ug=this.Sg=this.hj=this.fj=this.Fr=j;this.Dl=this.Cl=0;this.Gc=!1;this.elevation=this.latitude=this.longitude=this.eb=0;this.hd=-1;this.ob=this.vb=0;this.ia=He;this.ag=0;this.dd=48;this.nd=this.Gj=this.Me=this.vc=this.Wg=this.gc=this.Nc=this.Ib=0;this.cn=!1;this.mn=this.ln=0;this.Kc=new Gc(0.7,0.9,1,1);this.xo=!0;this.ud=n();this.Ac=function(a){for(;a>360;)a-=360;for(;a<
0;)a+=360;return a};this.vd=function(){if(this.hd==0)this.Gc&&(this.hj.U(this.Cl-64,this.Dl-64,0,this.eb,1,1,!0,!1),this.fj.U(this.Cl-64,this.Dl-64,0,0,1,1,!0,!1)),this.c.Oe("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(this.hd==1){this.cn&&this.Hj.U(this.ln-16,this.mn-16,0,0,1,1,!0,!1,0.75);var a=this.c.width-1-64-this.ag,b=this.c.height-1-this.dd,c=this.Ac(this.Wg+this.Gj);this.ia==Ie?this.Tg.U(a-64,b-64,0,c,1,1,
!0,!1,1,this.Kc):this.ia==Je?this.Tg.U(a-64,b-64,0,c,1,1,!0,!1,1,this.Kc):this.Tg.U(a-64,b-64,0,c,1,1,!0,!1);this.ia==Ke?(this.Ug.U(a-32,b-32,0,0,1,1,!0,!1),this.ug.U(a-32,b-32,0,this.gc,1,1,!0,!1,0.5)):this.ia==Le?(this.Ug.U(a-32,b-32,0,0,1,1,!0,!1),this.ug.U(a-32,b-32,0,this.gc,1,1,!0,!1,0.5)):this.Ug.U(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-this.dd;this.ia==Me?(this.Sg.U(a-32,b-32,0,0,1,1,!0),this.ug.U(a-32,b-32,0,this.Ib,1,1,!0,!1,0.5)):this.ia==Ne?(this.Sg.U(a-32,b-32,0,0,1,1,!0),this.ug.U(a-
32,b-32,0,this.Ib,1,1,!0,!1,0.5)):this.Sg.U(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.dd;this.Rj.U(a-8,b-64,0,0,1,1,!0,!1);b=this.c.height-1-82-64-this.dd;this.ia==Oe?this.Nj.U(a-16,b-16,0,0,1,1,!0,!1):this.ia==Pe?this.Mj.U(a-16,b-16,0,0,1,1,!0,!1):this.Lj.U(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-64-this.dd;this.ia==Qe?this.Kj.U(a-16,b-16,0,0,1,1,!0,!1):this.ia==Re?this.Jj.U(a-16,b-16,0,0,1,1,!0,!1):this.Ij.U(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.nd-this.dd;
this.ia==Se?this.Qj.U(a-16,b-16,0,0,1,1,!0,!1):this.ia==Te?this.Pj.U(a-16,b-16,0,0,1,1,!0,!1):this.Oj.U(a-16,b-16,0,0,1,1,!0,!1);this.ei&&this.xo&&(a=this.c.width-1-170-this.ag,b=this.dd-25,this.ei.U(a-16,b-16,0,0,1,1,!0,!1))}};this.wd=function(a){this.hd=a.hd;this.eb=a.gj*57.29577951308232;this.longitude=a.Wd.longitude;this.latitude=a.Wd.latitude;this.elevation=a.Wd.elevation;this.cn=a.Cd;this.ln=a.gb[0];this.mn=this.c.height-a.gb[1]-1;if(this.ia!=Ie)this.Gj=this.eb,this.Wg=0;if(this.ia==Pe)a.Ga=
yc,a.Aa=1;else if(this.ia==Re)a.Ga=zc,a.Aa=1;else if(this.ia==Te)if(this.nd>0)a.Ga=zc,a.Aa=Math.sqrt(this.nd)/4;else{if(this.nd<0)a.Aa=Math.sqrt(-this.nd)/4,a.Ga=yc}else this.ia==Ne?(a.Ga=Ac,a.Aa=this.Nc):this.ia==Ie?(a.Ga=Bc,a.Aa=this.Gj+this.Wg,a.Aa=this.Ac(a.Aa),a.Aa*=Math.PI/180):this.ia==Ke?(a.Ga=Cc,a.Aa=Math.PI*this.gc/180):a.Ga=xc;a.El=this.ia==He?0:1};this.Re=function(){this.fj=new O(this.c);P(this.fj,Zc+"flightnavigation/cmpbg.png");this.hj=new O(this.c);P(this.hj,Zc+"flightnavigation/cmpr.png");
this.Sg=new O(this.c);P(this.Sg,Zc+"globenavigation/MoveWheel.png");this.Ug=new O(this.c);P(this.Ug,Zc+"globenavigation/YawPitchWheel.png");this.Tg=new O(this.c);P(this.Tg,Zc+"globenavigation/yaw_pitch_adjust.png");this.ug=new O(this.c);P(this.ug,Zc+"globenavigation/movewheel_marker.png",j,j,!0);this.Ij=new O(this.c);P(this.Ij,Zc+"globenavigation/minus.png");this.Kj=new O(this.c);P(this.Kj,Zc+"globenavigation/minus_over.png");this.Jj=new O(this.c);P(this.Jj,Zc+"globenavigation/minus_clicked.png");
this.Lj=new O(this.c);P(this.Lj,Zc+"globenavigation/plus.png");this.Nj=new O(this.c);P(this.Nj,Zc+"globenavigation/plus_over.png");this.Mj=new O(this.c);P(this.Mj,Zc+"globenavigation/plus_clicked.png");this.Oj=new O(this.c);P(this.Oj,Zc+"globenavigation/slider.png");this.Qj=new O(this.c);P(this.Qj,Zc+"globenavigation/slider_over.png");this.Pj=new O(this.c);P(this.Pj,Zc+"globenavigation/slider_clicked.png");this.Rj=new O(this.c);P(this.Rj,Zc+"globenavigation/slider_rail.png");this.Hj=new O(this.c);
P(this.Hj,Zc+"globenavigation/crosshair.png");this.ei=new O(this.c);P(this.ei,Zc+"owg.png")};this.Qe=function(){this.fj.o();this.hj.o();this.Sg.o();this.Ug.o();this.Tg.o();this.ug.o();this.Ij.o();this.Kj.o();this.Jj.o();this.Lj.o();this.Nj.o();this.Mj.o();this.Oj.o();this.Qj.o();this.Pj.o();this.Rj.o();this.Hj.o();this.ei.o()};this.zf=function(){S(this.Hc);S(this.Jc);S(this.Ic);S(this.Ed)};this.Ue=function(a){this.Hc=R(a,Dd,this.he,!1,this);this.Jc=R(a,Ed,this.je,!1,this);this.Ic=R(a,Gd,this.ie,!1,
this);this.Ed=R(a,Cd,this.ih,!1,this)};this.he=function(a){if(Vd(a,Rd)){var b=a.offsetX-this.c.K.offsetLeft,a=a.offsetY-this.c.K.offsetTop;this.Cl=b;this.Dl=this.c.height-a-1;this.vb=b;this.ob=this.c.height-a-1;this.Gc=!0;this.hd==1&&this.mk(0)}};this.je=function(a){if(Vd(a,Rd)){var b=a.offsetY-this.c.K.offsetTop;this.vb=a.offsetX-this.c.K.offsetLeft;this.ob=this.c.height-b-1;this.Gc=!1;this.hd==1&&this.mk(0);this.nd=0}};this.ie=function(a){if(this.c&&this.c.K){var b=a.offsetY-this.c.K.offsetTop,
c=this.c.height-b-1-this.ob;this.vb=a.offsetX-this.c.K.offsetLeft;this.ob=this.c.height-b-1;this.hd==1&&this.mk(c)}};this.ih=function(){this.ia==Je&&Ue(this.c.ya,this.longitude,this.latitude,this.elevation,0,-90,0)};this.mk=function(a){var b=this.c.width-1-64-this.ag-8,c=this.c.height-1-82-64-this.dd+8,d=this.c.width-1-64-this.ag-8,e=this.c.height-1-82-128-64-this.dd+8,f=this.c.width-1-64-this.ag-8,g=this.c.height-1-82-128-this.nd-this.dd+8,i=this.c.width-1-64-this.ag,k=this.c.height-1-82-this.dd,
l=Math.abs(this.vb-i);l*=l;var m=Math.abs(this.ob-k);m*=m;var p=this.c.width-1-64-this.ag,o=this.c.height-1-this.dd,r=Math.abs(this.vb-p);r*=r;var t=Math.abs(this.ob-o);t*=t;if(this.Gc&&this.ia==Te)if(this.nd-=a,this.nd<-40)this.nd=-40;else{if(this.nd>40)this.nd=40}else if(this.Gc&&this.ia==Ne)a=this.vb-i,k=this.ob-k,this.Nc=this.Ib=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.Ib=360-this.Ib:this.Nc=360-this.Nc,this.Ib+=90,this.Nc+=90,this.Ib=this.Ac(this.Ib),this.Nc=this.Ac(this.Nc);else if(this.Gc&&
this.ia==Ie){a=this.vb-p;k=this.ob-o;this.vc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.vc=360-this.vc;this.vc-=90;this.vc=this.Ac(this.vc);this.Wg=this.Ac(this.vc-this.Me)}else if(this.Gc&&this.ia==Ke){a=this.vb-p;k=this.ob-o;this.gc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.gc=360-this.gc;this.gc+=90;this.gc=this.Ac(this.gc)}else{this.ia=0;if(this.vb>b&&this.ob>c-16&&this.vb<b+16&&this.ob<c)this.ia=this.Gc?Pe:Oe;if(this.vb>d&&this.ob>e-16&&this.vb<d+16&&this.ob<e)this.ia=this.Gc?
Re:Qe;if(this.vb>f&&this.ob>g-16&&this.vb<f+16&&this.ob<g)this.ia=this.Gc?Te:Se;l+m<=729?this.Gc?this.ia=Ne:(this.ia=Me,a=this.vb-i,k=this.ob-k,this.Nc=this.Ib=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.Ib=360-this.Ib:this.Nc=360-this.Nc,this.Ib+=90,this.Nc+=90,this.Ib=this.Ac(this.Ib),this.Nc=this.Ac(this.Nc)):this.Ib=0;if(r+t<=625){this.ia=this.Gc?Ke:Le;a=this.vb-p;k=this.ob-o;this.gc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.gc=360-this.gc;this.gc+=90;this.gc=this.Ac(this.gc)}else if(r+
t<=1600)if(this.Gc){this.ia=Ie;a=this.vb-p;k=this.ob-o;this.vc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.vc=360-this.vc;this.vc-=90;this.vc=this.Ac(this.vc);this.Wg=this.Ac(this.vc-this.Me);this.Gj=this.eb}else{this.ia=Je;a=this.vb-p;k=this.ob-o;this.Me=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Me=360-this.Me;this.Me-=90;this.Me-=this.Wg;this.Me=this.Ac(this.Me)}}};this.nk=function(a){this.xo=!a}}var He=0,Oe=1,Pe=2,Qe=3,Re=4,Se=5,Te=6,Me=7,Ne=8,Je=9,Ie=10,Le=11,Ke=12;
Ge.prototype=new De;function Ve(){this.name="ogAoeImage";this.type=bb;this.ab=-1;this.P=!1;this.options=j;this.hf=-1;this.jf=-180;this.gf=-90;this.fg=180;this.eg=90;this.Dr="";this.ec=!1;this.m=this.pq=j;this.Jg=[];this.Gg=[]}Ve.prototype=new E;s=Ve.prototype;s.Pa=function(a){this.options=a;this.jf=a.longitude0;this.gf=a.latitude0;this.fg=a.longitude1;this.eg=a.latitude1;this.mq=a.url;a=this.parent.parent.c;this.pq=new O(a,!0,256,256);this.m=new O(a);this.m.parent=this;P(this.m,this.mq,We,Xe,!0);this.ab=Ye(this).ak(this)};
s.jb=function(){Ye(this).wk(this.ab)};function Ye(a){var b=j,a=a.parent.parent.c;if(a.d&&a.d.l)b=a.d.l.Rk;return b}s.qa=n();s.ra=n();
s.Wa=function(){var a=this.parent.parent.c;if(this.ec!=!1){var b=a.d.l.oa.O.length,c,d,e,f,g=j;this.Gg=j;this.Gg=[];for(var i=0;i<b;i++)if(g=a.d.l.oa.O[i],!(g.f.length<1)&&!g.Cr&&(c=g.jf,d=g.gf,e=g.fg,f=g.eg,!(this.jf>e|this.fg<c|this.gf>f|this.eg<d)&&(this.Gg[g.f]=this.Jg[g.f],!this.Jg[g.f]))){var k=new M(g.c);k.W(g.v);var l=g.m,m=new O(g.c,!0,256,256),p=m;a.Bf.push(p);p.vh();l.U(0,0,0,0,1,1,!0,!0,1);this.m.U((this.jf-c)*256/(e-c),(this.gf-d)*256/(f-d),0,0,(this.fg-this.jf)/this.m.width/((e-c)/256),
(this.eg-this.gf)/this.m.height/((f-d)/256),!0,!0,1);Ze(a);k.Yc(m);k.Uq=g.B[0];k.Vq=g.B[1];k.Wq=g.B[2];this.Jg[g.f]=k;this.Gg[g.f]=k}}for(var o in this.Gg)a=this.Gg[o],b=new L,b.W(a.c.Gb),b.a[12]+=a.Uq,b.a[13]+=a.Vq,b.a[14]+=a.Wq,a.c.ic(),a.c.jc(b),a.pa(),a.c.yc()};function We(a){a.parent.ec=!0;a.F&&a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function Xe(a){a.D&&a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j};function $e(a){this.c=a;this.Hh=[]}$e.prototype.Wa=function(){for(var a=0;a<this.Hh.length;a++)this.Hh[a].Wa()};$e.prototype.ak=function(a){this.Hh.push(a);return this.Hh.length-1};$e.prototype.wk=function(a){this.Hh.splice(a,1)};function af(a){this.c=a;this.cb=[];this.bf=new bf}af.prototype.Wa=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,i=0;this.bf.Ui(b);for(var k=0;k<this.cb.length;k++){var l=this.cb[k];l.P||(this.bf.Ti(l.lf,l.mf,l.nf,l.lf+0.0010,l.mf+0.0010,l.nf+0.0010),f=l.lf-c,g=l.mf-d,i=l.nf-e,f=f*f+g*g+i*i,g=l.cm*l.cm,l.bm*l.bm>f&&g<f&&l.pa())}};af.prototype.lh=function(a,b){for(var c=0;c<this.cb.length;c++)if(this.cb[c].jh(a,b))return this.cb[c];return j};function cf(a){this.c=a;this.fb=[]}cf.prototype.Wa=function(){for(var a=0;a<this.fb.length;a++){var b=this.fb[a];b.P||b.pa()}};cf.prototype.bk=function(a){this.fb.push(a)};cf.prototype.xk=function(a){for(var b=0;b<this.fb.length;b++)if(this.fb[b]==a){this.fb.splice(b,1);break}};cf.prototype.kh=function(a,b){for(var c=0;c<this.fb.length;c++){var d=this.fb[c].jh(a,b);if(d)return d}return j};function df(a){this.c=a;this.Xf=[];this.aa=[];this.type="tile";this.ed="";this.Ma=this.Bb=j;this.Ua=new L}df.prototype.sk=function(a,b,c){this.ed=a;this.Q=new window.XMLHttpRequest;this.Q.open("GET",this.ed,!0);this.Bb=b;this.Ma=c;var d=this;this.Q.onreadystatechange=function(){if(d.Q.readyState==4)if(d.Q.status==404)d.Ma&&d.Ma(d);else{var a=Hc(d.Q.responseText);d.Mb(a)}};this.Q.send()};
df.prototype.Wa=function(){this.Ua.W(this.c.Gb);this.Ua.a[12]+=this.aa[0];this.Ua.a[13]+=this.aa[1];this.Ua.a[14]+=this.aa[2];this.c.ic();this.c.jc(this.Ua);for(var a=0;a<this.Xf.length;a++)this.Xf[a].pa();this.c.yc()};
df.prototype.Mb=function(a){var b=!0;if(w(a.Version&&a.Version=="1.0")){var c=a.Texture,d=a.Offset,e=a.BoundingBox,a=a.Objects;this.aa=d;for(var f=0;f<a.length;f++){var b=new M(this.c),g=a[f];g.Offset=d;g.BoundingBox=e;g.DiffuseMap=c.length==0?g.Texture:c;b.Mb(g,j,j);this.Xf.push(b);b=!1}}b?this.Ma&&this.Ma(this):this.Bb&&this.Bb(this)};function ef(){this.ma=q(!1);this.tb=q(!1);this.La=n();this.hc=q(0);this.ub=q(0);this.de=this.ee=-1;this.sb=q(!1)};function ff(a){this.c=a;this.b=a.b;this.S=this.$b=j;this.ho=this.aa=0}ff.prototype.Bg=function(a,b){a=="pc"?(this.ho=b.length/7,this.$b=b,this.yd()):G("owg.PointRenderer").error("Point Semantic not supported!")};ff.prototype.o=function(){if(this.S)this.b.deleteBuffer(this.S),this.S=j;this.S=this.$b=j};
ff.prototype.pa=function(){if(this.$b!=j){this.S||this.yd();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new L;a.xf(this.c.ua);cd(this.c.Ta,this.c.ua,a);this.b.drawArrays(this.b.POINTS,0,this.ho);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1)}};
ff.prototype.yd=function(){if(this.S===j)this.S=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S),this.b.bufferData(this.b.ARRAY_BUFFER,this.$b.length*4,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.$b)};var gf={dp:!0,Ci:!1,Ki:!1};if(gf.Ki)var jf=function(a,b){var c=hf.createImageData((a+3)/4,1).data;c.byteLength=a;if(b!==h)for(var d=0;d<a;d++)c[d]=b[d];return c},hf=document.createElement("canvas").getContext("2d");var kf={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};function lf(a,b){return!b&&a instanceof Array?a:Array.prototype.slice.call(a)}function mf(a,b){return a!==h?a:b}
function nf(a,b,c,d){if(a instanceof nf)return a=a.slice(b,b+c),a.Mf=mf(d,a.Mf),a;if(!(this instanceof nf))return new nf(a,b,c,d);this.buffer=a=nf.Yo(a);this.Ch=gf.Ci&&a instanceof ArrayBuffer;this.Hp=gf.Ki&&a instanceof CanvasPixelArray;this.an=gf.dp&&this.Ch;!this.Ch&&!this.Hp&&!(a instanceof Array)&&ba(new TypeError("jDataView buffer has an incompatible type"));this.Mf=!!d;d="byteLength"in a?a.byteLength:a.length;this.byteOffset=b=mf(b,0);this.byteLength=c=mf(c,d-b);this.an?this.bn=new DataView(a,
b,c):this.Vi(b,c,d);this.Fp=this.an?this.Dp:this.Ch?this.xp:this.wp}
nf.Yo=function(a){switch(typeof a){case "number":if(gf.Ci)a=(new Uint8Array(a)).buffer;else if(gf.Ki)a=jf(a);else for(var a=Array(a),b=0;b<a.length;b++)a[b]=0;return a;case "string":for(var b=new (gf.Ci?Uint8Array:Array)(a.length),c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c)&255;a=b;default:if(gf.Ci){if(!(a instanceof ArrayBuffer)&&(a=(new Uint8Array(a)).buffer,!(a instanceof ArrayBuffer)))a=(new Uint8Array(lf(a,!0))).buffer}else a=gf.Ki?jf(a.length,a):lf(a);return a}};
function of(a){return a>=0&&a<31?1<<a:of[a]||(of[a]=Math.pow(2,a))}nf.createBuffer=function(){return nf.Yo(arguments)};function pf(a,b){this.Al=a;this.sj=b}nf.fr=pf;pf.prototype={valueOf:function(){return this.Al+of(32)*this.sj},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}};pf.xn=function(a){var b=Math.floor(a/of(32));a-=b*of(32);return new pf(a,b)};function qf(){pf.apply(this,arguments)}nf.dr=qf;qf.prototype="create"in Object?Object.create(pf.prototype):new pf;
qf.prototype.valueOf=function(){if(this.sj<of(31))return pf.prototype.valueOf.apply(this,arguments);return-(of(32)-this.Al+of(32)*(of(32)-1-this.sj))};qf.xn=function(a){var b;a>=0?(b=pf.xn(a),a=b.Al,b=b.sj):(b=Math.floor(a/of(32)),a-=b*of(32),b+=of(32));return new qf(a,b)};
nf.prototype={Sd:0,xh:0,Vi:function(a,b,c){typeof a!=="number"&&ba(new TypeError("Offset is not a number."));typeof b!=="number"&&ba(new TypeError("Size is not a number."));b<0&&ba(new RangeError("Length is negative."));(a<0||a+b>mf(c,this.byteLength))&&ba(new RangeError("Offsets are out of bounds."))},$m:function(a,b,c,d,e){return this.Fp(a,b,mf(c,this.Sd),mf(d,this.Mf),e)},Dp:function(a,b,c,d,e){this.Sd=c+kf[a];return b?this.bn["get"+a](c,d):this.bn["set"+a](c,e,d)},xp:n(),wp:function(a,b,c,d,e){return b?
this["_get"+a](c,d):this["_set"+a](c,e,d)},Ok:function(a,b,c){c=mf(c,this.Mf);b=mf(b,this.Sd);a=mf(a,this.byteLength-b);this.Vi(b,a);b+=this.byteOffset;this.Sd=b-this.byteOffset+a;b=this.Ch?new Uint8Array(this.buffer,b,a):(this.buffer.slice||Array.prototype.slice).call(this.buffer,b,b+a);return c||a<=1?b:lf(b).reverse()},kq:function(a,b,c,d){a=this.Ok(a,b,mf(c,!0));return d?lf(a):a},Wi:function(a,b,c){var d=b.length;if(d!==0){c=mf(c,this.Mf);a=mf(a,this.Sd);this.Vi(a,d);!c&&d>1&&(b=lf(b,!0).reverse());
a+=this.byteOffset;if(this.Ch)(new Uint8Array(this.buffer,a,d)).set(b);else for(c=0;c<d;c++)this.buffer[a+c]=b[c];this.Sd=a-this.byteOffset+d}},getString:function(a,b,c){if(this.gr)return b=mf(b,this.Sd),a=mf(a,this.byteLength-b),this.Vi(b,a),this.Sd=b+a,this.buffer.toString(c||"binary",this.byteOffset+b,this.byteOffset+this.Sd);for(var b=this.Ok(a,b,!0),d="",a=b.length,e=0;e<a;e++)d+=String.fromCharCode(b[e]);c==="utf8"&&(d=decodeURIComponent(escape(d)));return d},Zf:function(a){return this.getString(1,
a)},slice:function(a,b,c){a=a<0?a+this.byteLength:a;b=mf(b,this.byteLength)<0?mf(b,this.byteLength)+this.byteLength:mf(b,this.byteLength);return c?new nf(this.kq(b-a,a,!0,!0),h,h,this.Mf):new nf(this.buffer,this.byteOffset+a,b-a,this.Mf)},Gp:function(a,b){var c=(mf(b,this.Sd)<<3)+this.xh,d=c+a;c>>>=3;var e=this.Ok((d+7>>>3)-c,c,!0),f=0;if(this.xh=d&7)this.xh-=8;for(var d=0,g=e.length;d<g;d++)f=f<<8|e[d];return{start:c,Tp:e,Zq:f}},Pp:function(a,b,c){this.Wi(a,[b&255,b>>>8&255,b>>>16&255,b>>>24],c)},
Op:function(a,b,c){this.Wi(a,[b&255,b>>>8&255],c)},Qp:function(a,b){this.Wi(a,[b&255])},Jq:function(a,b,c){var a=this.Gp(c,a),d=a.Zq,e=a.Tp;d&=~(~(-1<<c)<<-this.xh);d|=(c<32?b&~(-1<<c):b)<<-this.xh;for(b=e.length-1;b>=0;b--)e[b]=d&255,d>>>=8;this.Wi(a.start,e,!0)}};var rf=nf.prototype,sf;for(sf in kf)(function(a){rf["get"+a]=function(b,c){return this.$m(a,!0,b,c)};rf["set"+a]=function(b,c,d){this.$m(a,!1,b,d,c)}})(sf);rf.ir=rf.Pp;rf.hr=rf.Op;rf.jr=rf.Qp;rf.Pr=rf.Jq;
for(var tf in rf)tf.slice(0,3)==="set"&&function(a){rf["write"+a]=function(){Array.prototype.unshift.call(arguments,h);this["set"+a].apply(this,arguments)}}(tf.slice(3));function uf(a){this.c=a;this.aa=[];this.Ma=this.Bb=this.Cj=j;this.Ua=new L}
uf.prototype.sk=function(a,b,c){this.Bb=b;this.Ma=c;var d=this,b=new window.XMLHttpRequest;b.addEventListener("load",function(a){var b=new Uint8Array(a.target.response),a=!0,b=new nf(b,0,b.length,!0),c=b.Zf().charCodeAt(0),i=b.Zf().charCodeAt(0);if(c==1&&i==0){d.aa=[0,0,0];d.aa[0]=b.getFloat64();d.aa[1]=b.getFloat64();d.aa[2]=b.getFloat64();var k=b.Zf().charCodeAt(0),k=k==0?"pc":"p",c=b.getInt32(),i=[];if(k=="pc"&&c>0){i=new Float32Array(c*7);for(a=0;a<c;a++)i[7*a+0]=b.getFloat32(),i[7*a+1]=b.getFloat32(),
i[7*a+2]=b.getFloat32(),i[7*a+3]=b.Zf().charCodeAt(0)/255,i[7*a+4]=b.Zf().charCodeAt(0)/255,i[7*a+5]=b.Zf().charCodeAt(0)/255,i[7*a+6]=b.Zf().charCodeAt(0)/255;d.Cj=new ff(d.c);d.Cj.Bg("pc",i);a=!1}}a?d.Ma&&d.Ma(d):d.Bb&&d.Bb(d)},!1);b.addEventListener("error",function(){d.Ma&&d.Ma(d)},!1);b.open("GET",a,!0);b.responseType="arraybuffer";b.send(j)};
uf.prototype.Wa=function(){this.Cj&&(this.Ua.W(this.c.Gb),this.Ua.a[12]+=this.aa[0],this.Ua.a[13]+=this.aa[1],this.Ua.a[14]+=this.aa[2],this.c.ic(),this.c.jc(this.Ua),this.Cj.pa(),this.c.yc())};var vf={uk:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};x("GlobeUtils",vf);x("GlobeUtils.MakeHierarchicalFilename",vf.uk);function U(){}s=U.prototype;s.mh=function(a,b){this.vk(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};s.vk=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
s.zc=function(a,b){b.x=0;b.y=0;b.Fb=a.length;for(var c,d=b.Fb;d>0;d--)switch(c=1<<d-1,a[b.Fb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};s.Im=function(a,b){var c={x:j,y:j,Fb:j};this.zc(a,c);var d=4.007501668E7/Math.pow(2,c.Fb);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
s.Li=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.vk(a,d);var f=(1-d[3])*256*Math.pow(2,c),g=Math.min(Math.max(d[0]*256*Math.pow(2,c),0),e-1)/e-0.5,i=0.5-Math.min(Math.max((1-d[1])*256*Math.pow(2,c),0),e-1)/e,k=90-360*Math.atan(Math.exp(-i*2*Math.PI))/Math.PI,l=360*g,g=Math.min(Math.max(d[2]*256*Math.pow(2,c),0),e-1)/e-0.5,i=0.5-Math.min(Math.max(f,0),e-1)/e,c=90-360*Math.atan(Math.exp(-i*2*Math.PI))/Math.PI;b[0]=k;b[1]=l;b[2]=c;b[3]=360*g};x("MercatorQuadtree",U);
U.prototype.QuadKeyToMercatorCoord=U.prototype.mh;U.prototype.QuadKeyToNormalizedCoord=U.prototype.vk;U.prototype.QuadKeyToTileCoord=U.prototype.zc;U.prototype.QuadKeyToMercator=U.prototype.Im;U.prototype.QuadKeyToWGS84=U.prototype.Li;function wf(){this.g=j;this.fa=new U;this.coords=Array(4);this.Va=1;this.ea=0;this.Id=this.ig=-1;this.oq=4E4;this.ma=q(!0);this.tb=q(!1);this.La=function(a,b,c,d,e,f){if(this.ma()){var g=Array(4);this.fa.Li(b,g);g=this.Ka[this.ea]+"?layer="+this.g+("&lon0="+g[1]+"&lat0="+g[2]+"&lon1="+g[3]+"&lat1="+g[0])+"&points="+this.oq;a=new uf(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;a.sk(g,xf,yf);this.ea++;if(this.ea>=this.Ka.length)this.ea=0}};this.hc=da("ig");this.ub=da("Id");this.sb=function(a){if(a.length>
this.Id)return!1;else if(a.length<this.ig)return!1;return!0};this.Ea=function(a,b,c,d){this.Ka=a;this.g=b;this.ig=c;this.Id=d}}wf.prototype=new function(){this.ma=q(!1);this.tb=q(!1);this.La=n();this.hc=q(0);this.ub=q(0);this.de=this.ee=-1;this.sb=q(!1)};function xf(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function yf(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}x("owgPointCloudLayer",wf);wf.prototype.Failed=wf.prototype.tb;wf.prototype.Ready=wf.prototype.ma;
wf.prototype.RequestTile=wf.prototype.La;wf.prototype.Setup=wf.prototype.Ea;function zf(){this.g=j;this.fa=new U;this.coords=Array(4);this.Va=1;this.ea=0;this.Id=this.ig=-1;this.ma=q(!0);this.tb=q(!1);this.La=function(a,b,c,d,e,f){if(this.ma()){var g=Array(4);this.fa.Li(b,g);g=this.Ka[this.ea]+"/?"+("extent="+g[1]+","+g[2]+","+g[3]+","+g[0])+"&format=owg";a=new df(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;a.sk(g,Af,Bf);this.ea++;if(this.ea>=this.Ka.length)this.ea=0}};this.hc=da("ig");this.ub=da("Id");this.sb=function(a){if(a.length>this.Id)return!1;else if(a.length<this.ig)return!1;
return!0};this.Ea=function(a,b,c){this.Ka=a;this.ig=b;this.Id=c}}zf.prototype=new function(){this.ma=q(!1);this.tb=q(!1);this.La=n();this.hc=q(0);this.ub=q(0);this.de=this.ee=-1;this.sb=q(!1)};function Af(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function Bf(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}x("owgGeometryLayer",zf);zf.prototype.Failed=zf.prototype.tb;zf.prototype.Ready=zf.prototype.ma;zf.prototype.RequestTile=zf.prototype.La;zf.prototype.Setup=zf.prototype.Ea;function Cf(){this.g=this.Ka=j;this.fa=new U;this.ea=0;this.ma=q(!0);this.tb=q(!1);this.La=function(a,b,c,d,e,f){var g={};this.fa.zc(b,g);g=this.Ka[this.ea]+"/"+g.Fb+"/"+g.x+"/"+g.y+".png";a=new O(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;P(a,g,Df,Ef,!0);this.ea++;if(this.ea>=this.Ka.length)this.ea=0};this.hc=q(0);this.ub=q(18);this.sb=function(a){if(a.length<19)return!0;return!1};this.Ea=ca("Ka")}Cf.prototype=new ef;function Df(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}
function Ef(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j};function Ff(){this.version=this.style=this.Gd=this.g=this.fc=j;this.Va=1;this.ja=j;this.fa=new U;this.ma=q(!0);this.tb=q(!1);this.La=function(a,b,c,d,e,f){var g={};this.fa.zc(b,g);g=this.fc+"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER="+this.g+"&STYLE=default&TILEMATRIXSET=EPSG:900913&TILEMATRIX=EPSG%3A900913:"+g.Fb+"&TILEROW="+g.y+"&TILECOL="+g.x+"&FORMAT=image%2Fpng";a=new O(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;a.Va=this.Va;P(a,g,Gf,Hf,!0)};this.hc=q(0);this.ub=q(19);this.sb=q(!0);this.Ea=
function(a,b,c,d,e,f,g){this.fc=a;this.g=b;this.Gd=d;this.style=e;this.version=f;this.Va=g;this.ja=c;if(this.Gd==j)this.Gd="image/png";if(this.style==j)this.style="";if(this.version==j)this.version="1.0.0";if(this.ja==j)this.ja="EPSG%3A900913";if(this.ja=="EPSG:900913")this.ja="EPSG%3A900913";if(this.ja=="ESRI:102100")this.ja="ESRI%3A102100";if(this.ja=="ESRI:102113")this.ja="ESRI%3A102113";if(this.ja=="EPSG:3785")this.ja="EPSG%3A3785";if(this.ja=="EPSG:3857")this.ja="EPSG%3A3857";if(this.ja=="EPSG:4326")this.ja=
"EPSG%3A4326"}}Ff.prototype=new ef;function Gf(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function Hf(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j};function If(){this.j=this.y=this.x=0}function bf(){this.V=Array(6);this.V[0]=new Jf;this.V[1]=new Jf;this.V[2]=new Jf;this.V[3]=new Jf;this.V[4]=new Jf;this.V[5]=new Jf;this.da=Array(8);this.da[0]=new If;this.da[1]=new If;this.da[2]=new If;this.da[3]=new If;this.da[4]=new If;this.da[5]=new If;this.da[6]=new If;this.da[7]=new If}function Jf(){this.ae=this.$d=this.Zd=this.Ne=0}
Jf.prototype.Wc=function(){var a=Math.sqrt(this.Zd*this.Zd+this.$d*this.$d+this.ae*this.ae);this.Zd/=a;this.$d/=a;this.ae/=a;this.Ne/=a};
bf.prototype.Ti=function(a,b,c,d,e,f){this.da[0].x=a;this.da[0].y=b;this.da[0].j=c;this.da[1].x=d;this.da[1].y=b;this.da[1].j=c;this.da[2].x=d;this.da[2].y=e;this.da[2].j=c;this.da[3].x=a;this.da[3].y=e;this.da[3].j=c;this.da[4].x=a;this.da[4].y=b;this.da[4].j=f;this.da[5].x=a;this.da[5].y=e;this.da[5].j=f;this.da[6].x=d;this.da[6].y=e;this.da[6].j=f;this.da[7].x=d;this.da[7].y=b;this.da[7].j=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.V[a].Zd*this.da[c].x+this.V[a].$d*this.da[c].y+this.V[a].ae*this.da[c].j+
this.V[a].Ne<0&&--b;if(b==0)return!1}return!0};
bf.prototype.Ui=function(a){this.Jr=a;this.Rb=a.a;this.Rn=this.Rb[0];this.Vn=this.Rb[1];this.Zn=this.Rb[2];this.Kg=this.Rb[3];this.Sn=this.Rb[4];this.Wn=this.Rb[5];this.$n=this.Rb[6];this.Lg=this.Rb[7];this.Tn=this.Rb[8];this.Xn=this.Rb[9];this.ao=this.Rb[10];this.Mg=this.Rb[11];this.Un=this.Rb[12];this.Yn=this.Rb[13];this.bo=this.Rb[14];this.Ng=this.Rb[15];this.V[0].Zd=this.Kg+this.Rn;this.V[0].$d=this.Lg+this.Sn;this.V[0].ae=this.Mg+this.Tn;this.V[0].Ne=this.Ng+this.Un;this.V[0].Wc();this.V[1].Zd=
this.Kg-this.Rn;this.V[1].$d=this.Lg-this.Sn;this.V[1].ae=this.Mg-this.Tn;this.V[1].Ne=this.Ng-this.Un;this.V[1].Wc();this.V[2].Zd=this.Kg-this.Vn;this.V[2].$d=this.Lg-this.Wn;this.V[2].ae=this.Mg-this.Xn;this.V[2].Ne=this.Ng-this.Yn;this.V[2].Wc();this.V[3].Zd=this.Kg+this.Vn;this.V[3].$d=this.Lg+this.Wn;this.V[3].ae=this.Mg+this.Xn;this.V[3].Ne=this.Ng+this.Yn;this.V[3].Wc();this.V[4].Zd=this.Kg+this.Zn;this.V[4].$d=this.Lg+this.$n;this.V[4].ae=this.Mg+this.ao;this.V[4].Ne=this.Ng+this.bo;this.V[4].Wc();
this.V[5].Zd=this.Kg-this.Zn;this.V[5].$d=this.Lg-this.$n;this.V[5].ae=this.Mg-this.ao;this.V[5].Ne=this.Ng-this.bo;this.V[5].Wc()};x("ViewFrustum",bf);bf.prototype.TestBox=bf.prototype.Ti;bf.prototype.Update=bf.prototype.Ui;function Kf(){this.Ih=this.Jh=!1;this.version=this.of=this.Tq=this.Po=this.pg=this.Xq=this.co=this.qq=this.rq=this.Jb=this.xb=this.sq=this.Fq=this.Gq=j}
Kf.prototype.bh=function(a){this.Q=new XMLHttpRequest;this.Q.open("GET",a,!0);var b=this;this.Q.onreadystatechange=function(){a:if(b.Q.readyState==4)if(b.Q.status==200){var a=b.Q.responseText,d;try{d=Hc(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.Nr=d.name,b.Jb=d.maxlod,b.co=256,a=d.extent,b.xb=a,b.Po=[b.Jb,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.pg="image/png",b.of=".png"):d.format=="jpg"?(b.pg="image/jpg",b.of=".jpg"):b.pg="image/png";else{if(d.type=="elevation")b.of=
".json"}else if(b.version=0,b.Gq=d.layer,b.Fq=d.copyright,b.sq=d.srs,b.xb=d.boundingbox,b.Jb=d.levelofdetail,b.rq=d.imagewidth,b.qq=d.imageheight,b.co=d.tilesize,b.Xq=d.tilelayout,b.pg=d.tileformat,b.Po=d.bounds,b.Tq=d.center,b.pg=="image/png")b.of=".png";else if(b.pg=="image/jpg")b.of=".jpg";else if(b.pg=="elevation/json")b.of=".json";b.Jh=!0}else hc(G("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.Ih=!0};this.Q.send()};x("DatasetInfo",Kf);Kf.prototype.Download=Kf.prototype.bh;function Lf(){this.L=new Kf;this.g=this.fc=j;this.fa=new U;this.coords=Array(4);this.Va=1;this.ma=function(){return this.L.Jh};this.tb=function(){return this.L.Ih};this.La=function(a,b,c,d,e,f){if(this.ma()){var g=this.fc+"/"+this.g+"/"+vf.uk(b+this.L.of),a=new O(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;a.Va=this.Va;P(a,g,Mf,Nf,!0)}};this.hc=q(0);this.ub=function(){return this.L.Jb?this.L.Jb:0};this.sb=function(a){if(a.length>this.L.Jb)return!1;this.fa.mh(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.L.xb[0],f=this.L.xb[1],g=this.L.xb[2],i=this.L.xb[3];if(d>f||d>f||b<i||b<i||a>g||a>g||c<e||c<e)return!1;return!0};this.Ea=function(a,b,c){this.Va=c==j?1:c;this.fc=a;this.g=b;this.L.bh(a+"/"+b+".json")}}Lf.prototype=new ef;function Mf(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function Nf(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}x("i3dImageLayer",Lf);Lf.prototype.Failed=Lf.prototype.tb;Lf.prototype.Ready=Lf.prototype.ma;
Lf.prototype.RequestTile=Lf.prototype.La;Lf.prototype.Setup=Lf.prototype.Ea;function Of(){this.ma=q(!1);this.tb=q(!1);this.La=n();this.hc=q(0);this.ub=q(0);this.sb=q(!1)};function Pf(){this.L=new Kf;this.g=this.fc=j;this.fa=new U;this.coords=Array(4);this.ma=function(){return this.L.Jh};this.tb=function(){return this.L.Ih};this.La=function(a,b,c,d,e,f){if(this.ma()){var g=this.fc+"/"+this.g+"_JSON/"+(vf.uk(b+".jso")+"n"),a=new M(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;Tc(a,g,Qf,Rf)}};this.hc=q(0);this.ub=function(){return this.L.Jb?this.L.Jb:0};this.sb=function(a){if(a.length>this.L.Jb)return!1;this.fa.mh(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.L.xb[0],f=this.L.xb[1],g=this.L.xb[2],i=this.L.xb[3];if(d>f||d>f||b<i||b<i||a>g||a>g||c<e||c<e)return!1;return!0};this.Ea=function(a,b){this.fc=a;this.g=b;this.L.bh(a+"/"+b+".json")}}Pf.prototype=new Of;function Qf(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function Rf(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j};function Sf(){this.version=this.style=this.Gd=this.g=this.fc=j;this.Va=1;this.ja=j;this.fa=new U;this.ma=q(!0);this.tb=q(!1);this.La=function(a,b,c,d,e,f){this.fc.indexOf("?",this.fc.length-1)==-1&&(this.fc+="?");var g=Array(4);this.ja=="EPSG%3A4326"?this.fa.Li(b,g):this.fa.Im(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.fc+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.ja+"&LAYERS="+this.g+"&STYLES="+this.style+"&FORMAT="+this.Gd+"&VERSION="+this.version+"&BBOX="+g;a=new O(a);
a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;if(this.Gd=="image/png")a.Va=this.Va;P(a,g,Tf,Uf,!0)};this.hc=q(0);this.ub=q(30);this.sb=function(a){if(a.length<31)return!0;return!1};this.Ea=function(a,b,c,d,e,f,g){this.fc=a;this.g=b;this.Gd=d;this.style=e;this.version=f;this.Va=g;this.ja=c;if(this.Gd==j)this.Gd="image/png";if(this.style==j)this.style="";if(this.version==j)this.version="1.1.1";if(this.ja==j)this.ja="EPSG%3A900913";if(this.ja=="EPSG:900913")this.ja="EPSG%3A900913";if(this.ja=="ESRI:102100")this.ja=
"ESRI%3A102100";if(this.ja=="ESRI:102113")this.ja="ESRI%3A102113";if(this.ja=="EPSG:3785")this.ja="EPSG%3A3785";if(this.ja=="EPSG:3857")this.ja="EPSG%3A3857";if(this.ja=="EPSG:4326")this.ja="EPSG%3A4326"}}Sf.prototype=new ef;function Tf(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function Uf(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j};function Vf(){this.g=this.Ka=j;this.fa=new U;this.ea=0;this.ma=q(!0);this.tb=q(!1);this.La=function(a,b,c,d,e,f){var g={};this.fa.zc(b,g);var i=Math.pow(2,g.Fb),g=this.Ka[this.ea]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-i/2)+"&y="+(i-g.y-i/2-1)+"&z="+(18-g.Fb)+"&key=[KEY]",a=new O(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;P(a,g,Wf,Xf,!0);this.ea++;if(this.ea>=this.Ka.length)this.ea=0};this.hc=q(0);this.ub=q(16);this.sb=function(a){if(a.length<17)return!0;return!1};this.Ea=ca("Ka")}Cf.prototype=new ef;
function Wf(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function Xf(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j};function Yf(){this.L=new Kf;this.g=this.fc=j;this.fa=new U;this.coords=Array(4);this.ea=0;this.ma=function(){return this.L.Jh};this.tb=function(){return this.L.Ih};this.La=function(a,b,c,d,e,f){if(this.ma()){var g={};this.fa.zc(b,g);g=this.Ka[this.ea]+"/"+this.g+"/tiles/"+g.Fb+"/"+g.x+"/"+g.y+".json";a=new M(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;Tc(a,g,Zf,$f);this.ea++;if(this.ea>=this.Ka.length)this.ea=0}};this.hc=q(0);this.ub=function(){return this.L.Jb?this.L.Jb:0};this.sb=function(a){if(a.length>
this.L.Jb)return!1;for(var b=a,c=a,d=0;d<this.L.Jb-a.length;d++)b+="0",c+="3";d={};this.fa.zc(b,d);b=d.x;a=d.y;this.fa.zc(c,d);var c=d.x,d=d.y,e=this.L.xb[0],f=this.L.xb[1],g=this.L.xb[3];return!(b>this.L.xb[2]||c<e||a>g||d<f)};this.Ea=function(a,b){this.Ka=a;this.g=b;this.L.bh(a[0]+"/"+b+"/layersettings.json")}}Yf.prototype=new Of;function Zf(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function $f(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j};function ag(){this.g=this.Ka=j;this.fa=new U;this.sub=this.ea=0;this.Qq=["Galile","Galil","Gali","Gal","Ga","G"];this.ma=q(!0);this.tb=q(!1);this.La=function(a,b,c,d,e,f){var g={};this.fa.zc(b,g);g=this.Ka[this.ea]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.Fb+"&s="+this.Qq[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new O(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;P(a,g,Df,Ef,!0);this.ea++;if(this.ea>=this.Ka.length)this.ea=0};this.hc=q(0);this.ub=q(19);this.sb=function(a){if(a.length<20)return!0;return!1};
this.Ea=ca("Ka")}ag.prototype=new Cf;function bg(a,b){this.hg=a||-1;this.aq=b||!1;this.ff={};this.$a=0;this.po=Math.round(this.hg*0.75);this.be={};this.be.hits=0;this.be.misses=0;cg(this,"Initialized cache with size "+a)}bg.prototype.getItem=function(a){var b=this.ff[a];if(b!=j)dg(b)?(eg(this,a),b=j):b.vj=(new Date).getTime();(b=b?b.value:j)?(this.be.hits++,cg(this,"Cache HIT for key "+a)):(this.be.misses++,cg(this,"Cache MISS for key "+a));return b};
bg.prototype.setItem=function(a,b,c){this.ff[a]!=j&&eg(this,a);fg(this,new function(a,b,c){(a==j||a=="")&&ba(Error("key cannot be null or empty"));this.key=a;this.value=b;c==j&&(c={});if(c.lj!=j)c.lj=c.lj.getTime();if(c.li==j)c.li=2;this.options=c;this.vj=(new Date).getTime()}(a,b,c));cg(this,"Setting key "+a);if(this.hg>0&&this.$a>this.hg){var d=this;setTimeout(function(){d.Eq.call(d)},0)}};bg.prototype.clear=function(){for(var a in this.ff)eg(this,a);cg(this,"Cache cleared")};
bg.prototype.Eq=function(){var a=[],b;for(b in this.ff){var c=this.ff[b];dg(c)?eg(this,b):a.push(c)}if(a.length>this.po)for(a=a.sort(function(a,b){return a.options.li!=b.options.li?b.options.li-a.options.li:b.vj-a.vj});a.length>this.po;)eg(this,a.pop().key);cg(this,"Purged cached")};function fg(a,b){a.ff[b.key]=b;a.$a++}
function eg(a,b){var c=a.ff[b];delete a.ff[b];a.$a--;cg(a,"removed key "+b);c.options.Vp!=j&&setTimeout(function(){c.options.Vp.call(j,c.key,c.value)},0);c.value.o!=j&&setTimeout(function(){c.value.o()},0)}function dg(a){var b=(new Date).getTime(),c=!1;a.options.lj&&a.options.lj<b&&(c=!0);!c&&a.options.gq&&a.vj+a.options.gq*1E3<b&&(c=!0);return c}function cg(a,b){a.aq&&G("owg.Cache").info(b)};function gg(a,b,c){a=J(a)-0;b=Math.log(Math.tan(Math.PI/4+J(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function hg(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=qc(b);for(a=qc(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function ig(a,b,c){this.c=a;this.f=b;this.fa=c;this.m=j;this.Fc=!1;this.v=j;this.yn=!0;this.Xf=[];this.Bj=[];this.B=[];this.rb=Array(5);this.rb[0]=new K;this.rb[1]=new K;this.rb[2]=new K;this.rb[3]=new K;this.rb[4]=new K;this.Hg=0;this.images=j;this.Uk=!1;this.jj=0;this.Xi=new K;this.Ua=new L;this.jf=-180;this.gf=-90;this.fg=180;this.eg=90;var d=Array(4),e=Array(2);this.fa.mh(this.f,d);var a=Array(3),b=Array(3),c=Array(3),f,g,i=new Q;f=d[0];g=d[1];hg(f,g,e);f=e[0];g=e[1];this.jf=f;this.eg=g;i.n(f,
g,0);i.$(a);f=d[2];g=d[1];hg(f,g,e);f=e[0];g=e[1];i.n(f,g,0);i.$(b);f=d[2];g=d[3];hg(f,g,e);f=e[0];g=e[1];this.fg=f;this.gf=g;i.n(f,g,0);i.$(c);d=new K;e=new K;d.n(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.n(c[0]-a[0],c[1]-a[1],c[2]-a[2]);vc(this.Xi,d,e);this.Xi.Wc()}var jg=0;
function kg(a){if(a.Hg==0&&a.jj==0){var b=0,c=0;if(a.images!==j)for(var d=0;d<a.images.length;d++)a.images[d]!=j&&(b++,c=d);b==0?(a.m=a.c.Fl,a.v===j&&lg(a),a.v.Yc(a.m),a.Fc=!0,a.images=j):b==1?(a.m=a.images[c],a.v===j&&lg(a),a.v.Yc(a.m),a.Fc=!0,a.images=j):(a.Uk=!0,a.v===j&&lg(a),a.Fc=!0)}}function mg(a,b,c){a=b.caller;a.images[c]=b;a.Hg-=1;kg(a);jg--}function ng(a,b,c){c>=0?(b.images[c]=j,b.Hg-=1):(b.images=j,b.Hg=0);kg(b);jg--}
function og(a,b){var c=b.caller;c.v=b;c.v.Fb=c.f.length;c.B=b.aa;c.rb[0].n(b.ha[0],b.ha[1],b.ha[2]);c.rb[1].n(b.Ca[0],b.ha[1],b.ha[2]);c.rb[2].n(b.Ca[0],b.Ca[1],b.ha[2]);c.rb[3].n(b.ha[0],b.Ca[1],b.ha[2]);c.rb[4].n(0.5*(b.Ca[0]-b.ha[0]),0.5*(b.Ca[1]-b.ha[1]),0.5*(b.Ca[2]-b.ha[2]));c.jj-=1;kg(c);jg--}function pg(a,b){b.v=j;b.jj-=1;kg(b);jg--}function qg(a,b,c){b.caller.Xf[c]=b;jg--}function rg(){jg--}function sg(a,b,c){b.caller.Bj[c]=b;jg--}function tg(){jg--}
ig.prototype.o=function(){this.m&&this.m.o();this.v&&this.v.o()};
function lg(a){var b=Array(4),c=Array(2),d=Array(3);a.fa.mh(a.f,b);var e=b[0],f=b[1],g=b[2],i=b[3],k;a.yn=!1;a.v=new M(a.c);a.v.Fb=a.f.length;a.f.length<3?(b=2,k=1E5):a.f.length<6?(b=9,k=1E5):(b=5,k=1E3);for(var l=[],m=[],i=(i-f)/(b-1),p=(g-e)/(b-1),o=1/(b-1),r,t,u,z=new Q,y=0;y<b;y++)for(var A=0;A<b;A++){r=e+A*p;t=f+y*i;hg(r,t,c);z.n(c[0],c[1],0);z.$(d);r=d[0];t=d[1];u=d[2];if(A==0&&y==0)a.B=[r,t,u];A==0&&y==0?a.rb[0].n(r,t,u):A==b-1&&y==0?a.rb[1].n(r,t,u):A==b-1&&y==b-1?a.rb[2].n(r,t,u):A==0&&y==
b-1?a.rb[3].n(r,t,u):A==(b-1)/2&&y==(b-1)/2&&a.rb[4].n(r,t,u);l.push(r-a.B[0]);l.push(t-a.B[1]);l.push(u-a.B[2]);l.push(A*o);l.push(1-y*o)}A=0;y=b-1;u=-k;hg(e+A*p,f+y*i,c);z.n(c[0],c[1],u);z.$(d);r=d[0];t=d[1];u=d[2];l.push(r-a.B[0]);l.push(t-a.B[1]);l.push(u-a.B[2]);l.push(A*o);l.push(1-y*o);y=A=0;u=-k;hg(e+A*p,f+y*i,c);z.n(c[0],c[1],u);z.$(d);r=d[0];t=d[1];u=d[2];l.push(r-a.B[0]);l.push(t-a.B[1]);l.push(u-a.B[2]);l.push(A*o);l.push(1-y*o);A=b-1;y=0;u=-k;hg(e+A*p,f+y*i,c);z.n(c[0],c[1],u);z.$(d);
r=d[0];t=d[1];u=d[2];l.push(r-a.B[0]);l.push(t-a.B[1]);l.push(u-a.B[2]);l.push(A*o);l.push(1-y*o);A=b-1;y=b-1;u=-k;hg(e+A*p,f+y*i,c);z.n(c[0],c[1],u);z.$(d);r=d[0];t=d[1];u=d[2];l.push(r-a.B[0]);l.push(t-a.B[1]);l.push(u-a.B[2]);l.push(A*o);l.push(1-y*o);for(g=1;g<b-1;g++)A=0,y=b-1-g,r=e+A*p,t=f+y*i,u=-k,hg(r,t,c),z.n(c[0],c[1],u),z.$(d),r=d[0],t=d[1],u=d[2],l.push(r-a.B[0]),l.push(t-a.B[1]),l.push(u-a.B[2]),l.push(A*o),l.push(1-y*o);for(g=1;g<b-1;g++)A=g,y=0,r=e+A*p,t=f+y*i,u=-k,hg(r,t,c),z.n(c[0],
c[1],u),z.$(d),r=d[0],t=d[1],u=d[2],l.push(r-a.B[0]),l.push(t-a.B[1]),l.push(u-a.B[2]),l.push(A*o),l.push(1-y*o);for(g=1;g<b-1;g++)A=b-1,y=g,r=e+A*p,t=f+y*i,u=-k,hg(r,t,c),z.n(c[0],c[1],u),z.$(d),r=d[0],t=d[1],u=d[2],l.push(r-a.B[0]),l.push(t-a.B[1]),l.push(u-a.B[2]),l.push(A*o),l.push(1-y*o);for(g=1;g<b-1;g++)A=b-1-g,y=b-1,r=e+A*p,t=f+y*i,u=-k,hg(r,t,c),z.n(c[0],c[1],u),z.$(d),r=d[0],t=d[1],u=d[2],l.push(r-a.B[0]),l.push(t-a.B[1]),l.push(u-a.B[2]),l.push(A*o),l.push(1-y*o);for(c=0;c<b-1;c++)for(g=
0;g<b-1;g++)d=g+c*b,e=d+1,k=d+b,f=k+1,m.push(d),m.push(f),m.push(k),m.push(d),m.push(e),m.push(f);c=b*b;d=c+1;e=c+2;f=c+3;for(g=0;g<b-1;g++)k=(b-g-1)*b,i=(b-g-2)*b,o=g==0?c:b*b+3+g,p=g==b-2?d:b*b+4+g,m.push(k),m.push(i),m.push(p),m.push(k),m.push(p),m.push(o);for(g=0;g<b-1;g++)k=g,i=g+1,p=g==0?d:b*b+b+1+g,o=g==b-2?e:b*b+b+2+g,m.push(i),m.push(k),m.push(p),m.push(i),m.push(p),m.push(o);for(g=0;g<b-1;g++)k=(g+1)*b-1,i=(g+2)*b-1,o=g==0?e:b*b+2*b-1+g,p=g==b-2?f:b*b+2*b+g,m.push(i),m.push(k),m.push(o),
m.push(i),m.push(o),m.push(p);for(g=0;g<b-1;g++)k=b*b-1-g,i=k-1,o=g==0?f:b*b+3*b-3+g,p=g==b-2?c:b*b+3*b-2+g,m.push(i),m.push(k),m.push(o),m.push(i),m.push(o),m.push(p);Mc(a.v,l);Pc(a.v,m,"TRIANGLES");a.v.Yc(a.m);a.v.aa=a.B;Uc(a.v)}
ig.prototype.Wa=function(a,b){if(!(this.f.length<3))if(a){this.Ua.W(this.c.Gb);this.Ua.a[12]+=this.B[0];this.Ua.a[13]+=this.B[1];this.Ua.a[14]+=this.B[2];this.c.ic();this.c.jc(this.Ua);var c=this.v;if(c.ma){c.S==j&&c.yd();c.b.bindBuffer(c.b.ARRAY_BUFFER,c.S);c.b.bindBuffer(c.b.ELEMENT_ARRAY_BUFFER,c.Xb);c.va&&(c.c.ic(),c.Ke.ba(c.va,c.c.Gb),c.c.jc(c.Ke));switch(c.mode){case "p":c.b.enableVertexAttribArray(0);c.b.vertexAttribPointer(0,3,c.b.FLOAT,!1,12,0);Qc(c.c.Ta,c.c.ua,c.uc);break;case "pnt":c.b.enableVertexAttribArray(0);
c.b.enableVertexAttribArray(1);c.b.enableVertexAttribArray(2);c.b.vertexAttribPointer(0,3,c.b.FLOAT,!1,32,0);c.b.vertexAttribPointer(1,3,c.b.FLOAT,!1,32,12);c.b.vertexAttribPointer(2,2,c.b.FLOAT,!1,32,24);Qc(c.c.Ta,c.c.ua,c.uc);break;case "pc":c.b.enableVertexAttribArray(0);c.b.enableVertexAttribArray(1);c.b.vertexAttribPointer(0,3,c.b.FLOAT,!1,28,0);c.b.vertexAttribPointer(1,4,c.b.FLOAT,!1,28,12);Qc(c.c.Ta,c.c.ua,c.uc);break;case "pnc":c.b.enableVertexAttribArray(0);c.b.enableVertexAttribArray(1);
c.b.enableVertexAttribArray(2);c.b.vertexAttribPointer(0,3,c.b.FLOAT,!1,40,0);c.b.vertexAttribPointer(1,3,c.b.FLOAT,!1,40,12);c.b.vertexAttribPointer(2,4,c.b.FLOAT,!1,40,24);Sc(c.c.Ta,c.c.bi,c.c.gg,c.c.ua,c.uc);break;case "pt":c.b.enableVertexAttribArray(0);c.b.enableVertexAttribArray(1);c.b.vertexAttribPointer(0,3,c.b.FLOAT,!1,20,0);c.b.vertexAttribPointer(1,2,c.b.FLOAT,!1,20,12);Qc(c.c.Ta,c.c.ua,c.uc);break;case "pnct":c.b.enableVertexAttribArray(0),c.b.enableVertexAttribArray(1),c.b.enableVertexAttribArray(2),
c.b.enableVertexAttribArray(3),c.b.vertexAttribPointer(0,3,c.b.FLOAT,!1,48,0),c.b.vertexAttribPointer(1,3,c.b.FLOAT,!1,48,12),c.b.vertexAttribPointer(2,4,c.b.FLOAT,!1,48,24),c.b.vertexAttribPointer(3,2,c.b.FLOAT,!1,48,40),Qc(c.c.Ta,c.c.ua,c.uc)}switch(c.Ee){case "TRIANGLES":c.b.drawElements(c.b.TRIANGLES,c.pb,c.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":c.b.drawElements(c.b.TRIANGLE_STRIP,c.pb,c.b.UNSIGNED_SHORT,0)}c.b.disableVertexAttribArray(0);c.b.disableVertexAttribArray(1);c.b.disableVertexAttribArray(2);
c.b.disableVertexAttribArray(3)}this.c.yc()}else{if(this.Uk){this.Uk=!1;c=this.m=new O(this.c,!0,256,256);this.c.Bf.push(c);c.vh();for(c=0;c<this.images.length;c++)this.images[c]!=j&&(this.images[c].Va<1?this.images[c].U(0,0,0,0,1,1,!0,!0,this.images[c].Va):this.images[c].U(0,0,0,0,1,1,!0,!0,1));Ze(this.c);for(c=0;c<this.images.length;c++)this.images[c]!=j&&this.images[c].o();this.images=j;this.v.Yc(this.m)}this.Ua.W(this.c.Gb);this.Ua.a[12]+=this.B[0];this.Ua.a[13]+=this.B[1];this.Ua.a[14]+=this.B[2];
this.c.ic();this.c.jc(this.Ua);if(this.c.d.l.oa.Pl==ug)this.v.mode="pt";else if(this.c.d.l.oa.Pl==vg)this.v.mode="pt_chroma";this.Bj.length>0&&b||this.v.pa();this.c.yc();for(c=0;c<this.Xf.length;c++)this.Xf[c].Wa();for(c=0;c<this.Bj.length;c++)this.Bj[c].Wa()}};function wg(a,b,c,d,e,f,g){this.c=a;this.za=b;this.Db=c;this.cf=d;this.kf=e;this.fa=f;this.bj=new bg(g,!1);this.Ul={};this.Ul.fo=0}wg.prototype.o=function(){this.fa=this.kf=this.cf=this.Db=this.za=this.c=j;this.bj.clear();this.bj=j};wg.prototype.Cm=function(){if(!this.za)return!1;if(this.za.length==0)return!1;for(var a=0;a<this.za.length;a++)if(!this.za[a].ma())return!1;if(this.Db)for(a=0;a<this.Db.length;a++)if(!this.Db[a].ma())return!1;return!0};
wg.prototype.le=function(a){var b=this.bj.getItem(a);if(b==j){this.Ul.fo++;var c=b=new ig(this.c,a,this.fa),d=this.za,e=this.Db,f=this.cf,g=this.kf;if(c.f.length<3)ng(0,c,-1);else{if(d.length>0){c.Hg=d.length;c.images=Array(c.Hg);for(var i=0;i<d.length;i++){c.images[i]=j;var k=c.f.length,k=(k<=d[i].de||d[i].de==-1)&&(k>=d[i].ee||d[i].ee==-1);d[i].sb(c.f)&&k?(d[i].La(c.c,c.f,i,mg,ng,c),jg++):ng(0,c,i)}}if(e&&e.length>0&&c.f.length>8&&e[0].sb(c.f))c.jj=1,e[0].La(c.c,c.f,0,og,pg,c),jg++;if(f&&f.length>
0)for(i=0;i<f.length;i++)f[i].sb(c.f)&&(f[i].La(c.c,c.f,i,qg,rg,c),jg++);if(g&&g.length>0)for(i=0;i<g.length;i++)g[i].sb(c.f)&&(g[i].La(c.c,c.f,i,sg,tg,c),jg++)}this.bj.setItem(a,b)}return b};wg.prototype.ub=function(){var a=0,b=0;if(this.Db.length>0)for(var c=0;c<this.Db.length;c++)b=Math.max(b,this.Db[c].ub());for(c=0;c<this.za.length;c++)a=Math.max(a,this.za[c].ub());if(b>0)return Math.min(b,a);return a};x("GlobeCache",wg);wg.prototype.IsReady=wg.prototype.Cm;wg.prototype.RequestBlock=wg.prototype.le;function xg(){this.L=new Kf;this.g=j;this.fa=new U;this.coords=Array(4);this.Va=1;this.ea=0;this.ma=function(){return this.L.Jh};this.tb=function(){return this.L.Ih};this.La=function(a,b,c,d,e,f){if(this.ma()){var g={};this.fa.zc(b,g);g=this.Ka[this.ea]+"/"+this.g+"/tiles/"+g.Fb+"/"+g.x+"/"+g.y+this.L.of;a=new O(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;a.Va=this.Va;P(a,g,yg,zg,!0);this.ea++;if(this.ea>=this.Ka.length)this.ea=0}};this.hc=q(0);this.ub=function(){return this.L.Jb?this.L.Jb:0};this.sb=function(a){if(a.length>
this.L.Jb)return!1;for(var b=a,c=a,d=0;d<this.L.Jb-a.length;d++)b+="0",c+="3";d={};this.fa.zc(b,d);b=d.x;a=d.y;this.fa.zc(c,d);var c=d.x,d=d.y,e=this.L.xb[0],f=this.L.xb[1],g=this.L.xb[3];return!(b>this.L.xb[2]||c<e||a>g||d<f)};this.Ea=function(a,b,c){this.Va=c==j?1:c;this.Ka=a;this.g=b;this.L.bh(a[0]+"/"+b+"/layersettings.json")}}xg.prototype=new ef;function yg(a){a.F(a.f,a,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}function zg(a){a.D(a.f,a.caller,a.g);a.F=j;a.D=j;a.f=j;a.caller=j;a.g=j}
x("owgImageLayer",xg);xg.prototype.Failed=xg.prototype.tb;xg.prototype.Ready=xg.prototype.ma;xg.prototype.RequestTile=xg.prototype.La;xg.prototype.Setup=xg.prototype.Ea;function Ag(){this.Va=1;this.La=function(a,b,c,d,e,f){var g={};this.fa.zc(b,g);g.y=Math.pow(2,g.Fb)-1-g.y;g=this.Ka[this.ea]+"/"+g.Fb+"/"+g.x+"/"+g.y+".png";a=new O(a);a.f=b;a.g=c;a.F=d;a.D=e;a.caller=f;a.Va=this.Va;P(a,g,Df,Ef,!0)}}Ag.prototype=new Cf;function Bg(a){this.c=a;this.za=[];this.Db=[];this.cf=[];this.kf=[];this.fa=new U;this.Up=1E3;this.lb=j;this.O=[];this.Fn=0;this.$h={};this.$h.ej=0;this.Lh=j;this.Id=0;this.qo=1;this.bf=new bf;this.Da=Array(3);this.Bl=new L;this.kg=new M(this.c);this.qg=new M(this.c);this.lg=[8/255,24/255,58/255];this.rg=[1,1,1];this.Ol=1;this.Pl=ug;this.so={};this.zn=!1}s=Bg.prototype;s.o=function(){if(this.lb)this.lb.o(),this.lb=j;if(this.kg)this.kg.o(),this.kg=j;if(this.qg)this.qg.o(),this.qg=j};
s.ek=function(a){var b=-1;if(w(a.service))if(a.service=="i3d"){if(w(a.url)&&w(a.layer)&&a.url.length>0){var b=a.url[0],c=a.layer,d=new Lf;if(w(a.minlod))d.ee=a.minlod;if(w(a.maxlod))d.de=a.maxlod;d.Ea(b,c,a.transparency);b=this.za.length;this.za.push(d);Cg(this)}}else if(a.service=="osm"){if(w(a.url)&&a.url.length>0){d=new Cf;if(w(a.minlod))d.ee=a.minlod;if(w(a.maxlod))d.de=a.maxlod;d.Ea(a.url);b=this.za.length;this.za.push(d);Cg(this)}}else if(a.service=="tms"){if(w(a.url)&&a.url.length>0){d=new Ag;
if(w(a.minlod))d.ee=a.minlod;if(w(a.maxlod))d.de=a.maxlod;d.Ea(a.url);b=this.za.length;this.za.push(d);Cg(this)}}else if(a.service=="wmts"){if(w(a.url)&&a.url.length>0&&w(a.layer)&&a.layer.length>0){d=new Ff;if(w(a.format))d.Gd=a.format;if(w(a.style))d.style=a.style;if(w(a.version))d.version=a.version;d.Ea(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency);b=this.za.length;this.za.push(d);Cg(this)}}else if(a.service=="wms"){if(w(a.url)&&a.url.length>0&&w(a.layer)&&a.layer.length>0){d=
new Sf;if(w(a.format))d.Gd=a.format;if(w(a.style))d.style=a.style;if(w(a.version))d.version=a.version;d.Ea(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency);b=this.za.length;this.za.push(d);Cg(this)}}else if(a.service=="owg"){if(w(a.url)&&a.url.length>0){c=a.layer;d=new xg;if(w(a.minlod))d.ee=a.minlod;if(w(a.maxlod))d.de=a.maxlod;d.Ea(a.url,c,a.transparency);b=this.za.length;this.za.push(d);Cg(this)}}else if(a.service=="goo"){if(w(a.url)&&a.url.length>0){d=new ag;if(w(a.minlod))d.ee=
a.minlod;if(w(a.maxlod))d.de=a.maxlod;d.Ea(a.url);b=this.za.length;this.za.push(d);Cg(this)}}else if(a.service=="oym"&&w(a.url)&&a.url.length>0){d=new Vf;if(w(a.minlod))d.ee=a.minlod;if(w(a.maxlod))d.de=a.maxlod;d.Ea(a.url);b=this.za.length;this.za.push(d);Cg(this)}return b};
s.ck=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new Pf;c.Ea(a.url[0],b);b=this.Db.length;this.Db.push(c);Cg(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new Yf;c.Ea(d,b);b=this.Db.length;this.Db.push(c);Cg(this)}return b};s.dk=function(a){var b=-1;if(a.service=="owg"&&a.url&&a.minlod&&a.maxlod&&a.url.length>0){var c=new zf;c.Ea(a.url,a.minlod,a.maxlod);b=this.cf.length;this.cf.push(c);Cg(this)}return b};
s.fk=function(a){var b=-1;if(a.service=="owg"&&a.url&&a.minlod&&a.maxlod&&a.url.length>0){var c=new wf;c.Ea(a.url,a.layer,a.minlod,a.maxlod);b=this.kf.length;this.kf.push(c);Cg(this)}return b};s.zk=function(a){a<0||a>=this.za.length||(this.za.splice(a,1),Cg(this))};s.yk=function(a){a<0||a>=this.Db.length||(this.Db.splice(a,1),Cg(this))};s.Ni=function(a){a<0||a>=this.cf.length||(this.cf.splice(a,1),Cg(this))};s.Oi=function(a){a<0||a>=this.kf.length||(this.kf.splice(a,1),Cg(this))};
function Cg(a){if(a.lb)a.lb.o(),a.lb=j;a.lb=new wg(a.c,a.za,a.Db,a.cf,a.kf,a.fa,a.Up)}
s.Wa=function(a,b){this.lb.Ul.fo=0;this.Bl.W(b);this.bf.Ui(b);this.Lh=a;if(this.lb&&this.lb.Cm()){this.Id=this.lb.ub();var c=this.lb.le("0"),d=this.lb.le("1"),e=this.lb.le("2"),f=this.lb.le("3");if(c.Fc&&d.Fc&&e.Fc&&f.Fc){this.O=[];this.O.push(c);this.O.push(d);this.O.push(e);this.O.push(f);for(this.$h.ej=0;this.$h.ej!=this.O.length;)a:{c=this.$h.ej;if(this.O[c].f.length!=this.Id&&this.O[c].Fc&&Dg(this,c)){var g=this.O[c].f,d=this.lb.le(g+"0"),e=this.lb.le(g+"1"),f=this.lb.le(g+"2"),g=this.lb.le(g+
"3");if(d.Fc&&e.Fc&&f.Fc&&g.Fc){this.O.splice(c,1);this.O.push(d);this.O.push(e);this.O.push(f);this.O.push(g);break a}}this.$h.ej++}for(c=0;c<this.O.length;)e=this.O[c],d=e.rb[4].a,e=e.Xi.a,f=this.Lh.a,this.Da[0]=f[0]-d[0],this.Da[1]=f[1]-d[1],this.Da[2]=f[2]-d[2],(this.Da[0]*e[0]+this.Da[1]*e[1]+this.Da[2]*e[2])/Math.sqrt(this.Da[0]*this.Da[0]+this.Da[1]*this.Da[1]+this.Da[2]*this.Da[2])>=0.4?this.O.splice(c,1):c++;for(c=0;c<this.O.length;c++)this.O[c].Wa(!1,this.zn);d=[];e=[];for(c=0;c<this.O.length;c++){var f=
this.O[c].f,g=0,i=f.charAt(0);if(i=="0"||i=="1")g=1;if(i=="2"||i=="3")g=2;for(var k=1;k<f.length;k++){i=f.charAt(k);if((i=="0"||i=="1")&&g=="2"){g=0;break}if((i=="2"||i=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.O[c]);g==2&&e.push(this.O[c])}d.length>3&&Eg(this,d);e.length>3&&Fg(this,e)}}};
function Dg(a,b){var c=!0,d=a.O[b],e=d.f.length;if(e>a.Id)return!1;if(e<3)return!0;c=a.bf.Ti(d.v.ha[0],d.v.ha[1],d.v.ha[2],d.v.Ca[0],d.v.Ca[1],d.v.Ca[2]);if(!c)return!1;var f=d.rb[4].a,g=d.Xi.a,e=a.Lh.a;a.Da[0]=e[0]-f[0];a.Da[1]=e[1]-f[1];a.Da[2]=e[2]-f[2];f=Math.sqrt(a.Da[0]*a.Da[0]+a.Da[1]*a.Da[1]+a.Da[2]*a.Da[2]);f>0&&(a.Da[0]/=f,a.Da[1]/=f,a.Da[2]/=f);a.Da[0]*g[0]+a.Da[1]*g[1]+a.Da[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,i=d.v.A.length/d.v.Z,k=0;k<i;k++)c[0]=e[0]-(d.v.A[5*
k]+d.B[0]),c[1]=e[1]-(d.v.A[5*k+1]+d.B[1]),c[2]=e[2]-(d.v.A[5*k+2]+d.B[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.qo;g=d.rb[0].uf();g.Dk(d.rb[1]);return c*g.rk()/e>1}
s.ke=function(a,b,c){for(var b=this.c.vf(a,b,this.Bl,!0),d=[],e=a=0;e<this.O.length;e++){var f=this.O[e].v.ha,g=this.O[e].v.Ca;this.O[e].v.Yi.fh(b.x,b.y,b.j,b.ze,b.Ae,b.Be,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.O[e])}f=1.0E20;c.hit=!1;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].v.Xe(b.x,b.y,b.j,b.ze,b.Ae,b.Be))&&g.R<f)c.hit=!0,f=g.R,a=d[e].yn?0:1;c.tmin=f;if(c.hit)c.x=b.x+f*b.ze,c.y=b.y+f*b.Ae,c.z=b.j+f*b.Be,b=new Q(0,0,0),b.xc(c.x,c.y,c.z),c.lng=b.J[0],c.lat=b.J[1],c.elv=b.J[2],a==
1&&(c.elv=0)};s.Ag=function(a,b,c,d){if(d)if(d={},this.ke(a,b,d),d.hit)this.Ol=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.vf(a,b,this.Bl,!0);c.hit=!1;var f=e.x,b=e.y,a=e.j,g=e.ze,d=e.Ae,e=e.Be,i=g*g+d*d+e*e,k=f*g+b*d+a*e,l=k*k-i*(f*f+b*b+a*a-this.Ol*this.Ol);if(!(l<=0))i=(0-k-Math.sqrt(l))/i,f+=g*i,b+=d*i,a+=e*i,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=!0,c.x=f*d,c.y=b*d,c.z=a*d,a=new Q(0,0,0),a.xc(c.x,c.y,c.z),c.lng=a.J[0],c.lat=a.J[1],c.elv=a.J[2]};
s.xg=function(a,b){var c={hasvalue:!1,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new Q(a,b,0);f.$(e);f.n(a,b,-1);f.$(d);var g,i,f=d[0];g=d[1];i=d[2];var k=e[0]-d[0],l=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+l*l+d*d);k/=e;l/=e;d/=e;for(var e=[],m=0;m<this.O.length;m++){var p=this.O[m].v.ha,o=this.O[m].v.Ca;this.O[m].v.Yi.fh(f,g,i,k,l,d,p[0],p[1],p[2],o[0],o[1],o[2])&&e.push(this.O[m])}p=1.0E20;for(m=0;m<e.length;m++)if((o=e[m].v.Xe(f,g,i,k,l,d))&&o.R<p)c.hasvalue=!0,c.lod=e[m].v.Fb,p=o.R;if(c.hasvalue)c.x=
f+p*k,c.y=g+p*l,c.z=i+p*d,f=new Q(0,0,0),f.xc(c.x,c.y,c.z),c.lng=f.J[0],c.lat=f.J[1],c.elevation=f.J[2];return c};
function Eg(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].f.length>c)c=b[d].f.length;for(d=0;d<b.length;d++)for(b[d].Oc=b[d].f;b[d].Oc.length<c;)b[d].Oc+="0";b.sort(function(a,b){return parseInt(a.Oc,2)-parseInt(b.Oc,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.lg[0],a.lg[1],a.lg[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].v.A[f]==0;)c.push(b[d].B[0]+b[d].v.A[f-2]),c.push(b[d].B[1]+b[d].v.A[f-1]),c.push(b[d].B[2]+b[d].v.A[f]),c.push(a.lg[0]),c.push(a.lg[1]),c.push(a.lg[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.kg.o();a.kg=new M(a.c);a.kg.Mb({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},j,j);a.kg.pa()}
function Fg(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].f.length>c)c=b[d].f.length;for(d=0;d<b.length;d++){b[d].Oc=b[d].f;b[d].Oc=b[d].Oc.replace(/2/g,"0");for(b[d].Oc=b[d].Oc.replace(/3/g,"1");b[d].Oc.length<c;)b[d].Oc+="0"}b.sort(function(a,b){return parseInt(b.Oc,2)-parseInt(a.Oc,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.rg[0],a.rg[1],a.rg[2],1],e=[],d=0;d<b.length;d++){var f=b[d].v.A.length;for(f-=1;b[d].v.A[f]==0;)c.push(b[d].B[0]+b[d].v.A[f-4]),c.push(b[d].B[1]+b[d].v.A[f-
3]),c.push(b[d].B[2]+b[d].v.A[f-2]),c.push(a.rg[0]),c.push(a.rg[1]),c.push(a.rg[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.qg.o();a.qg=new M(a.c);a.qg.Mb({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},j,j);a.qg.pa()}
s.Xg=function(){if(!this.Lh)return NaN;var a=[],b=this.Lh.a,c=new K;if(this.Db.length==0)return c=new Q,c.xc(b[0],b[1],b[2]),c.J[2];c.n(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.O.length;d++){var e=this.O[d].v.ha,f=this.O[d].v.Ca;this.O[d].v.Yi.fh(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.O[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].v.Xe(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&g.R<e)f=!0,e=g.R}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*
pc,e<0&&(b=-b),this.Fn=b;return this.Fn};s.Qi=ca("Pl");var ug=0,vg=1;function Gg(a){this.c=a;this.xa=[]}
Gg.prototype.Wa=function(){for(var a=0;a<this.xa.length;a++){var b=new L;b.W(this.c.Gb);b.a[12]+=this.xa[a].B[0];b.a[13]+=this.xa[a].B[1];b.a[14]+=this.xa[a].B[2];this.c.ic();this.c.jc(b);var b=this.xa[a],c=this.xa[a],d=this.c.b;d.colorMask(!1,!1,!1,!1);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(!1);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].pa();d.stencilOp(d.KEEP,d.KEEP,
d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].pa();d.depthMask(!0);d.colorMask(!0,!0,!0,!0);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(!0);for(e=0;e<c.length;e++)c[e].pa();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].pa();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST);this.c.yc()}};
Gg.prototype.rm=function(a){this.xa.push(a);return this.xa.length-1};Gg.prototype.Pi=function(a){this.xa.splice(a,1)};function Hg(){this.name="ogGeometry";this.type=Pa;this.nb=[];this.Jg=[];this.ab=-1;this.P=!1;this.ed="";this.options=this.Ma=this.Bb=j;this.hf=-1;this.jo=this.Le=j}Hg.prototype=new E;s=Hg.prototype;
s.Pa=function(a){this.options=a;a.url&&Ig(this,a.url);a.jsonobject&&this.Mb(a.jsonobject);if(a.type=="EarthPolyline")this.jo=X(db,this,this.options),this.ab=Jg(this).rd(this.jo.af);else if(a.type=="solidcube"){w(a.srs)||(a.srs="EPSG:4326");w(a.position)||(a.position=[0,0,0]);w(a.color)||(a.color=[1,1,1]);var b=this.parent.parent.c,c=j;if(b.d&&b.d.l)c=b.d.l.Yf;if(c){var b=new M(b),d=a.position,e=a.length,f=a.color;if(a.srs=="EPSG:4326")Wc(b,[0,0,0],[e,e,e],f),b.oh(d[0],d[1],d[2],0,0,0),this.ab=c.rd([[b]]);
else if(a.srs=="cartesian")Wc(b,d,[e,e,e],f),this.ab=c.rd([[b]])}}else if(a.type=="solidgeosphere"){w(a.color)||(a.color=[1,1,1]);w(a.subdivisions)||(a.subdivisions=1);b=this.parent.parent.c;c=j;if(b.d&&b.d.l)c=b.d.l.Yf;if(c)b=new M(b),Yc(b,a.color,a.subdivisions),this.ab=c.rd([[b]])}};s.jb=function(){Jg(this).Mi(this.ab);if(this.Le!=j)F(this.Le);else{for(var a=0;a<this.nb.length;a++)F(this.nb[a]);this.N=j}};function Jg(a){var b=j,a=a.parent.parent.c;if(a.d&&a.d.l)b=a.d.l.Yf;return b}
s.We=function(a,b,c,d,e,f){for(var g=0;g<this.nb.length;g++)this.nb[g].We(a,b,c,d,e,f)};s.rh=function(a,b,c,d){for(var e=0;e<this.nb.length;e++)this.nb[e].rh(a,b,c,d)};s.Nb=function(a,b,c){for(var d=0;d<this.nb.length;d++)this.nb[d].Nb(a,b,c)};s.Df=function(a,b,c){for(var d=0;d<this.nb.length;d++)this.nb[d].Df(a,b,c)};s.qa=function(){if(this.Le!=j)this.Le.qa();else for(var a=0;a<this.nb.length;a++)this.nb[a].qa()};s.ra=function(){if(this.Le!=j)this.Le.ra();else for(var a=0;a<this.nb.length;a++)this.nb[a].ra()};
s.Cf=function(a,b,c,d){if(this.Le==j)for(var e=0;e<this.nb.length;e++)this.nb[e].Cf(a,b,c,d)};s.Gk=function(){this.Q.readyState==4&&(this.Q.status==404?this.Ma&&this.Ma(this.id):this.Mb(Hc(this.Q.responseText)))};
s.Mb=function(a){if(a.Type=="pointcloud")this.options=a,this.Le=X(cb,this,this.options),a=Jg(this),this.ab=a.rd(this.Le.Jd);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(Qa,this,this.options);this.nb.push(c);this.Jg.push(c.Od)}this.Bb&&this.Bb(this.id);a=Jg(this);this.ab=a.rd(this.Jg)}};function Ig(a,b){b==j?alert("invalid json-url"):(a.ed=b,a.Q=new window.XMLHttpRequest,a.Q.open("GET",a.ed,!0),a.Q.onreadystatechange=function(){a.Gk()},a.Q.send())};function Kg(a){this.c=a;this.N=[];this.bf=new bf;this.Vr=1E5*H*1E5*H}
Kg.prototype.Wa=function(a,b){this.bf.Ui(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.N.length;f++)if(this.N[f]instanceof bd){var g=this.N[f];g.P||g.pa()}else if(this.N[f]instanceof Lg)g=this.N[f],g.P||g.pa();else for(var g=this.N[f],i=0;i<g.length;i++)for(var k=g[i],l=0;l<k.length;l++){var m=k[l];if(!m.P){var p=m.ha[0]-c,o=m.ha[1]-d,r=m.ha[2]-e,p=p*p+o*o+r*r,o=m.So*m.So;this.bf.Ti(m.ha[0],m.ha[1],m.ha[2],m.Ca[0],m.Ca[1],m.Ca[2])&&!(p>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),m.pa(),this.c.b.disable(this.c.b.BLEND))}}};Kg.prototype.rd=function(a){this.N.push(a);return this.N.length-1};Kg.prototype.Mi=function(a){this.N.splice(a,1)};
Kg.prototype.Af=function(a,b){for(var c=this.c.vf(a,b,this.c.ua,!0),d=1E4,e=j,f=0;f<this.N.length;f++)for(var g=this.N[f],i=0;i<g.length;i++)for(var k=g[i],l=0;l<k.length;l++){var m=k[l];if(!m.P){m.Ym(c.x,c.y,c.j,c.ze,c.Ae,c.Be);var p=m.Xe(c.x,c.y,c.j,c.ze,c.Ae,c.Be);if(p&&p.R<d)d=p.R,e=m}}if(e)return e.xq;return-1};function Mg(a){this.oa=j;this.Pb=new K;this.$l=this.Rk=this.Kh=this.Yf=this.ki=j;this.aj=a.rendertotexture;this.Nd=this.mb=this.m=j;this.Wl=!1;this.Vl=Ng;this.elevation=0;this.nn=!1;this.df=j;this.rj=this.Zj=this.Or=0;if(a.type=="custom")this.nn=!0;this.ud=n();this.vd=function(){if(this.Wl){if(this.mb==j)this.mb=new O(this.c,!0,this.Zj,this.rj,!0);if(this.Nd==j)this.Nd=new O(this.c,!0,this.Zj,this.rj,!0);if(this.Vl==Og){var a=new L;a.W(this.c.M);var c=2.4E-5,d=new K(0,-c,0),c=new K(0,c,0),d=this.c.M.Ha(d),
c=this.c.M.Ha(c);this.c.M.zg(d.a[0],d.a[1],d.a[2]);Pg(this.c);this.Bh(this.Nd,2);this.c.M.zg(c.a[0],c.a[1],c.a[2]);Pg(this.c);this.Bh(this.mb,1)}else if(this.Vl==Ng){a=new L;a.W(this.c.M);c=3.0E-6;d=new K(0,-c,0);c=new K(0,c,0);d=this.c.M.Ha(d);c=this.c.M.Ha(c);this.c.M.zg(d.a[0],d.a[1],d.a[2]);Pg(this.c);this.Bh(this.Nd,3);this.c.M.W(a);this.c.M.zg(c.a[0],c.a[1],c.a[2]);Pg(this.c);this.Bh(this.mb,4);if(this.mb.Fa!==j)this.mb.Fa.hn.Qd([0,0.7,0.3,0,0,0,0,0,0,0,0,0,0,0,0,1]),this.mb.Fa.jn.Qd([0,0,0,
0,0,1,0,0,0,0,1,0,0,0,0,1]),this.mb.Fa.tn=1/this.mb.width,this.mb.Fa.un=1/this.mb.height,this.mb.Fa.mode="pt_stereo";this.mb.U(0,0,0,0,1,1,!0,!0,1,j,this.Nd);this.c.M.W(a);Pg(this.c)}}else this.Bh(this.m,0)};this.Bh=function(a,c){if(this.aj){this.c.Bf.push(a);a.vh();var d=this.c.b;d.clearColor(0,0,0,0);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT|d.STENCIL_BUFFER_BIT);d.enable(d.DEPTH_TEST);d.disable(d.CULL_FACE)}if(this.oa){if(this.df)d=this.c,d.b.disable(d.b.DEPTH_TEST),this.df.pa(),d=this.c,d.b.enable(d.b.DEPTH_TEST);
this.oa.Wa(this.Pb,this.c.ua)}this.$l.Wa(this.Pb,this.c.ua);this.ki.Wa(this.Pb,this.c.ua);this.Yf.Wa(this.Pb,this.c.ua);this.Kh.Wa(this.Pb,this.c.ua);this.Rk.Wa(this.Pb,this.c.ua);if(this.aj)if(Ze(this.c),c==0)a.U(0,0,0,0,1,1,!0,!0,1),a.Fa.mode="pt";else if(c==1)a.U(0,0,0,0,1,0.5,!0,!0,1),a.Fa.mode="pt";else if(c==2)a.U(0,this.c.height/2,0,0,1,0.5,!0,!0,1),a.Fa.mode="pt"};this.wd=function(a){var c=a.wf();this.Pb.n(c.x,c.y,c.j);this.elevation=a.Wd.elevation};this.Re=function(){if(!this.nn)this.df=
new M(this.c),this.aj?Yc(this.df,[1,0,1,0],3):Yc(this.df,[0,0,0,1],2),this.oa=new Bg(this.c);this.$l=new Gg(this.c);this.ki=new af(this.c);this.Yf=new Kg(this.c);this.Kh=new cf(this.c);this.Rk=new $e(this.c)};this.Qe=function(){if(this.m)this.m.o(),this.m=j;if(this.Nd)this.Nd.o(),this.Nd=j;if(this.mb)this.mb.o(),this.mb=j;if(this.df)this.df.o(),this.df=j;if(this.oa)this.oa.o(),this.oa=j};this.jk=function(a,c){this.Zj=a;this.rj=c;if(this.Wl)this.mb==j?this.mb=new O(this.c,!0,a,c,!0):$c(this.mb,a,c,
!0),this.Nd==j?this.Nd=new O(this.c,!0,a,c,!0):$c(this.Nd,a,c,!0);if(this.aj)this.m==j?this.m=new O(this.c,!0,a,c,!0):$c(this.m,a,c,!0)};this.zf=function(){S(this.cd)};this.Ue=n()}Mg.prototype=new De;var Ng=0,Og=1;function Qg(a){Ld.call(this);this.eq=a;this.Hn=R(this.eq,nd?"DOMMouseScroll":"mousewheel",this)}Ca(Qg,Fe);var Rg="mousewheel";
Qg.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Ce;if(a.type=="mousewheel"){c=1;if(md||od&&(rd||Ad("532.0")))c=40;d=od&&hd&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;w(a.wheelDeltaX)?(b=od&&hd&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=od&&hd&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),w(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.Ln=="number"&&(b=Math.min(Math.max(b,-this.Ln),this.Ln));typeof this.Mn==
"number"&&(c=Math.min(Math.max(c,-this.Mn),this.Mn));b=new Sg(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Rh()}};Qg.prototype.Vd=function(){Qg.sg.Vd.call(this);S(this.Hn);delete this.Hn};function Sg(a,b,c,d){b&&this.Xd(b,h);this.type=Rg;this.detail=a;this.zr=c;this.Vf=d}Ca(Sg,Qd);function Tg(){this.bl=this.dg=0;this.M=new L;this.$c=new K;this.$c.n(1,0,0);this.C=0;this.H=-0.03;this.Qa=0;this.s=7.616;this.p=45.9088;this.i=17E3;this.Cc=this.Bc=this.Mk=this.re=this.se=0;this.Bp=!1;this.Lk=this.Nk=0;this.Gf=this.Ik=this.zd=this.Ah=this.zh=this.kb=1;this.Pk=this.Qk=this.Xa=this.Ya=0;this.Fk=!1;this.vp=0.0010;this.Ep=-0.4;this.Ub=!1;this.la=this.ka=this.Hk=0;this.yh=!1;this.Ec=new K;this.Of=this.Nf=0;this.pe=this.Ob=!1;this.q=Array(3);this.ac=new Q(0,0,0);this.Mc=new L;this.Ie=new L;
this.Hd=new L;this.Zb=new L;this.M=new L;this.Hb=new L;this.He=new L;this.Zb.tf();this.Oa=100;this.wa=j;this.Fd=this.Ed=this.Jc=this.Ic=this.Hc=this.Dd=this.cd=0;this.gh=ca("pe");this.ud=function(){this.c.sh(this.M)};this.vd=n();this.wd=function(a){a.hd=0;this.ac.n(this.s,this.p,this.i);this.ac.$(this.q);this.$c.n(this.q[0],this.q[1],this.q[2]);this.Ie.xd(this.q[0],this.q[1],this.q[2]);this.Hd.ge(this.s,this.p);this.Mc.Yg(this.C,this.H,this.Qa);this.Hb.ba(this.Ie,this.Hd);this.He.ba(this.Hb,this.Mc);
this.Hb.ba(this.He,this.Zb);this.M.xf(this.Hb);a.gj=this.C;a.Ia(this.q[0],this.q[1],this.q[2]);Dc(a,this.s,this.p,this.i);if(this.wa)this.wa.oc=this.s,this.wa.nc=this.p,this.wa.lc=this.i,this.wa.pitch=this.H*57.29577951308232,this.wa.eb=this.C*57.29577951308232,this.wa.sc=this.Qa*57.29577951308232};this.Re=n();this.Qe=n();this.zf=function(){S(this.cd);S(this.Dd);S(this.Hc);S(this.Ic);S(this.Jc);S(this.Ed);S(this.Fd)};this.Ue=function(a){this.cd=R(window,Hd,this.Se,!1,this);this.Dd=R(window,Id,this.Te,
!1,this);this.Hc=R(a,Dd,this.he,!1,this);this.Jc=R(a,Ed,this.je,!1,this);this.Ic=R(a,Gd,this.ie,!1,this);a=new Qg(a);this.Fd=R(a,Rg,this.yf,!1,this)};this.yf=function(a){a.Vf>0?this.Xa>0?this.Ya=this.Xa=0:this.Ya+=0.05:this.Ya>0?this.Xa=this.Ya=0:this.Xa+=0.05};this.Se=function(a){if(a.keyCode==81)this.Cc=this.kb*this.Gf;else if(a.keyCode==65)this.Cc=-this.kb*this.Gf;else if(a.keyCode==83)this.Bc=0.5*this.zd;else if(a.keyCode==88)this.Bc=-0.5*this.zd;this.dg=a.keyCode};this.Te=function(a){if(a.keyCode==
81)this.Cc=0;else if(a.keyCode==65)this.Cc=0;else if(a.keyCode==83)this.Bc=0;else if(a.keyCode==88)this.Bc=0;this.dg=0};this.he=function(a){if(Vd(a,Rd))this.Hf=0,this.Ec.n(0,0,0),this.Nf=a.offsetX,this.Of=a.offsetY,this.yh=this.Ob=!0;this.ka=a.offsetX;this.la=a.offsetY;if(Vd(a,Sd))return!1};this.je=function(a){if(Vd(a,Rd))this.Ob=this.yh=!1;this.ka=a.offsetX;this.la=a.offsetY;this.se=this.re=this.Hf=0;if(Vd(a,Sd))return!1};this.ie=function(a){this.ka=a.offsetX;this.la=a.offsetY;if(this.Ob){var b=
(this.Nf-a.offsetX)/this.c.width,c=(this.Of-a.offsetY)/this.c.height;b*=b;c*=c;this.Hf=Math.sqrt(b+c);this.Ec.n(a.offsetX-this.Nf,this.c.height-1-a.offsetY-(this.c.height-1-this.Of),0);this.Ec.Wc();var a=this.Ec.a[0],d=this.Ec.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.re=this.kb*this.zh*c*f;this.se=this.Ah*b*e}};this.Ve=function(a){var b=this.Bc*a/500,c=this.se*a/500,d=this.Cc*a,e=0,e=0,f=this.i/5E5*(this.i/5E5);f>10?f=10:f<0.0010&&(f=0.0010);var g=f*this.re*a/250;if(this.Ya>0){var i=
0.5*this.zd*a/1E3;this.H+=i;this.Ya-=i;if(this.Ya<0)this.H+=this.Ya,this.Ya=0;this.Ub=!0}if(this.Xa>0){i=0.5*this.zd*a/1E3;this.H-=i;this.Xa-=i;if(this.Xa<0)this.H-=this.Xa,this.Xa=0;this.Ub=!0}if(b)this.H+=b,this.Ub=!0;if(c){this.C+=c;this.C>2*Math.PI&&(this.C-=2*Math.PI);if(this.C<0)this.C=2*Math.PI-this.C;this.Ub=!0}if(this.Ub&&(e=this.c.Xg(),isNaN(e)))e=this.Oa;if(d&&(a=1E3*d*f,this.i+=a,e+=a,this.i>7E6))this.i=7E6;if(g){a=this.p*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.C;b=this.s*
0.017453292519943295;d=mc/Math.sqrt(1-nc*d*d);f=mc/(d/(1+oc*f*f))*g*Math.cos(c);i=mc/d*g*Math.sin(c)/Math.cos(a);g=mc/d*g*Math.sin(c)*Math.tan(a)+c;this.s=57.29577951308232*(i+b);this.p=57.29577951308232*(f+a);for(this.C=g;this.s>180;)this.s-=360;for(;this.s<-180;)this.s+=360;for(;this.p>90;)this.p=180-this.p;for(;this.p<-90;)this.p=-180-this.p;this.Ub=!0}e<this.Oa&&this.Ub&&(this.i+=this.Oa-e);if(this.wa)this.wa.oc=this.s,this.wa.nc=this.p,this.wa.lc=this.i,this.wa.pitch=this.H*57.29577951308232,
this.wa.eb=this.C*57.29577951308232,this.wa.sc=this.Qa*57.29577951308232}}Tg.prototype=new De;s=Tg.prototype;s.Ia=function(a,b,c){this.s=a;this.p=b;this.i=c};s.wf=function(){return{longitude:this.s,latitude:this.p,elevation:this.i}};s.Nb=function(a,b,c){this.C=a;this.H=b;this.Qa=c};s.qh=n();s.eh=function(){return{eb:this.C,pitch:this.H,sc:this.Qa}};function Ug(){this.bl=this.dg=0;this.M=new L;this.pe=this.zb=!1;this.$c=new K;this.$c.n(1,0,0);this.C=0;this.H=-1.5707963267948966;this.Qa=0;this.s=7.77442050946391;this.p=47.472720418012834;this.i=75E5;this.Ab=Vg;this.Jf=this.If=this.r=0;this.Cp=!0;this.Lk=this.Nk=this.Cc=this.Bc=this.Mk=this.re=this.se=this.Kf=this.Lf=0;this.Gf=this.Ik=this.zd=this.Ah=this.zh=this.kb=1;this.Pk=this.Qk=this.Xa=this.Ya=0;this.Fk=!1;this.Hk=0;this.Kp=new L;this.Kk=this.Jk=this.la=this.ka=0;this.Ec=new K;this.Ff=this.Rd=
this.Ob=!1;this.Ip=this.Jp=this.Hf=0;this.q=Array(3);this.ac=new Q(0,0,0);this.Mc=new L;this.Ie=new L;this.Hd=new L;this.Zb=new L;this.M=new L;this.Hb=new L;this.He=new L;this.Zb.tf();this.qe=!1;this.Gh=this.Fh=this.Eh=0;this.Dh=1;this.kc=!1;this.yp=this.zp=this.Ap=0;this.ta={};this.sa={};this.Ef=new L;this.wh=new L;this.oe=new L;this.Lp=new L;this.Mp=new L;this.Oa=50;this.Je=1E7;this.Ga=xc;this.Aa=0;this.Cd=!1;this.gb=[0,0];this.Cb=0;this.te=this.Za=!1;this.Fd=this.Ed=this.Jc=this.Ic=this.Hc=this.Dd=
this.cd=this.Sp=0;this.gh=function(a){if(!a)this.zb=!1;this.pe=a};this.ud=function(){this.c.sh(this.M)};this.vd=n();this.wd=function(a){pc==1?(this.Sb=1,this.Qb=1E4):(this.Sb=1.0E-5,this.Qb=10);this.Ga=a.Ga;this.Aa=a.Aa;a.Cd=this.Cd;a.gb[0]=this.gb[0];a.gb[1]=this.gb[1];a.hd=1;this.zb=this.pe?!0:a.El!=0?!0:!1;if(this.Ab==Wg&&!this.zb&&!this.c.ya.mc){if(this.Rd)this.Rd=!1,this.Tk(this.ka,this.la);if(this.Ob&&this.Ff)this.Ff=!1,this.Sk(this.ka,this.la)}this.ac.n(this.s,this.p,this.i);this.ac.$(this.q);
this.$c.n(this.q[0],this.q[1],this.q[2]);this.Ie.xd(this.q[0],this.q[1],this.q[2]);this.Hd.ge(this.s,this.p);this.qe?(this.Mc.wg(this.Eh,this.Fh,this.Gh,this.Dh),this.Zb.gk()):this.Mc.Yg(this.C,this.H,this.Qa);this.Hb.ba(this.Hd,this.Mc);this.M.ba(this.Hb,this.Zb);this.M.Ye();this.Yl=new K(this.q[0],this.q[1],this.q[2]);var b=this.M.Ha(this.Yl);this.M.a[12]=-b.a[0];this.M.a[13]=-b.a[1];this.M.a[14]=-b.a[2];a.gj=this.C;a.Ia(this.q[0],this.q[1],this.q[2]);Dc(a,this.s,this.p,this.i)};this.Re=n();this.Qe=
n();this.zf=function(){S(this.cd);S(this.Dd);S(this.Hc);S(this.Ic);S(this.Jc);S(this.Ed);S(this.Fd)};this.Ue=function(a){this.cd=R(window,Hd,this.Se,!1,this);this.Dd=R(window,Id,this.Te,!1,this);this.Hc=R(a,Dd,this.he,!1,this);this.Ic=R(a,Gd,this.ie,!1,this);this.Jc=R(a,Ed,this.je,!1,this);this.Ar=R(a,Fd,this.pp,!1,this);this.Ed=R(a,Cd,this.ih,!1,this);a=new Qg(a);this.Fd=R(a,Rg,this.yf,!1,this)};this.Zc=function(){var a=Vg;(this.r&Xg)==Yg&&((this.r&Zg)==0?a=Wg:(this.r&Zg)==$g?a=ah:(this.r&Zg)==bh&&
(a=ch));(this.r&Xg)==dh&&(a=ch);if(a!=this.Ab){if(this.Ab==ch)this.C=this.Lf+45*Math.PI*this.kb*(this.ka-this.If)/(180*this.c.height),this.H=this.Kf+45*Math.PI*this.kb*(this.Jf-this.la)/(180*this.c.height);this.Ab=a;if(this.Ab==ch)this.If=this.ka,this.Jf=this.la,this.Lf=this.C,this.Kf=this.H}if(this.Ab==ch)this.C=this.Lf+45*Math.PI*this.kb*(this.ka-this.If)/(180*this.c.height),this.H=this.Kf+45*Math.PI*this.kb*(this.Jf-this.la)/(180*this.c.height)};this.yf=function(a){if(this.zb||this.c.ya.mc)this.Cb=
0;else{if(this.Ab==Vg)if((this.r&Zg)==0){var b={},c,d;this.Cb>0?(c=this.gb[0],d=this.gb[1]):(c=this.ka,d=this.la);this.c.ke(c,d,b);if(b.hit){this.gb=[c,d];this.Cb=500;this.ac.n(this.s,this.p,this.i);this.ac.$(this.q);c=this.q[0]-b.x;d=this.q[1]-b.y;b=this.q[2]-b.z;a.Vf>0?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new Q(0,0,0);e.xc(this.q[0]+c,this.q[1]+d,this.q[2]+b);this.s=e.J[0];this.p=e.J[1];if(this.te){if(e.J[2]>this.i)this.i=e.J[2]}else this.i=e.J[2];this.Za=!0;if(this.i<this.Oa)this.i=
this.Oa,this.Za=!0;else if(this.i>this.Je)this.i=this.Je,this.Za=!0}}else(this.r&Zg)==$g&&(this.H+=5*a.Vf*Math.PI*this.kb/180);return this.ca(a)}};this.Se=function(a){if(!this.zb&&!this.c.ya.mc){if(a.keyCode==66)this.qe=!1;if(a.keyCode==16)return this.r|=$g,this.ca(a);else if(a.keyCode==17)return this.r|=bh,this.ca(a);else if(a.keyCode==37||a.keyCode==65)return this.r|=eh,this.ca(a);else if(a.keyCode==38||a.keyCode==87)return this.r|=fh,this.ca(a);else if(a.keyCode==39||a.keyCode==68)return this.r|=
gh,this.ca(a);else if(a.keyCode==40||a.keyCode==83)return this.r|=hh,this.ca(a);this.Zc();return!0}};this.Te=function(a){if(a.keyCode==16)return this.r&=~$g,this.ca(a);else if(a.keyCode==17)return this.r&=~bh,this.ca(a);else if(a.keyCode==37||a.keyCode==65)return this.r&=~eh,this.ca(a);else if(a.keyCode==38||a.keyCode==87)return this.r&=~fh,this.ca(a);else if(a.keyCode==39||a.keyCode==68)return this.r&=~gh,this.ca(a);else if(a.keyCode==40||a.keyCode==83)return this.r&=~hh,this.ca(a);this.Zc();return!0};
this.ih=function(a){if(!this.zb&&!this.c.ya.mc){var b={};this.c.ke(this.ka,this.la,b);if(b.hit){this.c.ph(2E3);var c=this.i;c>1E6?Ue(this.c.ya,b.lng,b.lat,1E6,h,h,h):c>25E4?Ue(this.c.ya,b.lng,b.lat,25E4,h,h,h):c>5E4?Ue(this.c.ya,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,Ue(this.c.ya,b.lng,b.lat,c,0,-90,0));this.gb=[this.ka,this.la];this.Cb=2500}return this.ca(a)}};this.he=function(a){if(this.c&&this.c.K&&!this.zb&&!this.c.ya.mc){this.ka=a.offsetX-this.c.K.offsetLeft;this.la=a.offsetY-this.c.K.offsetTop;
if(Vd(a,Rd))this.r|=Yg,document.body.style.cursor="move",this.Rd=!0;else if(Vd(a,Sd))return!1;else Vd(a,Td)&&(this.r|=dh);this.Zc();return this.ca(a)}};this.je=function(a){if(this.c&&this.c.K){this.Ob=!0;this.ka=a.offsetX-this.c.K.offsetLeft;this.la=a.offsetY-this.c.K.offsetTop;if(Vd(a,Rd))this.r&=~Yg,this.kc=!1,document.body.style.cursor="default",this.Rd=!1;else if(Vd(a,Sd))return!1;else Vd(a,Td)&&(this.r&=~dh);this.Zc();return this.ca(a)}};this.ie=function(a){if(this.c&&this.c.K&&!this.zb&&!this.c.ya.mc)return this.Ob=
this.Ab==Wg,this.Ff=!0,this.Jk=a.offsetX-this.c.K.offsetLeft-this.ka,this.Kk=a.offsetY-this.c.K.offsetTop-this.la,this.ka=a.offsetX-this.c.K.offsetLeft,this.la=a.offsetY-this.c.K.offsetTop,this.Zc(),this.ca(a)};this.pp=function(a){this.Ob=!1;this.r&=~Yg;this.r&=~dh;this.kc=!1;document.body.style.cursor="default";this.Rd=!1;this.Zc();return this.ca(a)};this.Ve=function(a){if(this.Ga==yc){var b=this.Aa*this.i/5E3;this.te||(this.i-=a*b);if(this.i<this.Oa)this.i=this.Oa;this.Za=!0}else if(this.Ga==zc){b=
this.Aa*this.i/5E3;this.i+=a*b;if(this.i>this.Je)this.i=this.Je;this.Za=!0}else if(this.Ga==Bc)this.C=this.Aa;else if(this.Ga==Cc)if(b=Math.sin(this.Aa),this.H+=a/5E3*-Math.cos(this.Aa),this.C+=a/5E3*b,this.H<-Math.PI/2)this.H=-Math.PI/2;else if(this.H>0)this.H=0;if(this.Cb>0&&(this.Cd=!0,this.Cb-=a,this.Cb<=0))this.Cb=0,this.Cd=!1;if((this.r&ih||this.Ga==Ac)&&(this.r&Zg)==0){b=0;this.r&fh&&(b+=1);this.r&hh&&(b-=1);var c=0;this.r&eh&&(c-=1);this.r&gh&&(c+=1);var d;d=this.Ga==Ac?Math.PI*this.Aa/180:
Math.atan2(c,b);b=this.i/5E5;b>10?b=10:b<0.0010&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.p/180,e=Math.sin(b),c=Math.cos(b),f=this.C+d;d=Math.PI*this.s/180;var g=mc/Math.sqrt(1-nc*e*e),e=mc/g*a*Math.sin(f)/Math.cos(b),a=mc/(g/(1+oc*c*c))*a*Math.cos(f)+b;this.s=180*(e+d)/Math.PI;this.p=180*a/Math.PI}for(;this.s>180;)this.s-=180;for(;this.s<-180;)this.s+=180;for(;this.p>90;)this.p-=180;for(;this.p<-90;)this.p+=180;if(this.Za)if(this.Za=!1,a=this.c.xg(this.s,this.p),a.hasvalue){if(this.i-this.Oa<a.elevation)this.i=
a.elevation+this.Oa,this.Za=!0;this.te=!1}else if(this.i<5E3)this.Za=this.te=!0};this.Nb=function(a,b,c){this.qe=!1;this.Zb.tf();this.C=a;this.H=b;this.Qa=c};this.qh=function(a,b,c,d){this.qe=!0;this.Eh=a;this.Fh=b;this.Gh=c;this.Dh=d;var e=a,a=b,b=e,e=a*b+c*d;if(e>0.499)this.C=2*Math.atan2(a,d),this.H=Math.PI/2,this.Qa=0;else if(e<-0.499)this.C=-2*Math.atan2(a,d),this.H=-Math.PI/2,this.Qa=0;else{var f=c*c;this.C=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.H=Math.asin(2*e);this.Qa=Math.atan2(2*a*d-2*
b*c,1-2*a*a-2*f)}};this.Np=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.Tk=function(a,
b){this.Ef.W(this.oe);var c={};this.c.Ag(a,b,c,!0);c.hit?(this.ta.x=c.x,this.ta.y=c.y,this.ta.j=c.z,this.kc=!0):this.kc=!1};this.Sk=function(a,b){if(this.kc){var c={};this.c.Ag(a,b,c,!1);if(c.hit)if(this.sa.x=c.x,this.sa.y=c.y,this.sa.j=c.z,this.kc=!0,this.sa.x==this.ta.x&&this.sa.y==this.ta.y&&this.sa.j==this.ta.j)this.oe.W(this.Ef);else{var d=this.ta.x*this.sa.x+this.ta.y*this.sa.y+this.ta.j*this.sa.j,c=Math.sqrt((1-d)*0.5),d=Math.sqrt((1+d)*0.5),e={};e.x=this.ta.y*this.sa.j-this.ta.j*this.sa.y;
e.y=this.sa.x*this.ta.j-this.ta.x*this.sa.j;e.j=this.ta.x*this.sa.y-this.ta.y*this.sa.x;c/=Math.sqrt(e.x*e.x+e.y*e.y+e.j*e.j);e.x*=c;e.y*=c;e.j*=c;this.wh.wg(e.x,e.y,e.j,d);this.oe.ba(this.Ef,this.wh);c=[];(new Q(this.s,this.p,this.i)).$(c);c=this.oe.Ha(new K(c[0],c[1],c[2]));d=new Q(0,0,0);d.xc(c.a[0],c.a[1],c.a[2]);this.s=d.J[0];this.p=d.J[1];this.Za=!0}else this.kc=!1}};this.ca=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=
!0;a.cancel=!0;return a.returnValue=!1};this.Pm=ca("Oa")}Ca(Ug,Tg);var Yg=1,dh=4,Xg=7,eh=16,fh=32,gh=64,hh=128,ih=240,$g=256,bh=512,Zg=768,Vg=0,Wg=1,ch=2,ah=3;function jh(){this.gd=new L;this.Sb=1.0E-5;this.Qb=10;this.De=45;this.br=da("De");this.ud=function(){this.c.Um(this.gd)};this.vd=n();this.wd=function(a){this.gd.Hm(this.De,this.c.width/this.c.height,this.Sb,this.Qb);a.yg[a.yg.length-1].W(this.gd)};this.Re=n();this.Qe=n();this.Ue=n()}jh.prototype=new De;function kh(a){this.bl=this.dg=0;this.M=new L;this.pe=this.zb=!1;this.$c=new K;this.$c.n(1,0,0);this.C=0;this.H=-1.5707963267948966;this.Qa=0;this.s=7.77442050946391;this.p=47.472720418012834;this.i=75E5;this.Ab=lh;this.Jf=this.If=this.r=0;this.Cp=!0;this.Lk=this.Nk=this.Cc=this.Bc=this.Mk=this.re=this.se=this.Kf=this.Lf=0;this.Gf=this.Ik=this.zd=this.Ah=this.zh=this.kb=1;this.Pk=this.Qk=this.Xa=this.Ya=0;this.Fk=!1;this.Hk=0;this.Kp=new L;this.Kk=this.Jk=this.la=this.ka=0;this.Ec=new K;this.Ff=this.Rd=
this.Ob=!1;this.Ip=this.Jp=this.Hf=0;this.q=Array(3);this.ac=new Q(0,0,0);this.Mc=new L;this.Ie=new L;this.Hd=new L;this.Zb=new L;this.M=new L;this.Hb=new L;this.He=new L;this.Zb.tf();this.qe=!1;this.Gh=this.Fh=this.Eh=0;this.Dh=1;this.kc=!1;this.yp=this.zp=this.Ap=0;this.ta={};this.sa={};this.Ef=new L;this.wh=new L;this.oe=new L;this.Lp=new L;this.Mp=new L;this.Oa=50;this.Je=1E7;this.Ga=xc;this.Aa=0;this.Cd=!1;this.gb=[0,0];this.Cb=0;this.te=this.Za=!1;this.Sp=0;this.De=this.Qb=this.Sb=-1;if(w(a)){if(w(a.Near))this.Sb=
a.Near;if(w(a.Far))this.Qb=a.Far;if(w(a.Fov))this.De=a.Fov}this.Fd=this.Ed=this.Jc=this.Ic=this.Hc=this.Dd=this.cd=0;this.Sb=1.0E-7;this.Qb=1.2;this.gh=function(a){if(!a)this.zb=!1;this.pe=a};this.ud=function(){this.c.sh(this.M)};this.vd=n();this.wd=function(a){pc==1?(this.Sb=1,this.Qb=1E4):this.i<3E3?(this.Sb=1.0E-7,this.Qb=1):(this.Sb=1.0E-5,this.Qb=10);if(this.De>=0)this.c.d.pc.De=this.De;if(this.Sb>=0)this.c.d.pc.Sb=this.Sb;if(this.Qb>=0)this.c.d.pc.Qb=this.Qb;this.Ga=a.Ga;this.Aa=a.Aa;a.Cd=this.Cd;
a.gb[0]=this.gb[0];a.gb[1]=this.gb[1];a.hd=1;this.zb=this.pe?!0:a.El!=0?!0:!1;if(this.Ab==mh&&!this.zb&&!this.c.ya.mc){if(this.Rd)this.Rd=!1,this.Tk(this.ka,this.la);if(this.Ob&&this.Ff)this.Ff=!1,this.Sk(this.ka,this.la)}this.ac.n(this.s,this.p,this.i);this.ac.$(this.q);this.$c.n(this.q[0],this.q[1],this.q[2]);this.Ie.xd(this.q[0],this.q[1],this.q[2]);this.Hd.ge(this.s,this.p);this.qe?(this.Mc.wg(this.Eh,this.Fh,this.Gh,this.Dh),this.Zb.gk()):this.Mc.Yg(this.C,this.H,this.Qa);this.Hb.W(this.Hd);
this.He.ba(this.Hb,this.Mc);this.Hb.ba(this.He,this.Zb);this.M.W(this.Hb);this.M.Ye();this.Yl=new K(this.q[0],this.q[1],this.q[2]);var c=this.M.Ha(this.Yl);this.M.a[12]=-c.a[0];this.M.a[13]=-c.a[1];this.M.a[14]=-c.a[2];a.gj=this.C;a.Ia(this.q[0],this.q[1],this.q[2]);Dc(a,this.s,this.p,this.i)};this.Re=n();this.Qe=n();this.zf=function(){S(this.cd);S(this.Dd);S(this.Hc);S(this.Ic);S(this.Jc);S(this.Ed);S(this.Fd)};this.Ue=function(a){this.cd=R(window,Hd,this.Se,!1,this);this.Dd=R(window,Id,this.Te,
!1,this);this.Hc=R(a,Dd,this.he,!1,this);this.Ic=R(a,Gd,this.ie,!1,this);this.Jc=R(a,Ed,this.je,!1,this);this.Ed=R(a,Cd,this.ih,!1,this);a=new Qg(a);this.Fd=R(a,Rg,this.yf,!1,this)};this.Zc=function(){var a=lh;(this.r&nh)==oh&&((this.r&ph)==0?a=mh:(this.r&ph)==qh?a=rh:(this.r&ph)==sh&&(a=th));(this.r&nh)==uh&&(a=th);if(a!=this.Ab){if(this.Ab==th)this.C=this.Lf+45*Math.PI*this.kb*(this.ka-this.If)/(180*this.c.height),this.H=this.Kf+45*Math.PI*this.kb*(this.Jf-this.la)/(180*this.c.height);this.Ab=a;
if(this.Ab==th)this.If=this.ka,this.Jf=this.la,this.Lf=this.C,this.Kf=this.H}if(this.Ab==th)this.C=this.Lf+45*Math.PI*this.kb*(this.ka-this.If)/(180*this.c.height),this.H=this.Kf+45*Math.PI*this.kb*(this.Jf-this.la)/(180*this.c.height)};this.yf=function(a){if(this.zb||this.c.ya.mc)this.Cb=0;else{if(this.Ab==lh)if((this.r&ph)==0){var c={},d,e;this.Cb>0?(d=this.gb[0],e=this.gb[1]):(d=this.ka,e=this.la);this.c.ke(d,e,c);if(c.hit){this.gb=[d,e];this.Cb=500;this.ac.n(this.s,this.p,this.i);this.ac.$(this.q);
d=this.q[0]-c.x;e=this.q[1]-c.y;c=this.q[2]-c.z;a.Vf>0?(d*=0.2,e*=0.2,c*=0.2):(d*=-0.2,e*=-0.2,c*=-0.2);var f=new Q(0,0,0);f.xc(this.q[0]+d,this.q[1]+e,this.q[2]+c);this.s=f.J[0];this.p=f.J[1];if(this.te){if(f.J[2]>this.i)this.i=f.J[2]}else this.i=f.J[2];this.Za=!0;if(this.i<this.Oa)this.i=this.Oa,this.Za=!0;else if(this.i>this.Je)this.i=this.Je,this.Za=!0}}else(this.r&ph)==qh&&(this.H+=5*a.Vf*Math.PI*this.kb/180);return this.ca(a)}};this.Se=function(a){if(!this.zb&&!this.c.ya.mc){if(a.keyCode==66)this.qe=
!1;if(a.keyCode==16)return this.r|=qh,this.ca(a);else if(a.keyCode==17)return this.r|=sh,this.ca(a);else if(a.keyCode==37||a.keyCode==65)return this.r|=vh,this.ca(a);else if(a.keyCode==38||a.keyCode==87)return this.r|=wh,this.ca(a);else if(a.keyCode==39||a.keyCode==68)return this.r|=xh,this.ca(a);else if(a.keyCode==40||a.keyCode==83)return this.r|=yh,this.ca(a);this.Zc();return!0}};this.Te=function(a){if(a.keyCode==16)return this.r&=~qh,this.ca(a);else if(a.keyCode==17)return this.r&=~sh,this.ca(a);
else if(a.keyCode==37||a.keyCode==65)return this.r&=~vh,this.ca(a);else if(a.keyCode==38||a.keyCode==87)return this.r&=~wh,this.ca(a);else if(a.keyCode==39||a.keyCode==68)return this.r&=~xh,this.ca(a);else if(a.keyCode==40||a.keyCode==83)return this.r&=~yh,this.ca(a);this.Zc();return!0};this.ih=function(a){if(!this.zb&&!this.c.ya.mc){var c={};this.c.ke(this.ka,this.la,c);if(c.hit){this.c.ph(2E3);var d=this.i;d>1E6?Ue(this.c.ya,c.lng,c.lat,1E6,h,h,h):d>25E4?Ue(this.c.ya,c.lng,c.lat,25E4,h,h,h):d>5E4?
Ue(this.c.ya,c.lng,c.lat,5E4,h,h,h):(d=c.elv+5E3,Ue(this.c.ya,c.lng,c.lat,d,0,-90,0));this.gb=[this.ka,this.la];this.Cb=2500}return this.ca(a)}};this.he=function(a){if(this.c&&this.c.K&&!this.zb&&!this.c.ya.mc){this.ka=a.offsetX-this.c.K.offsetLeft;this.la=a.offsetY-this.c.K.offsetTop;if(Vd(a,Rd))this.r|=oh,document.body.style.cursor="move",this.Rd=!0;else if(Vd(a,Sd))return!1;else Vd(a,Td)&&(this.r|=uh);this.Zc();return this.ca(a)}};this.je=function(a){if(this.c&&this.c.K){this.Ob=!0;this.ka=a.offsetX-
this.c.K.offsetLeft;this.la=a.offsetY-this.c.K.offsetTop;if(Vd(a,Rd))this.r&=~oh,this.kc=!1,document.body.style.cursor="default",this.Rd=!1;else if(Vd(a,Sd))return!1;else Vd(a,Td)&&(this.r&=~uh);this.Zc();return this.ca(a)}};this.ie=function(a){if(this.c&&this.c.K&&!this.zb&&!this.c.ya.mc)return this.Ob=this.Ab==mh,this.Ff=!0,this.Jk=a.offsetX-this.c.K.offsetLeft-this.ka,this.Kk=a.offsetY-this.c.K.offsetTop-this.la,this.ka=a.offsetX-this.c.K.offsetLeft,this.la=a.offsetY-this.c.K.offsetTop,this.Zc(),
this.ca(a)};this.Ve=function(a){if(this.Ga==yc){var c=this.Aa*this.i/5E3;this.te||(this.i-=a*c);if(this.i<this.Oa)this.i=this.Oa;this.Za=!0}else if(this.Ga==zc){c=this.Aa*this.i/5E3;this.i+=a*c;if(this.i>this.Je)this.i=this.Je;this.Za=!0}else if(this.Ga==Bc)this.C=this.Aa;else if(this.Ga==Cc)if(c=Math.sin(this.Aa),this.H+=a/5E3*-Math.cos(this.Aa),this.C+=a/5E3*c,this.H<-Math.PI/2)this.H=-Math.PI/2;else if(this.H>0)this.H=0;if(this.Cb>0&&(this.Cd=!0,this.Cb-=a,this.Cb<=0))this.Cb=0,this.Cd=!1;if((this.r&
zh||this.Ga==Ac)&&(this.r&ph)==0){c=0;this.r&wh&&(c+=1);this.r&yh&&(c-=1);var d=0;this.r&vh&&(d-=1);this.r&xh&&(d+=1);var e;e=this.Ga==Ac?Math.PI*this.Aa/180:Math.atan2(d,c);c=this.i/5E5;c>10?c=10:c<0.0010&&(c=0.0010);var a=c*a/5E4,c=Math.PI*this.p/180,f=Math.sin(c),d=Math.cos(c),g=this.C+e;e=Math.PI*this.s/180;var i=mc/Math.sqrt(1-nc*f*f),f=mc/i*a*Math.sin(g)/Math.cos(c),a=mc/(i/(1+oc*d*d))*a*Math.cos(g)*0.05+c;this.s=180*(f*0.05+e)/Math.PI;this.p=180*a/Math.PI}for(;this.s>180;)this.s-=180;for(;this.s<
-180;)this.s+=180;for(;this.p>90;)this.p-=180;for(;this.p<-90;)this.p+=180;if(this.Za)if(this.Za=!1,a=this.c.xg(this.s,this.p),a.hasvalue){if(this.i-this.Oa<a.elevation)this.i=a.elevation+this.Oa,this.Za=!0;this.te=!1}else if(this.i<5E3)this.Za=this.te=!0};this.Nb=function(a,c,d){this.qe=!1;this.Zb.tf();this.C=a;this.H=c;this.Qa=d};this.qh=function(a,c,d,e){this.qe=!0;this.Eh=a;this.Fh=c;this.Gh=d;this.Dh=e;var f=a,a=c,c=f,f=a*c+d*e;if(f>0.499)this.C=2*Math.atan2(a,e),this.H=Math.PI/2,this.Qa=0;else if(f<
-0.499)this.C=-2*Math.atan2(a,e),this.H=-Math.PI/2,this.Qa=0;else{var g=d*d;this.C=Math.atan2(2*c*e-2*a*d,1-2*c*c-2*g);this.H=Math.asin(2*f);this.Qa=Math.atan2(2*a*e-2*c*d,1-2*a*a-2*g)}};this.Np=function(a,c,d){a.a[0]=c.a[0]*d.a[0]+c.a[1]*d.a[4]+c.a[2]*d.a[8];a.a[1]=c.a[0]*d.a[1]+c.a[1]*d.a[5]+c.a[2]*d.a[9];a.a[2]=c.a[0]*d.a[2]+c.a[1]*d.a[6]+c.a[2]*d.a[10];a.a[4]=c.a[4]*d.a[0]+c.a[5]*d.a[4]+c.a[6]*d.a[8];a.a[5]=c.a[4]*d.a[1]+c.a[5]*d.a[5]+c.a[6]*d.a[9];a.a[6]=c.a[4]*d.a[2]+c.a[5]*d.a[6]+c.a[6]*d.a[10];
a.a[8]=c.a[8]*d.a[0]+c.a[9]*d.a[4]+c.a[10]*d.a[8];a.a[9]=c.a[8]*d.a[1]+c.a[9]*d.a[5]+c.a[10]*d.a[9];a.a[10]=c.a[8]*d.a[2]+c.a[9]*d.a[6]+c.a[10]*d.a[10]};this.Tk=function(a,c){this.Ef.W(this.oe);var d={};this.c.Ag(a,c,d,!0);d.hit?(this.ta.x=d.x,this.ta.y=d.y,this.ta.j=d.z,this.kc=!0):this.kc=!1};this.Sk=function(a,c){if(this.kc){var d={};this.c.Ag(a,c,d,!1);if(d.hit)if(this.sa.x=d.x,this.sa.y=d.y,this.sa.j=d.z,this.kc=!0,this.sa.x==this.ta.x&&this.sa.y==this.ta.y&&this.sa.j==this.ta.j)this.oe.W(this.Ef);
else{var e=this.ta.x*this.sa.x+this.ta.y*this.sa.y+this.ta.j*this.sa.j,d=Math.sqrt((1-e)*0.5),e=Math.sqrt((1+e)*0.5),f={};f.x=this.ta.y*this.sa.j-this.ta.j*this.sa.y;f.y=this.sa.x*this.ta.j-this.ta.x*this.sa.j;f.j=this.ta.x*this.sa.y-this.ta.y*this.sa.x;d/=Math.sqrt(f.x*f.x+f.y*f.y+f.j*f.j);f.x*=d;f.y*=d;f.j*=d;this.wh.wg(f.x,f.y,f.j,e);this.oe.ba(this.Ef,this.wh);d=[];(new Q(this.s,this.p,this.i)).$(d);d=this.oe.Ha(new K(d[0],d[1],d[2]));e=new Q(0,0,0);e.xc(d.a[0],d.a[1],d.a[2]);this.s=e.J[0];this.p=
e.J[1];this.Za=!0}else this.kc=!1}};this.ca=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1};this.Pm=ca("Oa")}Ca(kh,Tg);var oh=1,uh=4,nh=7,vh=16,wh=32,xh=64,yh=128,zh=240,qh=256,sh=512,ph=768,lh=0,mh=1,th=2,rh=3;function Ah(a){this.bl=this.dg=0;this.M=new L;this.$c=new K;this.$c.n(1,0,0);this.C=0;this.H=-0.03;this.Qa=0;this.s=7.616;this.p=45.9088;this.i=17E3;this.Cc=this.Bc=this.Mk=this.re=this.se=0;this.Bp=!1;this.Lk=this.Nk=0;this.Gf=this.Ik=this.zd=this.Ah=this.zh=this.kb=1;this.Pk=this.Qk=this.Xa=this.Ya=0;this.Fk=!1;this.vp=0.0010;this.Ep=-0.4;this.Ub=!1;this.la=this.ka=this.Hk=0;this.yh=!1;this.Ec=new K;this.Of=this.Nf=0;this.pe=this.Ob=!1;this.q=Array(3);this.ac=new Q(0,0,0);this.Mc=new L;this.Ie=
new L;this.Hd=new L;this.Zb=new L;this.M=new L;this.Hb=new L;this.He=new L;this.Zb.tf();this.Oa=100;this.wa=j;this.Sb=1.0E-6;this.Qb=15;this.De=45;this.Fd=this.Ed=this.Jc=this.Ic=this.Hc=this.Dd=this.cd=0;this.Zi=this.$i=!1;this.Pe=[];if(w(a.ElevationSteps))this.Pe=a.ElevationSteps;if(w(a.Near))this.Sb=a.Near;if(w(a.Far))this.Qb=a.Far;if(w(a.Fov))this.De=a.Fov;this.Em=0;this.Dm=7E6;this.wc=[];if(w(a.BoundingRect))this.wc=a.BoundingRect;this.ap=[];if(w(a.BoundingPolygon))this.wc=[],this.ap=a.BoundingPolygon;
this.gh=ca("pe");this.ud=function(){this.c.sh(this.M)};this.vd=n();this.wd=function(a){a.hd=0;this.ac.n(this.s,this.p,this.i);this.ac.$(this.q);this.$c.n(this.q[0],this.q[1],this.q[2]);this.Ie.xd(this.q[0],this.q[1],this.q[2]);this.Hd.ge(this.s,this.p);this.Mc.Yg(this.C,this.H,this.Qa);this.Hb.ba(this.Ie,this.Hd);this.He.ba(this.Hb,this.Mc);this.Hb.ba(this.He,this.Zb);this.M.xf(this.Hb);a.gj=this.C;a.Ia(this.q[0],this.q[1],this.q[2]);Dc(a,this.s,this.p,this.i);if(this.wa)this.wa.oc=this.s,this.wa.nc=
this.p,this.wa.lc=this.i,this.wa.pitch=this.H*57.29577951308232,this.wa.eb=this.C*57.29577951308232,this.wa.sc=this.Qa*57.29577951308232;this.c.d.pc.Sb=this.Sb;this.c.d.pc.Qb=this.Qb};this.Re=n();this.Qe=n();this.zf=function(){S(this.cd);S(this.Dd);S(this.Hc);S(this.Ic);S(this.Jc);S(this.Ed);S(this.Fd)};this.Ue=function(a){this.cd=R(window,Hd,this.Se,!1,this);this.Dd=R(window,Id,this.Te,!1,this);this.Hc=R(a,Dd,this.he,!1,this);this.Jc=R(a,Ed,this.je,!1,this);this.Ic=R(a,Gd,this.ie,!1,this);a=new Qg(a);
this.Fd=R(a,Rg,this.yf,!1,this)};this.yf=function(a){a.Vf>0?this.Xa>0?this.Ya=this.Xa=0:this.Ya+=0.05:this.Ya>0?this.Xa=this.Ya=0:this.Xa+=0.05};this.Se=function(a){if(a.keyCode==81)this.Cc=this.kb*this.Gf,this.$i=!0;else if(a.keyCode==65)this.Cc=-this.kb*this.Gf,this.Zi=!0;else if(a.keyCode==83)this.Bc=0.5*this.zd;else if(a.keyCode==88)this.Bc=-0.5*this.zd;this.dg=a.keyCode};this.Te=function(a){if(a.keyCode==81)this.Cc=0,this.$i=!1;else if(a.keyCode==65)this.Cc=0,this.Zi=!1;else if(a.keyCode==83)this.Bc=
0;else if(a.keyCode==88)this.Bc=0;this.dg=0};this.he=function(a){if(Vd(a,Rd))this.Hf=0,this.Ec.n(0,0,0),this.Nf=a.offsetX,this.Of=a.offsetY,this.yh=this.Ob=!0;this.ka=a.offsetX;this.la=a.offsetY;if(Vd(a,Sd))return!1};this.je=function(a){if(Vd(a,Rd))this.Ob=this.yh=!1;this.ka=a.offsetX;this.la=a.offsetY;this.se=this.re=this.Hf=0;if(Vd(a,Sd))return!1};this.ie=function(a){this.ka=a.offsetX;this.la=a.offsetY;if(this.Ob){var c=(this.Nf-a.offsetX)/this.c.width,d=(this.Of-a.offsetY)/this.c.height;c*=c;d*=
d;this.Hf=Math.sqrt(c+d);this.Ec.n(a.offsetX-this.Nf,this.c.height-1-a.offsetY-(this.c.height-1-this.Of),0);this.Ec.Wc();var a=this.Ec.a[0],e=this.Ec.a[1],f=0,g=0;a>0?f=1:a<0&&(f=-1);e>0?g=1:e<0&&(g=-1);this.re=this.kb*this.zh*d*g;this.se=this.Ah*c*f}};this.Ve=function(a){var c=this.Bc*a/500,d=this.se*a/500,e=this.Cc*a,f=0,f=0,g=this.i/5E5*(this.i/5E5);g>10?g=10:g<0.0010&&(g=0.0010);var i=g*this.re*a/250;if(this.Ya>0){var k=0.5*this.zd*a/1E3;this.H+=k;this.Ya-=k;if(this.Ya<0)this.H+=this.Ya,this.Ya=
0;this.Ub=!0}if(this.Xa>0){k=0.5*this.zd*a/1E3;this.H-=k;this.Xa-=k;if(this.Xa<0)this.H-=this.Xa,this.Xa=0;this.Ub=!0}if(c)this.H+=c,this.Ub=!0;if(d){this.C+=d;this.C>2*Math.PI&&(this.C-=2*Math.PI);if(this.C<0)this.C=2*Math.PI-this.C;this.Ub=!0}if(this.Ub&&(f=this.c.Xg(),isNaN(f)))f=this.Oa;if(e){if(this.Pe.length==0)a=1E3*e*g,this.i+=a,f+=a;else if(this.$i){this.$i=!1;for(a=0;a<this.Pe.length;a++)if(this.Pe[a]>this.i){this.i=this.Pe[a];break}}else if(this.Zi){this.Zi=!1;for(a=this.Pe.length-1;a>=
0;a--)if(this.Pe[a]<this.i){this.i=this.Pe[a];break}}if(this.i>this.Dm)this.i=this.Dm;else if(this.i<this.Em)this.i=this.Em}if(i){a=this.p*0.017453292519943295;e=Math.sin(a);g=Math.cos(a);d=this.C;c=this.s*0.017453292519943295;e=mc/Math.sqrt(1-nc*e*e);g=mc/(e/(1+oc*g*g))*i*Math.cos(d);k=mc/e*i*Math.sin(d)/Math.cos(a);i=mc/e*i*Math.sin(d)*Math.tan(a)+d;this.s=57.29577951308232*(k+c);this.p=57.29577951308232*(g+a);for(this.C=i;this.s>180;)this.s-=360;for(;this.s<-180;)this.s+=360;for(;this.p>90;)this.p=
180-this.p;for(;this.p<-90;)this.p=-180-this.p;this.Ub=!0}f<this.Oa&&this.Ub&&(this.i+=this.Oa-f);if(this.wc.length==2&&this.wc[0].length==2&&this.wc[1].length==2){if(this.wc[0][0]>this.s)this.s=this.wc[0][0];if(this.wc[1][0]<this.s)this.s=this.wc[1][0];if(this.wc[0][1]>this.p)this.p=this.wc[0][1];if(this.wc[1][1]<this.p)this.p=this.wc[1][1]}if(this.wa)this.wa.oc=this.s,this.wa.nc=this.p,this.wa.lc=this.i,this.wa.pitch=this.H*57.29577951308232,this.wa.eb=this.C*57.29577951308232,this.wa.sc=this.Qa*
57.29577951308232}}Ca(Ah,Tg);function Bh(a,b){this.c=a;this.T=new Ug;this.T.c=a;Ee(this.T);this.pc=new jh;this.l=new Mg(b);w(b.shownavigation)||(b.shownavigation=!0);if(b.shownavigation)this.qc=new Ge;this.pc.c=a;Ee(this.pc);this.l.c=a;Ee(this.l);if(this.qc)this.qc.c=a,Ee(this.qc);this.ce=new wc;this.Gb=new L;this.M=new L;this.nq=new L}Bh.prototype.Wa=function(){this.T.ud();this.T.vd();this.pc.ud();this.pc.vd();this.l.ud();this.l.vd();this.qc&&(this.qc.ud(),this.qc.vd())};
Bh.prototype.o=function(){if(this.T)this.T.Xc(),this.T=j;if(this.pc)this.pc.Xc(),this.pc=j;if(this.l)this.l.Xc(),this.l=j;if(this.qc)this.qc.Xc(),this.qc=j};
Bh.prototype.Bk=function(a){var b,c,d,e,f,g;if(w(a.type)){if(a.type=="globe")this.T.Xc(),this.T=new Ug,this.T.c=this.c;else if(a.type=="fly")this.T.Xc(),this.T=new Tg,this.T.c=this.c;else if(a.type=="constrained")this.T.Xc(),this.T=new Ah(a),this.T.c=this.c;else if(a.type=="dynamic")this.T.Xc(),this.T=new kh(a),this.T.c=this.c;b=this.T.s;c=this.T.p;d=this.T.i;e=this.T.C;f=this.T.H;g=this.T.Qa;w(a.Longitude)&&(b=a.Longitude);w(a.Latitude)&&(c=a.Latitude);w(a.Elevation)&&(d=a.Elevation);w(a.Yaw)&&(e=
J(a.Yaw));w(a.Pitch)&&(f=J(a.Pitch));w(a.Roll)&&(g=J(a.Roll));this.T.Ia(b,c,d);this.T.Nb(e,f,g);Ee(this.T)}};function Ch(a){this.b=a;this.Xd=!1;this.sl=this.nm=this.Kb=this.rl=this.mm=this.Tc=this.pl=this.km=this.md=this.ol=this.jm=this.ld=this.il=this.dm=this.jd=this.ml=this.hm=this.Rc=this.ql=this.lm=this.Sc=this.ll=this.gm=this.Tb=this.kl=this.fm=this.kd=this.nl=this.im=this.bc=this.jl=this.em=this.Kd=j}function Qc(a,b,c){a.Kd&&(a.b.useProgram(a.Kd),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Kd,"matMVP"),!1,b.na()),a.b.uniform4fv(a.b.getUniformLocation(a.Kd,"uColor"),c.na()))}
function Rc(a,b,c){a.kd&&(a.b.useProgram(a.kd),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.kd,"matMVP"),!1,b.na()),a.b.uniform4fv(a.b.getUniformLocation(a.kd,"uColor"),c.na()))}
function Sc(a,b,c,d,e){if(a.Tb){var f=new Gc(0.1,0.1,0.1,0);a.b.useProgram(a.Tb);a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Tb,"matMVP"),!1,d.na());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Tb,"matNormal"),!1,b.na());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Tb,"matModelView"),!1,c.na());a.b.uniform4fv(a.b.getUniformLocation(a.Tb,"uAmbientColor"),f.na());a.b.uniform4fv(a.b.getUniformLocation(a.Tb,"uColor"),e.na())}}
function cd(a,b,c){a.md&&(a.b.useProgram(a.md),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.md,"matMVP"),!1,b.na()),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.md,"matInvMVP"),!1,c.na()))}
function Dh(a){a.Xd=!0;a.em=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.jl=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(a.em&&a.jl)a.Kd=a.b.createProgram(),a.b.attachShader(a.Kd,a.em),a.b.attachShader(a.Kd,a.jl),a.b.bindAttribLocation(a.Kd,0,"aPosition"),a.b.linkProgram(a.Kd),!a.b.getProgramParameter(a.Kd,
a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("Shader Link: "+a.b.getProgramInfoLog(a.Kd));a.im=Eh(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.nl=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(a.im&&a.nl)a.bc=a.b.createProgram(),a.b.attachShader(a.bc,a.im),a.b.attachShader(a.bc,a.nl),a.b.bindAttribLocation(a.bc,0,
"aPosition"),a.b.bindAttribLocation(a.bc,1,"aNormal"),a.b.bindAttribLocation(a.bc,2,"aTexCoord"),a.b.linkProgram(a.bc),!a.b.getProgramParameter(a.bc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.bc));a.fm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.kl=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n");
if(a.fm&&a.kl)a.kd=a.b.createProgram(),a.b.attachShader(a.kd,a.fm),a.b.attachShader(a.kd,a.kl),a.b.bindAttribLocation(a.kd,0,"aPosition"),a.b.bindAttribLocation(a.kd,1,"aColor"),a.b.linkProgram(a.kd),!a.b.getProgramParameter(a.kd,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.kd));a.lm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.ql=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n");if(a.lm&&a.ql)a.Sc=a.b.createProgram(),a.b.attachShader(a.Sc,a.lm),a.b.attachShader(a.Sc,a.ql),a.b.bindAttribLocation(a.Sc,0,"aPosition"),a.b.bindAttribLocation(a.Sc,1,"aTexCoord"),a.b.linkProgram(a.Sc),!a.b.getProgramParameter(a.Sc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert(a.b.getProgramInfoLog(a.Sc));a.hm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.ml=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.hm&&a.ml)a.Rc=a.b.createProgram(),a.b.attachShader(a.Rc,a.hm),a.b.attachShader(a.Rc,a.ml),a.b.bindAttribLocation(a.Rc,0,"aPosition"),a.b.bindAttribLocation(a.Rc,1,"aNormal"),a.b.bindAttribLocation(a.Rc,2,"aTexCoord"),a.b.bindAttribLocation(a.Rc,3,"aColor"),a.b.linkProgram(a.Rc),!a.b.getProgramParameter(a.Rc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Rc));a.dm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.il=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(a.dm&&a.il)a.jd=a.b.createProgram(),a.b.attachShader(a.jd,a.dm),a.b.attachShader(a.jd,a.il),a.b.bindAttribLocation(a.jd,0,"aPosition"),a.b.bindAttribLocation(a.jd,1,"aTexCoord"),a.b.linkProgram(a.jd),!a.b.getProgramParameter(a.jd,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert("font shader: "+a.b.getProgramInfoLog(a.jd));a.jm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.ol=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.jm&&a.ol)a.ld=a.b.createProgram(),a.b.attachShader(a.ld,a.jm),a.b.attachShader(a.ld,a.ol),a.b.bindAttribLocation(a.ld,0,"aPosition"),a.b.bindAttribLocation(a.ld,1,"aTexCoord"),a.b.linkProgram(a.ld),!a.b.getProgramParameter(a.ld,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("poi shader: "+a.b.getProgramInfoLog(a.ld));a.km=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.pl=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(a.km&&a.pl)a.md=a.b.createProgram(),a.b.attachShader(a.md,a.km),a.b.attachShader(a.md,a.pl),a.b.bindAttribLocation(a.md,0,"aPosition"),a.b.bindAttribLocation(a.md,1,"aColor"),a.b.linkProgram(a.md),!a.b.getProgramParameter(a.md,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.md));a.mm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.rl=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
if(a.mm&&a.rl)a.Tc=a.b.createProgram(),a.b.attachShader(a.Tc,a.mm),a.b.attachShader(a.Tc,a.rl),a.b.bindAttribLocation(a.Tc,0,"aPosition"),a.b.bindAttribLocation(a.Tc,1,"aTexCoord"),a.b.linkProgram(a.Tc),!a.b.getProgramParameter(a.Tc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Tc));a.gm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;attribute vec4 aColor;\nvarying vec4 vColor;\n\nuniform mat4 matNormal;\nuniform mat4 matModelView;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;varying vec3 vNormal;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vPosition = matModelView * vec4(aPosition, 1.0);\n   vNormal = normalize((matNormal * vec4(aNormal,1.0)).xyz);   vColor = aColor;\n}\n");
a.ll=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uAmbientColor;\nuniform vec4 uColor;\nvarying vec4 vColor;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nvoid main()\n{\n   vec3 L = normalize(-vPosition.xyz);\n   float lamb1 = dot(normalize(vNormal), L);\n   float lamb2 = dot(normalize(vNormal), -L);\n   vec4 diff1 = clamp(vec4(vColor.xyz * lamb1,1.0),0.0,1.0);\n   vec4 diff2 = clamp(vec4(vColor.xyz * lamb2,1.0),0.0,1.0);\n   gl_FragColor = diff1+diff2;\n}\n");
if(a.gm&&a.ll)a.Tb=a.b.createProgram(),a.b.attachShader(a.Tb,a.gm),a.b.attachShader(a.Tb,a.ll),a.b.bindAttribLocation(a.Tb,0,"aPosition"),a.b.bindAttribLocation(a.Tb,1,"aNormal"),a.b.bindAttribLocation(a.Tb,2,"aColor"),a.b.linkProgram(a.Tb),!a.b.getProgramParameter(a.Tb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Tb));a.nm=Eh(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvTexCoord = aTexCoord;\n}\n");
a.sl=Eh(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec2 vTexCoord;uniform float dx;uniform float dy;uniform mat4 uColorMat1;uniform mat4 uColorMat2;uniform sampler2D uTexture1;\nuniform sampler2D uTexture2;\nvoid main()\n{\nfloat sep = 4.0;vec4 col1 = texture2D(uTexture1, vTexCoord+vec2(sep*dx,0));vec4 col2 = texture2D(uTexture2, vTexCoord+vec2(-sep*dx,0));vec4 colc = col1*uColorMat1 + col2*uColorMat2;\ngl_FragColor = vec4(pow(colc.r, 1.0/1.5), pow(colc.g, 1.0/1.5),pow(colc.b, 1.0/1.5),1.0);}\n\n");
if(a.nm&&a.sl)a.Kb=a.b.createProgram(),a.b.attachShader(a.Kb,a.nm),a.b.attachShader(a.Kb,a.sl),a.b.bindAttribLocation(a.Kb,0,"aPosition"),a.b.bindAttribLocation(a.Kb,1,"aTexCoord"),a.b.linkProgram(a.Kb),!a.b.getProgramParameter(a.Kb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Kb))}
function Eh(a,b,c){var d=a.b.createShader(b);if(!d)return j;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)&&!a.b.isContextLost())return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),j;return d};function Fh(a){this.c=a;this.Tj=[];this.Ld=[]}x("TextureManager",Fh);Fh.prototype.wm=function(a,b,c,d){var e=this.Tj[a];e?(this.Ld[a]+=1,b(e)):(e=new O(this.c),P(e,a,b,c,d),this.Ld[a]=1,this.Tj[a]=e);return e};Fh.prototype.CreateTexture=Fh.prototype.wm;Fh.prototype.ym=function(a){this.Ld[a]-=1;this.Ld[a]==0&&(this.Tj[a].o(),delete this.Tj[a],delete this.Ld[a])};Fh.prototype.DestroyTexture=Fh.prototype.ym;var Gh=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Hh(a){this.c=a;this.b=a.b;var b=0,c=0;this.oj=new M(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.oj;if(a.length%5==0)c.A=new Float32Array(a),c.mode="font",c.Z=5;Pc(this.oj,d,"TRIANGLES");a=new O(this.c);P(a,Zc+"font.png");this.oj.Yc(a);this.Ir=new L;this.Pq=0}
Hh.prototype.Oe=function(a,b,c,d,e){d==j&&(d=1);this.c.ic();this.c.Ck();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new L,g=0,i=0,k=0;k<a.length;k++)g=a.charCodeAt(k),i+=Gh[g]/2*d,f.me(d,d,1),f.zg(b+i,c,0),this.c.jc(f),this.oj.pa(!0,6,g*12,e),i+=Gh[g]/2*d;this.c.yc();this.c.b.disable(this.c.b.BLEND);this.Pq=b-b};Hh.prototype.Am=function(a){for(var b=0,c=0;c<a.length;c++)b+=Gh[a.charCodeAt(c)];return b};
Hh.prototype.jp=q(32);x("Font",Hh);Hh.prototype.DrawText=Hh.prototype.Oe;Hh.prototype.GetStringHeight=Hh.prototype.jp;Hh.prototype.GetStringWidth=Hh.prototype.Am;function Ih(a){this.c=a;this.b=a.b;this.ng=!1;this.am=this.Qc=this.u=j;this.w=this.t=0}
Ih.prototype.ah=function(a,b){this.tg=document.createElement("canvas");this.X=this.tg.getContext("2d");this.hb=new O(this.c);this.hb.m=this.b.createTexture();this.text=a;this.X.save();this.X.font=b.fontString;this.X.textAlign="left";this.X.textBaseline="top";this.X.lineWidth=b.lineWidth;this.X.strokeStyle=b.strokeStyle;var c=this.X.measureText(this.text),c=Math.round(c.width);this.X.restore();this.t=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.w=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.pd=rc(this.t);this.od=rc(this.w);this.hb.width=this.pd;this.hb.height=this.od;this.X.canvas.width=this.pd;this.X.canvas.height=this.od;this.X.fillStyle=b.backgroundColor;this.X.fillRect(0,0,this.t,this.w);this.X.shadowOffsetX=b.shadowOffsetX;this.X.shadowOffsetY=b.shadowOffsetY;this.X.shadowBlur=b.shadowBlur;this.X.shadowColor=b.shadowColor;this.X.fillStyle=b.fontColor;this.X.font=b.fontString;this.X.textAlign=
"left";this.X.textBaseline="middle";this.X.lineWidth=b.lineWidth;this.X.strokeStyle=b.strokeStyle;this.X.strokeText(a,b.lineWidth,this.w/2);this.X.fillText(a,b.lineWidth,this.w/2);this.uh();this.u=new M(this.c);this.u.Yc(this.hb);c=[];c.push(-this.t/2,this.w/2,0,0,0);c.push(-this.t/2,-this.w/2,0,0,1/this.od*this.w);c.push(this.t/2,-this.w/2,0,1/this.pd*this.t,1/this.od*this.w);c.push(this.t/2,this.w/2,0,1/this.pd*this.t,0);Oc(this.u,c);Pc(this.u,[0,1,2,0,2,3],"TRIANGLES");this.u.t=this.t;this.u.w=
this.w;return this.u};
Ih.prototype.Zg=function(a,b){this.tg=document.createElement("canvas");this.X=this.tg.getContext("2d");this.hb=new O(this.c);this.hb.m=this.b.createTexture();Jh(this,a,b);this.u=new M(this.c);this.u.Yc(this.hb);var c=[];c.push(-this.t/2,this.w/2,0,0,0);c.push(-this.t/2,-this.w/2,0,0,1/this.od*this.w);c.push(this.t/2,-this.w/2,0,1/this.pd*this.t,1/this.od*this.w);c.push(this.t/2,this.w/2,0,1/this.pd*this.t,0);Oc(this.u,c);Pc(this.u,[0,1,2,0,2,3],"TRIANGLES");this.u.ha=[-this.t/2,-this.w/2,0];this.u.Ca=
[this.t/2,this.w/2,0];this.u.t=this.t;this.u.w=this.w;return this.u};
function Jh(a,b,c){a.t=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.w=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.pd=rc(a.t);a.od=rc(a.w);a.hb.width=a.pd;a.hb.height=a.od;a.X.canvas.width=a.pd;a.X.canvas.height=a.od;a.X.fillStyle=c.backgroundColor;a.X.fillRect(0,0,a.t,a.w);a.X.shadowOffsetX=c.shadowOffsetX;a.X.shadowOffsetY=c.shadowOffsetY;a.X.shadowBlur=c.shadowBlur;a.X.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.X.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.uh()};d.src=b}
Ih.prototype.uh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.hb.m);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.tg);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,j);this.hb.ec=!0};Ih.prototype.o=function(){if(this.u)this.u.o(),this.u=j;if(this.Qc)this.Qc.o(),this.Qc=j;if(this.am)this.am.o(),this.am=j;if(this.hb)this.hb.o(),this.hb=j;if(this.tg)document.removeChild(this.tg),this.tg=j};function Kh(a){this.c=a;this.b=a.b;this.lc=this.oc=this.nc=0;this.Qr=j;this.ng=!1;this.ib=this.Ra=this.Qc=j;this.scale=20;this.text=this.Ig="";this.Mh=new Ih(a);this.gi=this.ji=0;this.mo=this.no=1;this.lo=0;this.ko=1;this.cm=0;this.bm=Infinity;this.Ll=new Gc(1,1,1,1);this.tj={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.pi={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"};this.dj=!1;this.Il=0;this.Jl=1;this.Kl=0}s=Kh.prototype;s.rp=function(a,b,c,d){this.Ig=c?c:"";if(b)this.pi=b;this.text=a;if(d)this.tj=d;if(c)this.Ra=this.Mh.Zg(this.Ig,this.tj);this.Mh=new Ih(this.c);if(a)this.ib=this.Mh.ah(a,this.pi)};
s.Ia=function(a,b,c,d){if(this.Ra&&this.ib)this.ji=this.Ra.t+this.ib.t,this.gi=this.Ra.w;else if(this.Ra)this.ji=this.Ra.t,this.gi=this.Ra.w;else if(this.ib)this.ji=this.ib.t,this.gi=this.ib.w;var e=this.Ra?this.Ra.t:0,f=this.dj?-this.Il*e/2:-this.Il*this.ji/2;if(this.Ra){var g=this.ji-e,g=this.dj?0:-g/2;this.Ra.nh(a,b,c,(g+f)*H*this.scale,this.Jl*(this.gi/2)*H*this.scale,this.Kl*H*this.scale)}this.ib&&(g=this.dj?e/2+this.ib.t/2:e/2,this.ib.nh(a,b,c,(g+f)*H*this.scale,this.Jl*(this.gi/2)*H*this.scale,
this.Kl*H*this.scale));this.lf=a;this.mf=b;this.nf=c;if(d!=j){this.ng=!0;var d=this.Mh,e=this.no,f=this.mo,g=this.lo,i=this.ko;d.Qc=new M(d.c);var k=[];k.push(a,b,c,e,f,g,i);k.push(0,0,0,e,f,g,i);Kc(d.Qc,k);Pc(d.Qc,[0,1],"LINES");this.Qc=d.Qc}};
s.pa=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.ng&&this.Qc.pa();this.Ra&&Vc(this.Ra);this.ib&&Vc(this.ib);this.c.ic();var a=new L;a.me(H*this.scale,H*this.scale,1);this.c.jc(a);this.Ra&&this.Ra.pa(!1,0,0,j,this.Ll);this.ib&&this.ib.pa(!1,0,0,j,this.Ll);this.c.yc();this.c.b.disable(this.c.b.BLEND)};function Lh(a){a.ng?a.Ia(a.lf,a.mf,a.nf,0):a.Ia(a.lf,a.mf,a.nf,j)}
s.Ri=function(a){this.scale=a;Lh(this)};s.jh=function(a,b){var c=!1,d=!1;if(this.Ra)var e=this.c.vf(a,b,this.c.ua,!0),c=this.Ra.Xe(e.x,e.y,e.j,e.ze,e.Ae,e.Be);this.ib&&(e=this.c.vf(a,b,this.c.ua,!0),d=this.ib.Xe(e.x,e.y,e.j,e.ze,e.Ae,e.Be));return c||d};s.o=function(){this.Mh=j;this.lc=this.oc=this.nc=0;this.Ra&&this.Ra.o();this.ib&&this.ib.o();this.Qc&&this.Qc.o();this.ng=!1;this.Qc=j;this.scale=0};x("Poi",Kh);Kh.prototype.Draw=Kh.prototype.pa;Kh.prototype.SetContent=Kh.prototype.rp;
Kh.prototype.SetPosition=Kh.prototype.Ia;Kh.prototype.SetSize=Kh.prototype.Ri;Kh.prototype.Destroy=Kh.prototype.o;function Mh(a){this.c=a;this.hi=[];this.Ld=[];this.Eg=j;this.ii=[];this.mi=[]}s=Mh.prototype;s.vm=function(a,b,c,d){var e=new Kh(this.c);if(b)e.pi=b;e.text=a;if(d)e.tj=d;if(c)e.Ig=c,e.Ra=this.Zg(c,e.tj);if(a)e.ib=this.ah(a,e.pi);return e};s.xm=function(a){a.Ra&&Nh(this,a.Ig);a.ib&&Oh(this,a.text,a.pi)};s.Zg=function(a,b){var c=this.hi[a];if(c){this.Ld[a]+=1;var d=new M(this.c);d.W(c);d.t=c.t;d.w=c.w;this.hi[a]=d}else this.Eg=new Ih(this.c),d=this.Eg.Zg(a,b),this.Ld[a]=1,this.hi[a]=d,this.Eg=j;return d};
function Nh(a,b){a.Ld[b]-=1;a.Ld[b]==0&&(a.hi[b].m.o(),delete a.hi[b],delete a.Ld[b])}s.ah=function(a,b){var c=this.ii[a+b.id];if(c){this.mi[a+b.id]+=1;var d=new M(this.c);d.W(c);d.t=c.t;d.w=c.w;this.ii[a+b.id]=d}else this.Eg=new Ih(this.c),d=this.Eg.ah(a,b),this.mi[a+b.id]=1,this.ii[a+b.id]=d,this.Eg=j;return d};function Oh(a,b,c){a.mi[b+c.id]-=1;a.mi[b+c.id]==0&&(a.ii[b+c.id].m.o(),delete a.ii[b+c.id],delete a.mi[b+c.id])}
s.tm=function(a,b,c){a.Ra=this.Zg(b,c);a.Ia(a.lf,a.mf,a.nf,j);Nh(this,a.Ig);a.Ig=b};s.um=function(a,b,c){a.ib=this.ah(b,c);a.Ia(a.lf,a.mf,a.nf,j);Oh(this,a.text,c);a.text=b};x("PoiManager",Mh);Mh.prototype.CreatePoi=Mh.prototype.vm;Mh.prototype.DestroyPoi=Mh.prototype.xm;Mh.prototype.ChangePoiIcon=Mh.prototype.tm;Mh.prototype.ChangePoiText=Mh.prototype.um;var Ph=new Date,Qh=new Date,Rh=[],Sh=0,Th=j,Uh=j;function Vh(){for(var a=0;a<Rh.length;a++){var b=Rh[a];if(b.dn)b.om>0&&b.wl>0?(b.K.width=window.innerWidth-b.om,b.K.height=window.innerHeight-b.wl):(b.K.width=window.innerWidth,b.K.height=window.innerHeight);b.b.isContextLost()||Wh(b,b.K.width,b.K.height)}}
function Y(){this.Ze=this.vr=this.ur=this.Bd=this.xr=this.yr=this.wr=this.xe=this.ye=this.we=j;this.Xd=!1;this.qr="";this.height=this.width=0;this.dn=!1;this.Ta=this.K=this.b=j;this.Yk=0.670588;this.Xk=0.921569;this.Vk=this.Wk=1;this.To=this.Uo=this.Wo=this.Vo=0;this.Bi=this.Ai=20;this.Gb=new L;this.M=new L;this.gd=new L;this.gg=new L;this.ua=new L;this.bi=new L;this.Bf=[];this.Dg=new wc;this.Qo=[];this.Ro=[];Rh[Sh]=this;Sh++;this.Fl=this.d=this.Rg=j;this.sf=1;this.ya=this.Sj=this.Pg=j;this.wl=this.om=
0}
function Xh(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),j;var c=Yh(a);if(c===j)return b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),j;
return c}function Yh(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=j,d=0;d<b.length;++d){try{c=a.getContext(b[d],{or:!1,Rr:!0})}catch(e){}if(c)break}return c}s=Y.prototype;
s.ok=function(a,b){if(this.b=Xh(a)){this.K=a;a.addEventListener("webglcontextlost",function(a){a.preventDefault()},!1);a.addEventListener("webglcontextrestored",function(){window.location.reload()},!1);if(b)this.Bi=this.Ai=0,a.width=window.innerWidth-this.Ai,a.height=window.innerHeight-this.Bi,this.dn=!0;for(var c=["webgl","experimental-webgl","moz-webgl","webkit-3d"],d=0;c.length>d;d++)try{if(this.b=a.getContext(c[d]))break}catch(e){}this.b?(Wh(this,this.K.width,this.K.height),this.b.clearColor(0,
0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Ta=new Ch(this.b),Dh(this.Ta),this.Rg=new Hh(this),this.Fl=new O(this),P(this.Fl,Zc+"nodata.png"),this.Pg=new Mh(this),this.Sj=new Fh(this),this.ya=new Zh(this),this.we&&this.we(this),Qh=new Date,typeof window!="undefined"&&window.uo($h,this.K),this.K.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1},R(window,"resize",Vh,!1,this),R(window,"unload",this.Xc,!1,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
s.Xc=function(){if(this.we)this.we=j;if(this.Td)S(this.Td),this.Td=j;if(this.Ud)S(this.Ud),this.Ud=j;if(this.Bd)S(this.Bd),this.Bd=j;if(this.ye)this.ye=j;if(this.xe)this.xe=j;Th&&(S(Th),Uh=j);Uh&&(S(Uh),Uh=j);if(this.d)this.d.o(),this.d=j;this.b.clearColor(0,0,0,0);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);this.Ta=this.K=this.b=j;this.Qo=[];this.Ro=[];this.Sj=this.Pg=this.d=this.Rg=j;re(window,"resize",j,!1,this);Sh=0;Rh=[]};
s.Lm=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.Yk=a,this.Xk=b,this.Wk=c,this.Vk=d};s.ip=function(){return{Lr:this.Yk,Br:this.Xk,pr:this.Wk,kr:this.Vk}};s.hk=function(){var a=this.b;a?(a.clearColor(this.Yk,this.Xk,this.Wk,this.Vk),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)):ai("Warning: no gl context!!")};s.Xm=function(a,b,c,d){if(this.b)this.Vo=a,this.Wo=b,this.Uo=c,this.To=d,this.b.viewport(a,b,c,d)};s.kp=function(){return{x:this.Vo,y:this.Wo,Zj:this.Uo,rj:this.To}};
s.Um=function(a){this.gd.W(a);Pg(this)};s.sh=function(a){this.M.W(a);Pg(this)};s.jc=function(a){this.Gb.W(a);Pg(this)};function Pg(a){a.gg.ba(a.M,a.Gb);a.ua.ba(a.gd,a.gg);a.bi.xf(a.gg);a.bi.Ye()}s.mp=function(a){var b=new O(this);P(b,a);this.Ro.push(b);return b};s.lp=function(a){var b=new M(this);Tc(b,a);this.Qo.push(b);return b};s.ic=function(){var a=this.Dg,b=this.M,c=new L;c.W(b);a.Fi.push(c);a=this.Dg;b=this.Gb;c=new L;c.W(b);a.Ei.push(c);a=this.Dg;b=this.gd;c=new L;c.W(b);a.yg.push(c)};
s.yc=function(){this.Gb.W(this.Dg.Ei.pop());this.M.W(this.Dg.Fi.pop());this.gd.W(this.Dg.yg.pop());Pg(this)};s.Ck=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Gb.Di();this.M.Di();this.gd.Gm(0,b,0,a);Pg(this)};
s.$g=function(a){this.sf==0?(a.type="custom",this.d=new Bh(this,a),this.d.l.jk(this.width,this.height)):this.sf==1?(a.type="ellipsoid",this.d=new Bh(this,a),this.d.l.jk(this.width,this.height)):this.sf==2?hc(G("owg.engine3d"),"** WARNING: not implemented"):this.sf==3&&hc(G("owg.engine3d"),"** WARNING: not implemented")};s.Oe=function(a,b,c,d,e){this.Rg&&this.Rg.Oe(a,b,c,d,e)};s.lk=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Rg&&(b[0]=this.Rg.Am(a),b[1]=32);return b};
s.vf=function(a,b,c,d){var e=new L;e.xf(c);var f=this.height-b-1,b=(a-0)*2/this.width-1,c=(f-0)*2/this.height-1,a=(a-0)*2/this.width-1,f=(f-0)*2/this.height-1,g=new K;g.n(b,c,-1);b=e.Ha(g);c=new K;c.n(a,f,1);c=e.Ha(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.j=d[2];b.ze=e;b.Ae=a;b.Be=c;return b};
if(typeof window!="undefined")window.uo=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function $h(){Ph=new Date;var a=Ph.valueOf()-Qh.valueOf();Qh=Ph;for(var b=0;b<Rh.length;b++){var c=Rh[b];if(!c.b.isContextLost()){if(c.d){var d=c.d,e=a;d.T.Ve(e);d.pc.Ve(e);d.l.Ve(e);d.qc&&d.qc.Ve(e)}c.ye&&c.ye(a,c);c.Xm(0,0,c.width,c.height);c.hk();if(c.d){var d=c.d,e=d.ce,f=d.Gb,g=new L;g.W(f);e.Ei.push(g);e=d.ce;f=d.M;g=new L;g.W(f);e.Fi.push(g);e=d.ce;f=d.nq;g=new L;g.W(f);e.yg.push(g);d.T.wd(d.ce);d.pc.wd(d.ce);d.l.wd(d.ce);d.qc&&d.qc.wd(d.ce);d.ce.Ei.pop();d.ce.Fi.pop();d.ce.yg.pop();c.d.Wa()}d=
c.b.getError();d!=c.b.NO_ERROR&&d!=c.b.ar&&ai("WebGL Error: "+d);c.xe&&c.xe(c);typeof window!="undefined"&&window.uo($h,c.K)}}}function Wh(a,b,c){a.width=b;a.height=c;a.Ze&&a.Ze(b,c,a);a.d&&a.d.l.jk(b,c)}s=Y.prototype;s.Mm=ca("we");s.Si=ca("ye");s.Vm=ca("xe");s.Qm=function(a){if(this.Td)S(this.Td),this.Td=j;if(a)this.Td=R(this.K,Dd,function(b){a(b.button,b.clientX-this.Ai/2,b.clientY-this.Bi/2,this)},!1,this)};
s.Sm=function(a){if(this.Ud)S(this.Ud),this.Ud=j;if(a)this.Ud=R(this.K,Ed,function(b){a(b.button,b.clientX-this.Ai/2,b.clientY-this.Bi/2,this)},!1,this)};s.Rm=function(a){if(this.Tf)S(this.Tf),this.Tf=j;if(a)this.Tf=R(this.K,Gd,function(b){a(b.clientX-this.Ai/2,b.clientY-this.Bi/2,this)},!1,this)};s.Tm=function(a){if(this.Bd)S(this.Bd),this.Bd=j;if(a){var b=new Qg(this.K);this.Bd=R(b,Gd,function(b){b.preventDefault();a(b.Vf,this)},!1,this)}};s.Wm=ca("Ze");
s.Nm=function(a){Th&&(S(Th),Th=j);a&&(Th=R(window,Hd,function(b){a(b.keyCode,this)},!1,this))};s.Om=function(a){Uh&&(S(Uh),Uh=j);a&&(Uh=R(window,Id,function(b){a(b.keyCode,this)},!1,this))};s.ke=function(a,b,c){this.d&&this.d.l&&this.d.l.oa&&this.d.l.oa.ke(a,b,c)};s.Ag=function(a,b,c,d){this.d&&this.d.l&&this.d.l.oa&&this.d.l.oa.Ag(a,b,c,d)};s.lh=function(a,b){if(this.d&&this.d.l&&this.d.l.ki)return this.d.l.ki.lh(a,b);return j};
s.Af=function(a,b){if(this.d&&this.d.l&&this.d.l.Yf)return this.d.l.Yf.Af(a,b);return-1};s.kh=function(a,b){if(this.d&&this.d.l&&this.d.l.Kh)return this.d.l.Kh.kh(a,b);return-1};s.Xg=function(){if(this.d&&this.d.l&&this.d.l.oa)return this.d.l.oa.Xg();return 0};s.$o=function(){if(this.d)return this.d.T.wf().elevation;return 0};s.xg=function(a,b){if(this.d&&this.d.l&&this.d.l.oa)return this.d.l.oa.xg(a,b);if(!this.d.l.oa)return{hasvalue:!0,elevation:0,lod:0};return{hasvalue:!1,elevation:0,lod:-1}};
s.kk=function(a,b,c,d,e,f,g){this.ya.kk(a,b,c,d,e,f,g)};s.ph=function(a){this.ya.ph(a)};s.th=function(){this.ya.th()};function Ze(a){if(a.Bf.length<1)bi("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.Bf.pop(),c=a.Bf.length;c>0?a.Bf[c-1].vh():b.Zm()}}x("engine3d",Y);Y.prototype.AltitudeAboveEllipsoid=Y.prototype.$o;Y.prototype.AltitudeAboveGround=Y.prototype.Xg;Y.prototype.Clear=Y.prototype.hk;Y.prototype.CreateScene=Y.prototype.$g;
Y.prototype.DrawText=Y.prototype.Oe;Y.prototype.GetClearColor=Y.prototype.ip;Y.prototype.GetDirectionMousePos=Y.prototype.vf;Y.prototype.GetViewport=Y.prototype.kp;Y.prototype.InitEngine=Y.prototype.ok;Y.prototype.LoadMesh=Y.prototype.lp;Y.prototype.LoadTexture=Y.prototype.mp;Y.prototype.PickGlobe=Y.prototype.ke;Y.prototype.PopMatrices=Y.prototype.yc;Y.prototype.PushMatrices=Y.prototype.ic;Y.prototype.SetClearColor=Y.prototype.Lm;Y.prototype.SetInitCallback=Y.prototype.Mm;
Y.prototype.SetKeyDownCallback=Y.prototype.Nm;Y.prototype.SetKeyUpCallback=Y.prototype.Om;Y.prototype.SetModelMatrix=Y.prototype.jc;Y.prototype.SetMouseDownCallback=Y.prototype.Qm;Y.prototype.SetMouseMoveCallback=Y.prototype.Rm;Y.prototype.SetMouseUpCallback=Y.prototype.Sm;Y.prototype.SetMouseWheelCallback=Y.prototype.Tm;Y.prototype.SetOrtho2D=Y.prototype.Ck;Y.prototype.SetProjectionMatrix=Y.prototype.Um;Y.prototype.SetRenderCallback=Y.prototype.Vm;Y.prototype.SetResizeCallback=Y.prototype.Wm;
Y.prototype.SetTimerCallback=Y.prototype.Si;Y.prototype.SetViewMatrix=Y.prototype.sh;Y.prototype.SetViewport=Y.prototype.Xm;Y.prototype.GetElevationAt=Y.prototype.xg;Y.prototype.OnDestroy=Y.prototype.Xc;function ci(a){a=a.rc;a.we&&a.we(a.id)}function di(a,b){var c=b.rc;c.ye&&c.ye(c.id,a)}function ei(a){var b=a.rc;if(b.xe){var c=[];if(a.d.l&&a.d.l.oa&&a.d.l.oa.O)for(var d=0;d<a.d.l.oa.O.length;d++){var e=a.d.l.oa.O[d];c[c.length]={quadcode:e.f,sw:[e.jf,e.gf],ne:[e.fg,e.eg],available:e.Fc}}b.xe(b.id,{gl:a.b,cameraVec:a.d.l.Pb.na(),eyeVec:a.d.T.$c.na(),vMatrix:a.M.na(),pMatrix:a.gd.na(),viewPort:{width:a.width,height:a.height},visibleTiles:c})}}function fi(a,b,c,d){d=d.rc;d.Td&&d.Td(d.id,a,b,c)}
function gi(a,b,c,d){d=d.rc;d.Ud&&d.Ud(d.id,a,b,c)}function hi(a,b,c){c=c.rc;c.Tf&&c.Tf(c.id,a,b)}function ii(a,b){var c=b.rc;c.Bd&&c.Bd(c.id,a)}function ji(a,b,c){c=c.rc;c.Ze&&c.Ze(c.id,a,b)}function ki(a,b){var c=b.rc;c.Zk&&c.Zk(c.id,a)}function li(a,b){var c=b.rc;c.$k&&c.$k(c.id,a)}function mi(a){var b=a.rc;b.Rf&&b.Rf(a.rc.id)}function ni(a){var b=a.rc;b.Sf&&b.Sf(a.rc.id)}
function oi(){this.name="ogContext";this.type=B;this.tl=!1;this.d=this.c=j;this.fontcolor=new Gc(1,1,1,1);this.vq=1;this.Sf=this.Rf=this.Wp=this.we=this.ye=this.xe=this.Ze=this.$k=this.Zk=this.Tf=this.Bd=this.Ud=this.Td=j}oi.prototype=new E;
oi.prototype.Pa=function(a){this.we=a.cbfInit;this.Wp=a.cbfExit;this.Ze=a.cbfResize;if(a.fullscreen)this.tl=!0;this.c=new Y;this.c.rc=this;if(w(a["new"])){a=document.createElement("div");document.body.appendChild(a);var b=document.createElement("canvas");a.appendChild(b);this.c.ok(b,this.tl)}else a.canvas&&this.c.ok(document.getElementById(a.canvas),this.tl);this.c.Mm(ci);this.c.Si(di);this.c.Vm(ei);this.c.Qm(fi);this.c.Sm(gi);this.c.Rm(hi);this.c.Tm(ii);this.c.Wm(ji);this.c.Nm(ki);this.c.Om(li);
this.c.ya.Rf=mi;this.c.ya.Sf=ni};oi.prototype.Oe=function(a,b,c){this.c&&this.c.Oe(a,b,c,1,this.fontcolor)};oi.prototype.lk=function(a){if(this.c)return this.c.lk(a);return j};oi.prototype.jb=function(){this.c.Xc();this.c=j};function pi(){this.name="ogWorld";this.type=Da}pi.prototype=new E;
pi.prototype.Pa=function(a){if(a==j)hc(G("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent,c=this.parent.parent.c,b={rendertotexture:b.to,shownavigation:b.Ql};if(a.scenetype==fb){if(c.sf=1,c.$g(b),c.d)c.d.Vg=this}else if(a.scenetype==gb){if(c.sf=2,c.$g(b),c.d)c.d.Vg=this}else if(a.scenetype==hb){if(c.sf=3,c.$g(b),c.d)c.d.Vg=this}else if(a.scenetype==ib&&(c.sf=0,c.$g(b),c.d))c.d.Vg=this}};
pi.prototype.Qi=function(a,b){var c=this.parent.parent.c.d.l.oa;switch(a){case 0:c.Qi(ug);c.so=b!=j?b:{};break;case 1:c.Qi(vg),c.so=b!=j?b:{}}};function qi(){this.name="ogScene";this.type=C;this.Pf=this.Vg=j;this.cj=[];this.tc=fb;this.Ql=this.to=!0}qi.prototype=new E;s=qi.prototype;s.Pa=function(a){if(a==j)hc(G("owg.ogScene"),"** ERROR: no options for scene creation!");else{if(w(a.type))this.tc=a.type;if(w(a.rendertotexture))this.to=a.rendertotexture;if(w(a.shownavigation))this.Ql=a.shownavigation}};s.jh=function(a,b){var c={};this.parent.c.ke(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};
s.lh=function(a,b){var c=this.parent.c.lh(a,b);if(c)return c.yq.id;return-1};s.Af=function(a,b){return this.parent.c.Af(a,b)};s.kh=function(a,b){return this.parent.c.kh(a,b)};function ri(a,b){var c=D(b);if(c&&c.type==Ta){var d=tc(c);d.Ia(c.oc,c.nc,c.lc);d.Nb(J(c.eb),J(c.pitch),J(c.sc));d.wa=c}a.Pf=c}s.Bk=function(a,b){var c=this.parent.c;if(a==0)b.type="globe";else if(a==1)b.type="fly";else if(a==2)b.type="constrained";else if(a==3)b.type="dynamic";else return;c.d.Bk(b)};s.nk=function(a){this.parent.c.d.qc.nk(a)};function si(){this.name="ogPOI";this.type=Ya;this.P=!1;this.g=this.Ba=j}si.prototype=new E;
si.prototype.Pa=function(a){var b="",c=40,d=j;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new Q(e[0],e[1],e[2])).$(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.vg=a.textstyle;if(a.iconstyle)this.bg=a.iconstyle;this.Ba=this.parent.parent.c.Pg.vm(b,this.vg,d,this.bg);this.Ba.P=!1;if(a.flagpoleColor)b=this.Ba,d=a.flagpoleColor,b.no=d[0],b.mo=d[1],b.lo=d[2],b.ko=d[3];a.flagpole==!0?this.Ba.Ia(f[0],f[1],f[2],0):this.Ba.Ia(f[0],f[1],f[2],j);this.Ba.Ri(c);if(a.centerOnIcon==
!0)c=this.Ba,c.dj=!0,Lh(c);if(a.pivotPoint)c=a.pivotPoint,f=this.Ba,b=c[1],d=c[2],f.Il=c[0],f.Jl=b,f.Kl=d,Lh(f);this.Ba.yq=this;(c=ti(this))&&c.cb.push(this.Ba);if(a.visibilityRange)c=this.Ba,a=a.visibilityRange,c.cm=a[0]*1E3*H,c.bm=a[1]*1E3*H};si.prototype.jb=function(){var a=this.parent.parent,b=ti(this);if(b)for(var c=this.Ba,d=0;d<b.cb.length;d++)if(b.cb[d]==c){b.cb.splice(d,1);break}a.c.Pg.xm(this.Ba)};si.prototype.qa=function(){this.P=!0;this.Ba.P=!0};
si.prototype.ra=function(){this.P=!1;this.Ba.P=!1};function ti(a){var b=j,a=a.parent.parent.c;if(a.d&&a.d.l)b=a.d.l.ki;return b};function ui(){this.name="ogPOILayer";this.type=Ha;this.P=!1;this.cb=[];this.Yd="";this.bg=this.vg=j;this.cq={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.bq={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
ui.prototype=new E;
function vi(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}ui.prototype.Pa=function(a){if(a.name)this.Yd=a.name;a.textstyle?(vi(a.textstyle),this.vg=a.textstyle):this.vg=this.cq;a.iconstyle?(vi(a.iconstyle),this.bg=a.iconstyle):this.bg=this.bq};ui.prototype.jb=function(){for(var a=0;a<this.cb.length;a++)F(this.cb[a])};ui.prototype.qa=function(){this.P=!0;for(var a=0;a<this.cb.length;a++)this.cb[a].qa()};ui.prototype.ra=function(){this.P=!1;for(var a=0;a<this.cb.length;a++)this.cb[a].ra()};function wi(){this.name="ogElevationLayer";this.type=Fa;this.Lc=-1}wi.prototype=new E;wi.prototype.sd=function(){var a=j,b=this.parent.parent.parent.c;if(b.d&&b.d.l)a=b.d.l.oa;return a};wi.prototype.ck=function(a){var b=this.sd();if(b)this.Lc=b.ck(a)};wi.prototype.yk=function(){var a=this.sd();a&&this.Lc!=-1&&a.yk(this.Lc)};wi.prototype.Pa=function(a){this.ck(a)};function xi(){this.name="ogPointCloudLayer";this.type=Ja;this.P=!1;this.N=[];this.Yd=""}xi.prototype=new E;s=xi.prototype;s.Pa=function(a){this.fk(a)};s.jb=function(){this.Oi()};s.qa=function(){this.P=!0;for(var a=0;a<this.N.length;a++)this.N[a].qa()};s.ra=function(){this.P=!1;for(var a=0;a<this.N.length;a++)this.N[a].ra()};s.Oi=function(){for(var a=0;a<this.N.length;a++){for(var b=a;b<this.N.length;b++)this.N[a].ab-=1;F(this.N[a])}};s.rd=function(a){this.N.push(a);a.hf=this.id};
s.Mi=function(a){for(var b=0;b<this.N.length;b++)if(this.N[b]==a){for(var c=b+1;c<this.N.length;c++)this.N[c].ab-=1;F(this.N[b]);this.N.splice(b,1)}};s.sd=function(){var a=j,b=this.parent.parent.parent.c;if(b.d&&b.d.l)a=b.d.l.oa;return a};s.fk=function(a){var b=this.sd();if(b)this.Lc=b.fk(a)};s.Oi=function(){var a=this.sd();a&&this.Lc!=-1&&a.Oi(this.Lc)};function Zh(a){this.c=a;this.b=a.b;this.jg=j;this.En=this.mc=!1;this.Gi=[];this.Hi=[];this.Ii=[];this.Ji=[];this.Lo=2E3;this.jq=new Q;this.Sf=this.Rf=j}function yi(a,b,c,d){var e=a.jg.wf(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.Sh=mc*Math.acos(Math.sin(J(f[1]))*Math.sin(J(g[1]))+Math.cos(J(f[1]))*Math.cos(J(g[1]))*Math.cos(J(g[0]-f[0])));if(isNaN(a.Sh))a.Sh=0;e=[e.longitude,e.latitude,e.elevation+a.Sh/4];b=[b,c,d+a.Sh/4];a.Gi=f;a.Hi=e;a.Ii=b;a.Ji=g;a.En=!0}
function Ue(a,b,c,d,e,f,g){a.jg=a.c.d.T;var i=a.jg.eh();a.Tl=i.eb;a.Rl=i.pitch;a.Sl=i.sc;e!=j&&f!=j&&g!=j?(a.Do=J(e),a.Bo=J(f),a.Co=J(g)):(a.Do=a.Tl,a.Bo=a.Rl,a.Co=a.Sl);a.Qh=a.Do-a.Tl;Math.abs(a.Qh)>Math.PI&&(a.Qh>0?a.Qh-=2*Math.PI:a.Qh+=2*Math.PI);a.Oh=a.Bo-a.Rl;Math.abs(a.Oh)>Math.PI&&(a.Oh>0?a.Oh-=2*Math.PI:a.Oh+=2*Math.PI);a.Ph=a.Co-a.Sl;Math.abs(a.Ph)>Math.PI&&(a.Ph>0?a.Ph-=2*Math.PI:a.Ph+=2*Math.PI);yi(a,b,c,d);a.Rf&&a.Rf(a.c);a.c.Si(function(b){if(a.En){a.Pn+=b;b=a.Pn/a.Lo;a.R=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.R=1,a.th();var b=Math.pow(1-a.R,3)*a.Gi[0]+3*a.R*Math.pow(1-a.R,2)*a.Hi[0]+3*a.R*a.R*(1-a.R)*a.Ii[0]+Math.pow(a.R,3)*a.Ji[0],c=Math.pow(1-a.R,3)*a.Gi[1]+3*a.R*Math.pow(1-a.R,2)*a.Hi[1]+3*a.R*a.R*(1-a.R)*a.Ii[1]+Math.pow(a.R,3)*a.Ji[1],d=Math.pow(1-a.R,3)*a.Gi[2]+3*a.R*Math.pow(1-a.R,2)*a.Hi[2]+3*a.R*a.R*(1-a.R)*a.Ii[2]+Math.pow(a.R,3)*a.Ji[2];a.jq.xc(b,c,d);a.jg.Ia(b,c,d);a.jg.Nb(a.Tl+a.R*a.Qh,a.Rl+a.R*a.Oh,a.Sl+a.R*a.Ph);a.R==1&&a.th()}});a.R=0;a.Pn=0;a.mc=!0}
Zh.prototype.th=function(){this.c.Si(j);this.mc=!1;this.Sf&&this.Sf(this.c)};
Zh.prototype.kk=function(a,b,c,d,e,f,g){this.jg=this.c.d.T;d*=H;var i=new Q(a,b,c),k=[];i.$(k);var l=new L;l.ge(a,b);a=new L;a.xd(k[0],k[1],k[2]);k=new L;k.ba(a,l);l={};e!=j&&f!=j&&g!=j?(l.eb=J(e),l.pitch=J(f),l.sc=J(g)):l=this.jg.eh();a=l.pitch-Math.PI/2;d=new K(d*Math.sin(a)*Math.cos(l.eb),d*Math.sin(a)*Math.sin(l.eb),d*Math.cos(a));d=k.Ha(d).a;i.xc(d[0],d[1],d[2]);d=i.J[1];k=i.J[0];i=i.J[2];i>c?Ue(this,k,d,i,e,f,g):Ue(this,k,d,-i,l.eb,-qc(l.pitch),l.sc)};Zh.prototype.ph=ca("Lo");function Lg(a,b){this.c=a;this.b=a.b;this.va=this.Xb=this.S=this.Y=this.A=j;this.Ke=new L;this.Ml=[];this.options=b;this.Kc=new Gc;this.Kc.n(1,1,1,1)}
Lg.prototype.Bg=function(a){this.Ml=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];gg(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];gg(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],i=0;i<this.options.segmentation+1;i++){var k=f[2]+g[2]*i/this.options.segmentation,l=[];hg(f[0]+g[0]*i/this.options.segmentation,f[1]+g[1]*i/this.options.segmentation,l);l[2]=k;k=new Q(l[0],l[1],l[2]);l=[];k.$(l);c.push(l[0]);c.push(l[1]);c.push(l[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)k=new Q(a[e][0],a[e][1],a[e][2]),l=[],k.$(l),c.push(l[0]),c.push(l[1]),c.push(l[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.yj=e*this.options.segmentation;this.A=new Float32Array(c);this.Y=new Uint16Array(d);
this.pb=d.length;this.yd()};Lg.prototype.o=function(){if(this.S)this.b.deleteBuffer(this.S),this.S=j;if(this.Xb)this.b.deleteBuffer(this.Xb),this.S=j;this.S=this.$b=j};
Lg.prototype.pa=function(){this.Ml!=j&&(this.S||this.yd(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Xb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12),Rc(this.c.Ta,this.c.ua,this.Kc),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.pb,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Lg.prototype.yd=function(){this.S=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.bufferData(this.b.ARRAY_BUFFER,this.A,this.b.STATIC_DRAW);this.Xb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Xb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.Y,this.b.STATIC_DRAW)};function zi(){this.name="ogEarthPolylineObject";this.type=db;this.options=this.af=j}zi.prototype=new E;s=zi.prototype;s.Pa=function(a){this.options=a;this.af=new Lg(this.parent.parent.parent.c,a);this.af.Bg(a.coords)};s.jb=function(){if(this.af)this.af.o(),this.af=j,this.status=3};s.qa=function(){this.af.P=!0};s.We=n();s.ra=function(){this.af.P=!1};function Ai(a){this.c=a;this.b=a.b;this.lc=this.oc=this.nc=0;this.canvas=j;this.w=this.t=0;this.X=this.u=j;this.io=-1}s=Ai.prototype;
s.uh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.hb.m);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,j);this.hb.ec=!0};s.Ia=function(a,b,c){var d=[];(new Q(a,b,c)).$(d);this.u.nh(d[0],d[1],d[2],0,0,0)};s.pa=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.u&&Vc(this.u);this.c.ic();var a=new L;a.me(H*this.scale,H*this.scale,1);this.c.jc(a);this.u&&this.u.pa(!1,0,0,j,j);this.c.yc();this.c.b.disable(this.c.b.BLEND)};
s.Ri=ca("scale");s.jh=function(a,b){if(this.u)var c=this.c.vf(a,b,this.c.ua,!0),d=this.u.Xe(c.x,c.y,c.j,c.ze,c.Ae,c.Be);if(d){var e=c=0,f=d.qd,g=d.fe,i=1-f-g;d.Mo==0?(c=f*-this.t/2+g*this.t/2+i*-this.t/2/(f+g+i)+this.t/2,e=f*this.w/2+g*this.w/2+i*-this.w/2/(f+g+i)+this.w/2):d.Mo==1&&(c=f*this.t/2+g*this.t/2+i*-this.t/2/(f+g+i)+this.t/2,e=f*this.w/2+g*-this.w/2+i*-this.w/2/(f+g+i)+this.w/2);c/=this.t;e/=this.w;d={};d.id=this.io;d.x=c;d.y=e;return d}return j};s.o=function(){this.u&&(this.u.o(),this.hb.o())};function Bi(){this.name="ogBillboard";this.type=Za;this.status=kb;this.g=-1;this.P=!1}Bi.prototype=new E;s=Bi.prototype;
s.Pa=function(a){if(a==j)hc(G("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==j)hc(G("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=C)hc(G("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.ad=new Ai(this.parent.parent.c);this.ad.io=this.id;var b=this.ad,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.X=b.canvas.getContext("2d");b.t=b.X.canvas.width;b.w=b.X.canvas.height;
break;case "[object HTMLVideoElement]":b.t=c.videoWidth,b.w=c.videoHeight}b.hb=new O(b.c);b.hb.m=b.b.createTexture();b.u=new M(b.c);b.u.Yc(b.hb);b.pd=b.t;b.od=b.w;c=[];c.push(-b.t/2,b.w/2,0,0,0);c.push(-b.t/2,-b.w/2,0,0,1/b.od*b.w);c.push(b.t/2,-b.w/2,0,1/b.pd*b.t,1/b.od*b.w);c.push(b.t/2,b.w/2,0,1/b.pd*b.t,0);Oc(b.u,c);Pc(b.u,[0,1,2,0,2,3],"TRIANGLES");b.u.ha=[-b.t/2,-b.w/2,0];b.u.Ca=[b.t/2,b.w/2,0];b.u.t=b.t;b.u.w=b.w;b.uh();a=a.position;this.ad.Ia(a[0],a[1],a[2]);Ci(this).bk(this.ad)}};
s.jb=function(){if(this.ad)Ci(this).xk(this.ad),this.ad.o(),this.status=3};s.pa=function(){this.ad.pa()};function Ci(a){var b=j,a=a.parent.parent.c;if(a.d&&a.d.l)b=a.d.l.Kh;return b}s.qa=function(){this.P=!0;this.ad.P=!0};s.ra=function(){this.P=!1;this.ad.P=!1};function Di(){this.name="ogMeshObject";this.type=Qa;this.qb=[];this.Od=[]}Di.prototype=new E;s=Di.prototype;s.Pa=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(Ra,this,this.options);this.qb.push(c);this.Od.push(c.u)}};s.jb=function(){for(var a=0;a<this.qb.length;a++)F(this.qb[a]);this.Od=this.qb=j};s.qa=function(){for(var a=0;a<this.qb.length;a++)this.qb[a].qa()};
s.Cf=function(a,b,c,d){for(var e=0;e<this.qb.length;e++)this.qb[e].Cf(a,b,c,d)};s.We=function(a,b,c,d,e,f){for(var g=0;g<this.qb.length;g++)this.qb[g].We(a,b,c,d,e,f)};s.rh=function(a,b,c,d){for(var e=0;e<this.qb.length;e++)this.qb[e].rh(a,b,c,d)};s.Df=function(a,b,c){for(var d=0;d<this.qb.length;d++)this.qb[d].Df(a,b,c)};s.Nb=function(a,b,c){for(var d=0;d<this.qb.length;d++)this.qb[d].Nb(a,b,c)};s.ra=function(){for(var a=0;a<this.qb.length;a++)this.qb[a].ra()};function Ei(){this.ro=Ba()}var Fi=new Ei;Ei.prototype.set=ca("ro");Ei.prototype.reset=function(){this.set(Ba())};Ei.prototype.get=da("ro");function Gi(a){this.Nl=a||"";this.Oq=Fi}Gi.prototype.Kq=!0;Gi.prototype.Mq=!0;Gi.prototype.Lq=!0;Gi.prototype.wo=!1;function Hi(a){if(a<10)return"0"+a;return String(a)}function Ii(a,b){var c=(a.Go-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;)e++,c*=10;for(;e-- >0;)d=" "+d;return d}function Ji(a){Gi.call(this,a)}Ca(Ji,Gi);Ji.prototype.wo=!0;function Ki(a){this.hg=a||100;this.Qf=[]}s=Ki.prototype;s.ci=0;s.add=function(a){this.Qf[this.ci]=a;this.ci=(this.ci+1)%this.hg};s.get=function(a){a=Li(this,a);return this.Qf[a]};s.set=function(a,b){a=Li(this,a);this.Qf[a]=b};s.$f=function(){return this.Qf.length};s.clear=function(){this.ci=this.Qf.length=0};s.ul=function(){for(var a=this.$f(),b=[],c=this.$f()-this.$f();c<a;c++)b[c]=this.get(c);return b};s.pj=function(){for(var a=[],b=this.$f(),c=0;c<b;c++)a[c]=c;return a};
function Li(a,b){b>=a.Qf.length&&ba(Error("Out of bounds exception"));if(a.Qf.length<a.hg)return b;return(a.ci+Number(b))%a.hg};function Mi(a,b){this.ef=a||"";this.Nl=b||"";this.Og=[];this.Ej=new Ki(Ni);this.Dq=Aa(this.Rp,this);this.iq=new Ji(this.Nl);this.hq={};if(!0!=this.Cn){this.Cn=!0;kc();var c=jc,d=this.Dq;if(!c.Yh)c.Yh=[];c.Yh.push(d)}this.kj=Oi(this.ef,"enabled")=="1";v.setInterval(Aa(this.Hq,this),7500)}var Ni=500;s=Mi.prototype;s.Xo="LOGGING";s.fq=!1;s.yb=j;s.pm=!1;s.Cn=!1;s.en=j;s.yl=Ba();s.Xd=function(){this.kj&&Pi(this)};function Qi(a){a.kj=!0;a.kj&&(Pi(a),a.yb&&a.$j());Ri(a,"enabled","1")}
function Si(a){return!!a.yb&&!a.yb.closed}s.Xp=function(){this.Ej.clear();Si(this)&&this.$j()};
s.Rp=function(a){if(!this.hq[a.Jn]){this.fq&&a.Ge>=$b&&Qi(this);var b=this.iq,c;switch(a.Ge.value){case Zb.value:c="dbg-sh";break;case $b.value:c="dbg-sev";break;case ac.value:c="dbg-w";break;case bc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.Nl," ");if(b.Kq){var e=new Date(a.Go);d.push("[",Hi(e.getFullYear()-2E3)+Hi(e.getMonth()+1)+Hi(e.getDate())+" "+Hi(e.getHours())+":"+Hi(e.getMinutes())+":"+Hi(e.getSeconds())+"."+Hi(Math.floor(e.getMilliseconds()/10)),"] ")}b.Mq&&d.push("[",zb(Ii(a,
b.Oq.get())),"s] ");b.Lq&&d.push("[",tb(a.Jn),"] ");d.push('<span class="',c,'">',sb(zb(tb(a.Qn))));b.wo&&a.hl&&d.push("<br>",sb(zb(a.fl||"")));d.push("</span><br>");a=d.join("");this.kj?(Pi(this),this.Ej.add(a),Ti(this,a)):this.Ej.add(a)}};function Ti(a,b){a.Og.push(b);v.clearTimeout(a.en);Ba()-a.yl>750?a.qm():a.en=v.setTimeout(Aa(a.qm,a),250)}
s.qm=function(){this.yl=Ba();if(Si(this)){var a=this.yb.document.body,a=a&&a.scrollHeight-(a.scrollTop+a.clientHeight)<=100;this.yb.document.write(this.Og.join(""));this.Og.length=0;a&&this.yb.scrollTo(0,1E6)}};function Ui(a){for(var b=a.Ej.ul(),c=0;c<b.length;c++)Ti(a,b[c])}
function Pi(a){if(!Si(a)&&!a.pm){var b=Oi(a.ef,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.pm=!0;a.yb=window.open("",md?a.ef.replace(/[\s\-\.\,]/g,"_"):a.ef,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);if(!a.yb&&!a.Nq)alert("Logger popup was blocked"),a.Nq=!0;a.pm=!1;a.yb&&a.$j()}}s.qj=q("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
s.$j=function(){Si(this)||(this.yb.document.open(),Ti(this,"<style>"+this.qj()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.Xo+"<br><small>Logger: "+this.ef+"</small></div><hr>"),Ui(this))};function Ri(a,b,c){b+=a.ef;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Ba()+2592E6)).toUTCString()}
function Oi(a,b,c){var a=b+a,b=String(document.cookie),d=b.indexOf(a+"=");return d!=-1?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,c==-1?b.length:c))):c||""}s.Hq=function(){Si(this)&&Ri(this,"dbg",(this.yb.screenX||this.yb.screenLeft||0)+","+(this.yb.screenY||this.yb.screenTop||0)+","+(this.yb.outerWidth||800)+","+(this.yb.outerHeight||500))};function Vi(a){var b;b=(b=a.className)&&typeof b.split=="function"?b.split(/\s+/):[];var c=Jb(arguments,1),d;d=b;for(var e=0,f=0;f<c.length;f++)Fb(d,c[f])>=0||(d.push(c[f]),e++);d=e==c.length;a.className=b.join(" ");return d};var Wi=!md||Ad("9");!nd&&!md||md&&Ad("9")||nd&&Ad("1.9.1");md&&Ad("9");function Xi(a,b){mb(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in Yi?a.setAttribute(Yi[d],b):a[d]=b})}var Yi={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Zi(a,b,c){function d(c){c&&b.appendChild(na(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ma(f)&&!(pa(f)&&f.nodeType>0)?Gb($i(f)?Ib(f):f,d):d(f)}}function $i(a){if(a&&typeof a.length=="number")if(pa(a))return typeof a.item=="function"||typeof a.item=="string";else if(oa(a))return typeof a.item=="function";return!1}function aj(a){this.Th=a||v.document||document}function bj(a,b){return na(b)?a.Th.getElementById(b):b}
aj.prototype.Fg=function(){var a=this.Th,b=arguments,c=b[0],d=b[1];if(!Wi&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',tb(d.name),'"');if(d.type){c.push(' type="',tb(d.type),'"');var e={};pb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)na(d)?c.className=d:la(d)?Vi.apply(j,[c].concat(d)):Xi(c,d);b.length>2&&Zi(a,c,b);return c};aj.prototype.createElement=function(a){return this.Th.createElement(a)};aj.prototype.createTextNode=function(a){return this.Th.createTextNode(a)};
aj.prototype.appendChild=function(a,b){a.appendChild(b)};function cj(a,b){Mi.call(this,a,b)}Ca(cj,Mi);s=cj.prototype;s.qm=function(){this.yl=Ba();if(Si(this)){for(var a=bj(this.bd,"log"),b=a.scrollHeight-(a.scrollTop+a.offsetHeight)<=100,c=0;c<this.Og.length;c++){var d=this.bd.Fg("div","logmsg");d.innerHTML=this.Og[c];a.appendChild(d)}this.Og.length=0;this.vo();if(b)a.scrollTop=a.scrollHeight}};
s.$j=function(){if(Si(this)){var a=this.yb.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.ef+"</title><style>"+this.qj()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.ef+"</b></p><p>"+this.Xo+'</p><span id="clearbutton">clear</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(md?a.body:this.yb).onresize=Aa(this.vo,this);this.bd=new aj(a);bj(this.bd,"openbutton").onclick=Aa(this.zq,this);bj(this.bd,"closebutton").onclick=Aa(this.Yp,this);bj(this.bd,"clearbutton").onclick=Aa(this.Xp,this);Ui(this)}};
s.zq=function(){var a=bj(this.bd,"optionsarea");a.innerHTML="";for(var b=dj(),c=this.bd,d=0;d<b.length;d++){var e=G(b[d]),e=c.Fg("div",{},ej(this,"sel"+b[d],e.Ge?e.Ge.name:"INHERIT"),c.Fg("span",{},b[d]||"(root)"));a.appendChild(e)}bj(this.bd,"options").style.display="block";return!1};
function ej(a,b,c){for(var a=a.bd,b=a.Fg("select",{id:b}),d=0;d<dc.length;d++){var e=dc[d],f=a.Fg("option",{},e.name);if(c==e.name)f.selected=!0;b.appendChild(f)}b.appendChild(a.Fg("option",{selected:c=="INHERIT"},"INHERIT"));return b}s.Yp=function(){bj(this.bd,"options").style.display="none";for(var a=dj(),b=this.bd,c=0;c<a.length;c++){var d=G(a[c]),e=bj(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;e=="INHERIT"?d.Fj(j):d.Fj(fc(e))}return!1};
s.vo=function(){var a=this.bd,b=bj(a,"log"),c=bj(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.Th.body.offsetHeight-c.offsetHeight-(md?4:0)+"px"};function dj(){var a=nb(ic);a.sort();return a}s.qj=function(){return cj.sg.qj.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:medium monospace;}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};function fj(){this.y=this.x=j;this.index=-1;arguments.length==0?this.y=this.x=0:arguments.length==2?(this.x=arguments[0],this.y=arguments[1]):arguments.length==3?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.Vh=[]}s=fj.prototype;s.set=function(a,b){this.x=a;this.y=b};s.add=function(a){this.x+=a.x;this.y+=a.y};s.sub=function(a){this.x-=a.x;this.y-=a.y};s.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
s.k=function(a){return this.x==a.x&&this.y==a.y};function gj(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function hj(){this.Lb=this.bb=j;arguments.length==2?arguments[0].y>arguments[1].y?(this.Lb=arguments[0],this.bb=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.Lb=arguments[0],this.bb=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.bb=arguments[0],this.Lb=arguments[1]):(this.bb=arguments[0],this.Lb=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.Lb.Vh.push(this)}
function ij(a,b,c){this.e=[j,j,j];this.Sa=[j,j,j];this.An=!1;this.Ja=[!1,!1,!1];this.Na=[!1,!1,!1];arguments.length==3&&(this.e[0]=a,this.e[1]=b,this.e[2]=c)}s=ij.prototype;s.Pd=function(a){return this.e[a]};s.ik=function(){for(var a=!0,b=0;b<arguments.length;++b)a=a&&(arguments[b].k(this.e[0])||arguments[b].k(this.e[1])||arguments[b].k(this.e[2]));return a};s.Bm=function(){if(arguments.length!=0)this.An=arguments[0];return this.An};
s.td=function(){var a;if(arguments.length==3){var b=arguments[0],c=arguments[1];a=arguments[2];b.k(this.e[2])&&c.k(this.e[1])||b.k(this.e[1])&&c.k(this.e[2])?this.Sa[0]=a:b.k(this.e[0])&&c.k(this.e[2])||b.k(this.e[2])&&c.k(this.e[0])?this.Sa[1]=a:b.k(this.e[0])&&c.k(this.e[1])||b.k(this.e[1])&&c.k(this.e[0])?this.Sa[2]=a:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else arguments.length==1?(a=arguments[0],a.ik(this.e[1],this.e[2])?(this.Sa[0]=a,a.td(this.e[1],this.e[2],this)):a.ik(this.e[0],
this.e[2])?(this.Sa[1]=a,a.td(this.e[0],this.e[2],this)):a.ik(this.e[0],this.e[1])&&(this.Sa[2]=a,a.td(this.e[0],this.e[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function jj(a){a.Sa[0]=j;a.Sa[1]=j;a.Sa[2]=j}function kj(a){a.Na[0]=!1;a.Na[1]=!1;a.Na[2]=!1}function lj(a,b){return b.k(a.e[0])?a.e[2]:b.k(a.e[1])?a.e[0]:b.k(a.e[2])?a.e[1]:j}function mj(a,b){return b.k(a.e[0])?a.e[1]:b.k(a.e[1])?a.e[2]:b.k(a.e[2])?a.e[0]:j}
function nj(a,b){return b.k(a.e[0])?a.Sa[1]:b.k(a.e[1])?a.Sa[2]:a.Sa[0]}function oj(a,b){return b.k(a.e[0])?a.Sa[2]:b.k(a.e[1])?a.Sa[0]:a.Sa[1]}function pj(a,b){return b.k(a.e[0])?a.Ja[1]:b.k(a.e[1])?a.Ja[2]:a.Ja[0]}function qj(a,b){return b.k(a.e[0])?a.Ja[2]:b.k(a.e[1])?a.Ja[0]:a.Ja[1]}function rj(a,b,c){b.k(a.e[0])?a.Ja[1]=c:b.k(a.e[1])?a.Ja[2]=c:a.Ja[0]=c}function sj(a,b,c){b.k(a.e[0])?a.Ja[2]=c:b.k(a.e[1])?a.Ja[0]=c:a.Ja[1]=c}
function tj(a,b){return b.k(a.e[0])?a.Na[1]:b.k(a.e[1])?a.Na[2]:a.Na[0]}function uj(a,b){return b.k(a.e[0])?a.Na[2]:b.k(a.e[1])?a.Na[0]:a.Na[1]}function vj(a,b,c){b.k(a.e[0])?a.Na[1]=c:b.k(a.e[1])?a.Na[2]=c:a.Na[0]=c}function wj(a,b,c){b.k(a.e[0])?a.Na[2]=c:b.k(a.e[1])?a.Na[0]=c:a.Na[1]=c}function xj(a,b){return b.k(a.e[0])?a.Sa[0]:b.k(a.e[1])?a.Sa[1]:a.Sa[2]}
s.qk=function(){if(arguments.length==1)this.qk(this.e[0],arguments[0]);else if(arguments.length==2){var a=arguments[0],b=arguments[1];a.k(this.e[0])?(this.e[1]=this.e[0],this.e[0]=this.e[2],this.e[2]=b):a.k(this.e[1])?(this.e[2]=this.e[1],this.e[1]=this.e[0],this.e[0]=b):a.k(this.e[2])?(this.e[0]=this.e[2],this.e[2]=this.e[1],this.e[1]=b):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function yj(a,b,c){if(b.k(a.e[0]))if(c.k(a.e[1]))return 2;else{if(c.k(a.e[2]))return 1}else if(b.k(a.e[1]))if(c.k(a.e[2]))return 0;else{if(c.k(a.e[0]))return 2}else if(b.k(a.e[2]))if(c.k(a.e[0]))return 1;else if(c.k(a.e[1]))return 0;return-1}
s.hh=function(){if(arguments.length==1)typeof arguments[0]=="number"?this.Ja[arguments[0]]=!0:this.hh(arguments[0].bb,arguments[0].Lb);else if(arguments.length==2){var a=arguments[0],b=arguments[1];if(b.k(this.e[0])&&a.k(this.e[1])||b.k(this.e[1])&&a.k(this.e[0]))this.Ja[2]=!0;else if(b.k(this.e[0])&&a.k(this.e[2])||b.k(this.e[2])&&a.k(this.e[0]))this.Ja[1]=!0;else if(b.k(this.e[1])&&a.k(this.e[2])||b.k(this.e[2])&&a.k(this.e[1]))this.Ja[0]=!0}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var zj=3*Math.PI/4,Aj=Math.PI/2;function Bj(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return a>-1.0E-16&&a<1.0E-16?0:a>0?-1:1}function Cj(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;if(f*(b.y-d)-(b.x-e)*a<=1.0E-16)return!1;if((c.x-e)*a-f*(c.y-d)<=1.0E-16)return!1;return!0}
function Dj(){this.I=this.next=this.rf=this.h=j;this.value=0;arguments.length==1?(this.h=arguments[0],this.value=this.h.x):arguments.length==2?(this.h=arguments[0],this.rf=arguments[1],this.value=this.h.x):alert("Invalid poly2tri.Node constructor call!")}function Ej(a,b){this.Zh=a;this.Xl=b;this.oi=a}Ej.prototype.tk=function(a){var b=this.oi;if(a<b.value)for(;(b=b.I)!=j;){if(a>=b.value)return this.oi=b}else for(;(b=b.next)!=j;)if(a<b.value)return this.oi=b.I;return j};
function Fj(){this.Uc=this.Ad=this.Fe=j;this.width=0;this.zl=!1}Fj.prototype.hk=function(){this.Uc=this.Ad=this.Fe=j;this.width=0;this.zl=!1};function Gj(){this.Ja=j;this.right=!1}function Hj(a){this.No=[];this.fd=[];this.e=a;this.Vh=[];this.nr=this.mr=this.lr=this.Xl=this.Zh=this.Xh=j;this.ga=new Fj;this.Uh=new Gj;Ij(this,this.e)}function Ij(a,b){for(var c=0;c<b.length;++c)a.Vh.push(new hj(b[c],b[(c+1)%b.length]))}Hj.prototype.Pd=function(a){return this.e[a]};Hj.prototype.tk=function(a){return this.Xh.tk(a.x)};
function Jj(a,b){for(var c=0;c<3;++c)if(b.Sa[c]==j){var d;a:{d=a.Xh;var e=lj(b,b.Pd(c)),f=e.x,g=d.oi,i=g.h.x;if(f==i)if(e.k(g.I.h))g=g.I;else if(e.k(g.next.h))g=g.next;else{if(!e.k(g.h)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=j;break a}}else if(f<i)for(;(g=g.I)!=j;){if(e.k(g.h))break}else for(;(g=g.next)!=j;)if(e.k(g.h))break;if(g!=j)d.oi=g;d=g}if(d!=j)d.rf=b}}function Kj(a,b){if(b!=j&&!b.Bm()){b.Bm(!0);a.No.push(b);for(var c=0;c<3;++c)b.Ja[c]||Kj(a,b.Sa[c])}}
function Lj(){var a;if(arguments.length==3){a=arguments[0];var b=arguments[1],c=arguments[2];a.Uh.Ja=b;a.Uh.right=b.bb.x>b.Lb.x;if(!Mj(c.rf,b.bb,b.Lb)){var d=a;if(d.Uh.right)for(var e=c;e.next.h.x<b.bb.x;)Bj(b.Lb,e.next.h,b.bb)==-1?Nj(d,b,e):e=e.next;else for(e=c;e.I.h.x>b.bb.x;)Bj(b.Lb,e.I.h,b.bb)==1?Oj(d,b,e):e=e.I;Lj(a,b.bb,b.Lb,c.rf,b.Lb)}}else if(arguments.length==5){if(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],!Mj(d,b,c)){var f=mj(d,e),f=Bj(c,f,b);if(f==0)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var g=lj(d,e),g=Bj(c,g,b);g==0?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):f==g?(d=f==1?oj(d,e):nj(d,e),Lj(a,b,c,d,e)):Pj(a,b,c,d,e)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function Mj(a,b,c){var d=yj(a,b,c);if(d!=-1)return a.hh(d),a=a.Sa[d],a!=j&&a.hh(b,c),!0;return!1}function Qj(a,b){var c=new ij(b.I.h,b.h,b.next.h);c.td(b.I.rf);c.td(b.rf);a.fd.push(c);b.I.next=b.next;b.next.I=b.I;Rj(a,c)||Jj(a,c)}
function Sj(a){var b=a.next.h.x-a.h.x,c=a.next.h.y-a.h.y,d=a.I.h.x-a.h.x,a=a.I.h.y-a.h.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function Rj(a,b){for(var c=0;c<3;++c)if(!b.Na[c]){var d=b.Sa[c];if(d!=j){var e=b.Pd(c),f=lj(d,lj(b,e)),g=f.k(d.e[0])?0:f.k(d.e[1])?1:f.k(d.e[2])?2:-1;if(d.Ja[g]||d.Na[g])b.Ja[c]=d.Ja[g];else{var i;var k=mj(b,e),l=lj(b,e);i=e.x-f.x;var m=e.y-f.y,p=k.x-f.x,k=k.y-f.y,o=i*k-p*m;if(o<=0)i=!1;else{var r=l.x-f.x,l=l.y-f.y,t=r*m-i*l;i=t<=0?!1:(i*i+m*m)*(p*l-r*k)+(p*p+k*k)*t+(r*r+l*l)*o>0}if(i)return b.Na[c]=!0,d.Na[g]=!0,Tj(b,e,d,f),(e=!Rj(a,b))&&Jj(a,b),(e=!Rj(a,d))&&Jj(a,d),b.Na[c]=!1,d.Na[g]=!1,!0}}}return!1}
function Tj(a,b,c,d){var e,f,g,i;e=oj(a,b);f=nj(a,b);g=oj(c,d);i=nj(c,d);var k,l,m,p;k=qj(a,b);l=pj(a,b);m=qj(c,d);p=pj(c,d);var o,r,t,u;o=uj(a,b);r=tj(a,b);t=uj(c,d);u=tj(c,d);a.qk(b,d);c.qk(d,b);wj(c,b,o);vj(a,b,r);wj(a,d,t);vj(c,d,u);sj(c,b,k);rj(a,b,l);sj(a,d,m);rj(c,d,p);jj(a);jj(c);e&&c.td(e);f&&a.td(f);g&&a.td(g);i&&c.td(i);a.td(c)}
function Uj(a,b){var c;c=a.ga.width>(a.ga.zl?a.ga.Fe.h.y-b.h.y:a.ga.Uc.h.y-b.h.y)?!0:!1;if(!c&&(Qj(a,b),!(b.I==a.ga.Fe&&b.next==a.ga.Uc))){if(b.I==a.ga.Fe){c=Bj(b.h,b.next.h,b.next.next.h);if(c==1)return;b=b.next}else if(b.next==a.ga.Uc){c=Bj(b.h,b.I.h,b.I.I.h);if(c==-1)return;b=b.I}else b=b.I.h.y<b.next.h.y?b.I:b.next;Uj(a,b)}}function Nj(a,b,c){c.h.x<b.bb.x&&(Bj(c.h,c.next.h,c.next.next.h)==-1?Vj(a,b,c):(Wj(a,b,c),Nj(a,b,c)))}
function Vj(a,b,c){Qj(a,c.next);c.next.h!=b.bb&&Bj(b.Lb,c.next.h,b.bb)==-1&&Bj(c.h,c.next.h,c.next.next.h)==-1&&Vj(a,b,c)}function Wj(a,b,c){Bj(c.next.h,c.next.next.h,c.next.next.next.h)==-1?Vj(a,b,c.next):Bj(b.Lb,c.next.next.h,b.bb)==-1&&Wj(a,b,c.next)}function Oj(a,b,c){c.h.x>b.bb.x&&(Bj(c.h,c.I.h,c.I.I.h)==1?Xj(a,b,c):(Yj(a,b,c),Oj(a,b,c)))}function Yj(a,b,c){Bj(c.I.h,c.I.I.h,c.I.I.I.h)==1?Xj(a,b,c.I):Bj(b.Lb,c.I.I.h,b.bb)==1&&Yj(a,b,c.I)}
function Xj(a,b,c){Qj(a,c.I);c.I.h!=b.bb&&Bj(b.Lb,c.I.h,b.bb)==1&&Bj(c.h,c.I.h,c.I.I.h)==1&&Xj(a,b,c)}
function Pj(a,b,c,d,e){var f=xj(d,e);if(f==j)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=lj(f,lj(d,e));Cj(e,mj(d,e),lj(d,e),g)?(Tj(d,e,f,g),Jj(a,d),Jj(a,f),e==c&&g==b?c==a.Uh.Ja.Lb&&b==a.Uh.Ja.bb&&(d.hh(b,c),f.hh(b,c),Rj(a,d),Rj(a,f)):(Bj(c,g,b)==-1?(g=yj(f,e,g),f.Na[g]=!0,Rj(a,f),kj(f)):(g=yj(d,e,g),d.Na[g]=!0,Rj(a,d),kj(d),d=f),Pj(a,b,c,d,e))):(g=Zj(b,c,f,g),$j(a,b,c,d,f,g),Lj(a,b,c,d,e))}}
function Zj(a,b,c,d){a=Bj(b,d,a);if(a==1)return mj(c,d);else if(a==-1)return lj(c,d);else alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function $j(a,b,c,d,e,f){var g=xj(e,f);g==j?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=lj(g,lj(e,f)),Cj(c,mj(d,c),lj(d,c),e)?Pj(a,c,e,g,e):(e=Zj(b,c,g,e),$j(a,b,c,d,g,e)))};function ak(){this.name="ogVector";this.type=Sa;this.ed="";this.options=this.Ma=this.Bb=j;this.Od=[];this.Od.B=[0,0,0];this.hf=this.ab=-1;this.color=[1,1,1,1];this.Kc=[1,1,1,1];this.Sq="unknown";this.Cq=this.Gn=10;this.On=-1E3;this.Nn=9E3}ak.prototype=new E;s=ak.prototype;s.Pa=function(a){a.dynamic?this.Mb(a.data):w(a.url)&&a.type=="GeoJSON"&&bk(this,a.url)};s.jb=function(){ck(this).Pi(this.ab)};function ck(a){var b=j,a=a.parent.parent.c;if(a.d&&a.d.l)b=a.d.l.$l;return b}s.qa=n();s.ra=n();
s.Gk=function(){this.Q.readyState==4&&(this.Q.status==404?this.Ma&&this.Ma(this.id):this.Mb(Hc(this.Q.responseText)))};
function dk(a,b,c,d){var e={fi:!1,Sh:0,Pc:[0,0,0],Bq:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],i=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],k=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],l=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],m=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],p=g*k-i*i;p<1.0E-14?(e.fi=!0,f=0,g=i>k?l/i:m/k):(f=(i*m-k*l)/p,g=(g*m-i*l)/p);e.Pc=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.Bq=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function ek(a,b,c,d,e,f,g,i,k,l,m){l.push(b[0]);l.push(b[1]);l.push(b[2]);b=a;a++;l.push(f[0]);l.push(f[1]);l.push(f[2]);f=a;a++;l.push(e[0]);l.push(e[1]);l.push(e[2]);e=a;a++;l.push(k[0]);l.push(k[1]);l.push(k[2]);k=a;a++;l.push(c[0]);l.push(c[1]);l.push(c[2]);c=a;a++;l.push(g[0]);l.push(g[1]);l.push(g[2]);g=a;a++;l.push(d[0]);l.push(d[1]);l.push(d[2]);d=a;a++;l.push(i[0]);l.push(i[1]);l.push(i[2]);i=a;a++;m.push(c);m.push(g);m.push(d);m.push(g);m.push(i);m.push(d);m.push(b);m.push(e);m.push(f);
m.push(f);m.push(e);m.push(k);m.push(b);m.push(f);m.push(c);m.push(f);m.push(g);m.push(c);m.push(e);m.push(d);m.push(i);m.push(k);m.push(e);m.push(i);m.push(b);m.push(c);m.push(e);m.push(c);m.push(d);m.push(e);m.push(f);m.push(i);m.push(g);m.push(f);m.push(k);m.push(i);return a}
function fk(a,b,c){var d={VertexSemantic:"",Vertices:j,IndexSemantic:"",Indices:j,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new M(a.parent.parent.c);b.Mb(d,j,j,b);a.color.length==4?b.uc.n(a.color[0],a.color[1],a.color[2],a.color[3]):a.color.length==3&&b.uc.n(a.color[0],a.color[1],a.color[2],1);return b}
s.Mb=function(a){ai("CreateFromJSONObject");var b=!1;if(a.type=="FeatureCollection"&&(ai("[GeoJSON Parser] type = FeatureCollection"),w(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(w(a[d].type)&&a[d].type=="Feature"&&w(a[d].properties)&&w(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;if(w(e.id))this.Sq=e.id;if(w(e.color))this.color=e.color;if(w(e.highlightcolor))this.Kc=e.highlightcolor;if(w(e.linewidth))this.Gn=e.linewidth;if(w(e.pointsize))this.Cq=e.pointsize;if(w(e.minelv))this.On=
e.minelv;if(w(e.maxelv))this.Nn=e.maxelv;if(w(f.type))if(e=f.type,e=="LineString")w(f.coordinates&&la(f.coordinates))&&(b=gk(this,f.coordinates));else if(e=="MultiLineString"){if(w(f.coordinates&&la(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)gk(this,f[e])&&(b=!0)}}else if(e=="Polygon"){if(w(f.coordinates&&la(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],i=[];new Q;var k=b.length;if(k==0)b=!1;else{if(k>=1){for(var l=0;l<k;l++)if(l==0)for(var m=0;m<b[l].length;m++)g.push(new fj(b[l][m][0],
b[l][m][1],e)),i.push([b[l][m][0],b[l][m][1]]),e++;else{for(var p=[],m=0;m<b[l].length;m++)p.push(new fj(b[l][m][0],b[l][m][1]),e),i.push([b[l][m][0],b[l][m][1]]),e++;f.push(p)}b=new Hj(g);e=h;for(e in f)for(k in g=b,i=f[e],Ij(g,i),k=h,i)g.e.push(i[k]);e=f=b;g=e.e[0].x;i=e.e[0].x;l=e.e[0].y;k=e.e[0].y;m=h;for(m in e.e){p=e.e[m];if(p.x>g)g=p.x;if(p.x<i)i=p.x;if(p.y>l)l=p.y;if(p.y<k)k=p.y}l=0.3*(l-k);e.Zh=new fj(g+0.3*(g-i),k-l);e.Xl=new fj(i-l,k-l);e.e.sort(gj);e=f;k=i=g=h;k=new ij(e.e[0],e.Xl,e.Zh);
e.fd.push(k);g=new Dj(k.Pd(1),k);i=new Dj(k.Pd(0),k);k=new Dj(k.Pd(2));e.Xh=new Ej(g,k);g.next=i;i.next=k;i.I=g;k.I=i;e=f;for(g=1;g<e.e.length;++g){var i=e.Pd(g),k=e,l=i,m=k.tk(l),p=k,o=l,r=m,t=new ij(o,r.h,r.next.h);t.td(r.rf);p.fd.push(t);o=new Dj(o);o.next=r.next;o.I=r;r.next.I=o;r.next=o;Rj(p,t)||Jj(p,t);p=o;l.x<=m.h.x+1.0E-16&&Qj(k,m);l=p;m=l.next;for(r=h;m.next!=j;){r=Sj(m);if(r>Aj||r<-Aj)break;Qj(k,m);m=m.next}for(m=l.I;m.I!=j;){r=Sj(m);if(r>Aj||r<-Aj)break;Qj(k,m);m=m.I}if(l.next!=j&&l.next.next!=
j&&(r=Math.atan2(l.h.y-l.next.next.h.y,l.h.x-l.next.next.h.x),r<zj)){k.ga.Fe=Bj(l.h,l.next.h,l.next.next.h)==-1?l.next.next:l.next;for(k.ga.Ad=k.ga.Fe;k.ga.Ad.next!=j&&k.ga.Ad.h.y>=k.ga.Ad.next.h.y;)k.ga.Ad=k.ga.Ad.next;if(k.ga.Ad!=k.ga.Fe){for(k.ga.Uc=k.ga.Ad;k.ga.Uc.next!=j&&k.ga.Uc.h.y<k.ga.Uc.next.h.y;)k.ga.Uc=k.ga.Uc.next;if(k.ga.Uc!=k.ga.Ad)k.ga.width=k.ga.Uc.h.x-k.ga.Fe.h.x,k.ga.zl=k.ga.Fe.h.y>k.ga.Uc.h.y,Uj(k,k.ga.Ad)}}k=p;for(l=0;l<i.Vh.length;++l)Lj(e,i.Vh[l],k)}e=f.Xh.Zh.next.rf;for(g=
f.Xh.Zh.next.h;!pj(e,g);)e=oj(e,g);Kj(f,e);b=b.No;f=[];for(e=0;e<b.length;e++)g=b[e].Pd(1).index,i=b[e].Pd(2).index,f.push(b[e].Pd(0).index),f.push(g),f.push(i)}b=!0}}}else e=="MultiPolygon"?bi("MultiPolygon is not yet supported"):e=="Point"?bi("Point is not yet supported"):e=="MultiPoint"&&bi("MultiPoint is not yet supported")}if(b)this.ab=ck(this).rm(this.Od)};function hk(a,b){for(var c=0;c<a.length;c+=3)a[c+0]-=b[0],a[c+1]-=b[1],a[c+2]-=b[2]}
function bk(a,b){b==j?alert("invalid json-url"):(a.ed=b,a.Q=new window.XMLHttpRequest,a.Q.open("GET",a.ed,!0),a.Q.onreadystatechange=function(){a.Gk()},a.Q.send())}
function gk(a,b){var c=new Q,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(g>1)for(var i=0;i<g;i++){var k=b[i][0],l=b[i][1];c.n(k,l,a.Nn);c.$(d);c.n(k,l,a.On);c.$(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return!1;g=f.length;for(k=e=d=c=0;k<f.length;k++)c+=f[k][0]/g,d+=f[k][1]/g,e+=f[k][2]/g;a.Od.B[0]=c;a.Od.B[1]=d;a.Od.B[2]=e;var g=[],k=[],m=0.5*a.Gn*H,l=0,p,o,r,t,u,z,y,A,T,ka,V,W,N,Z,$,aa,xa,ya,za;if(f.length==4){i=f[0];p=f[1];o=f[2];r=f[3];var I=o[0]-i[0],ea=o[1]-i[1],ra=o[2]-i[2],fa=
p[0]-i[0],ta=p[1]-i[1],ia=p[2]-i[2],f=ea*ia-ra*ta;N=ra*fa-I*ia;l=I*ta-ea*fa;I=m/Math.sqrt(f*f+N*N+l*l);f*=I;N*=I;l*=I;z=[i[0]+f,i[1]+N,i[2]+l];y=[p[0]+f,p[1]+N,p[2]+l];A=[o[0]+f,o[1]+N,o[2]+l];T=[r[0]+f,r[1]+N,r[2]+l];ka=[i[0]-f,i[1]-N,i[2]-l];V=[p[0]-f,p[1]-N,p[2]-l];W=[o[0]-f,o[1]-N,o[2]-l];N=[r[0]-f,r[1]-N,r[2]-l];ek(0,z,ka,W,A,y,V,N,T,k,g);hk(k,[c,d,e]);a.Od.push(fk(a,k,g))}else if(f.length>=6){i=f[0];p=f[1];o=f[2];r=f[3];t=f[4];u=f[5];I=o[0]-i[0];ea=o[1]-i[1];ra=o[2]-i[2];fa=p[0]-i[0];ta=p[1]-
i[1];ia=p[2]-i[2];Z=ea*ia-ra*ta;$=ra*fa-I*ia;aa=I*ta-ea*fa;I=m/Math.sqrt(Z*Z+$*$+aa*aa);Z*=I;$*=I;aa*=I;z=[i[0]+Z,i[1]+$,i[2]+aa];y=[p[0]+Z,p[1]+$,p[2]+aa];ka=[i[0]-Z,i[1]-$,i[2]-aa];V=[p[0]-Z,p[1]-$,p[2]-aa];for(i=4;i<f.length;i+=2)t=f[i],u=f[i+1],I=t[0]-o[0],ea=t[1]-o[1],ra=t[2]-o[2],fa=r[0]-o[0],ta=r[1]-o[1],ia=r[2]-o[2],xa=ea*ia-ra*ta,ya=ra*fa-I*ia,za=I*ta-ea*fa,I=m/Math.sqrt(xa*xa+ya*ya+za*za),xa*=I,ya*=I,za*=I,fa=r[0]-p[0],ta=r[1]-p[1],ia=r[2]-p[2],T=Math.sqrt(fa*fa+ta*ta+ia*ia),fa/=T,ta/=T,
ia/=T,I=r[0]-u[0],ea=r[1]-u[1],ra=r[2]-u[2],T=Math.sqrt(I*I+ea*ea+ra*ra),I/=T,ea/=T,W=[u[0]+xa,u[1]+ya,u[2]+za],p=[u[0]-xa,u[1]-ya,u[2]-za],N=[t[0]+xa,t[1]+ya,t[2]+za],A=[t[0]-xa,t[1]-ya,t[2]-za],T=dk([y[0],y[1],y[2]],[y[0]+fa,y[1]+ta,y[2]+ia],[W[0],W[1],W[2]],[W[0]+I,W[1]+ea,W[2]+ia]),W=dk([V[0],V[1],V[2]],[V[0]+fa,V[1]+ta,V[2]+ia],[p[0],p[1],W[2]],[p[0]+I,p[1]+ea,p[2]+ia]),p=dk([z[0],z[1],z[2]],[z[0]+fa,z[1]+ta,z[2]+ia],[N[0],N[1],N[2]],[N[0]+I,N[1]+ea,N[2]+ia]),I=dk([ka[0],ka[1],ka[2]],[ka[0]+
fa,ka[1]+ta,ka[2]+ia],[A[0],A[1],A[2]],[A[0]+I,A[1]+ea,A[2]+ia]),!T.fi&&!W.fi&&!p.fi&&!I.fi?(T=[T.Pc[0],T.Pc[1],T.Pc[2]],N=[W.Pc[0],W.Pc[1],W.Pc[2]],A=[p.Pc[0],p.Pc[1],p.Pc[2]],W=[I.Pc[0],I.Pc[1],I.Pc[2]]):(T=[r[0]+Z,r[1]+$,r[2]+aa],N=[r[0]-Z,r[1]-$,r[2]-aa],A=[o[0]+Z,o[1]+$,o[2]+aa],W=[o[0]-Z,o[1]-$,o[2]-aa]),l=ek(l,z,ka,W,A,y,V,N,T,k,g),Z=xa,$=ya,aa=za,p=r,o=t,r=u,y=T,V=N,z=A,ka=W;f=[u[0]+Z,u[1]+$,u[2]+aa];m=[u[0]-Z,u[1]-$,u[2]-aa];i=[t[0]+Z,t[1]+$,t[2]+aa];o=[t[0]-Z,t[1]-$,t[2]-aa];ek(l,A,W,o,
i,T,N,m,f,k,g);hk(k,[c,d,e]);a.Od.push(fk(a,k,g))}else return!1;return!0};function ik(){this.name="ogAoeImageLayer";this.type=ab;this.P=!1;this.Yb=[];this.Yd=""}ik.prototype=new E;s=ik.prototype;s.Pa=function(a){if(a.name)this.Yd=a.name};s.jb=function(){for(var a=0;a<this.Yb.length;a++){for(var b=a;b<this.Yb.length;b++)this.Yb[a].ab-=1;F(this.Yb[a])}};s.qa=function(){this.P=!0;for(var a=0;a<this.Yb.length;a++)this.Yb[a].qa()};s.ra=function(){this.P=!1;for(var a=0;a<this.Yb.length;a++)this.Yb[a].ra()};s.ak=function(a){this.Yb.push(a);a.hf=this.id};
s.wk=function(a){for(var b=0;b<this.Yb.length;b++)if(this.Yb[b]==a){for(var c=b+1;c<this.Yb.length;c++)this.Yb[c].ab-=1;F(this.Yb[b]);this.Yb.splice(b,1)}};function jk(){this.name="ogVectorLayer";this.type=La;this.P=!1;this.xa=[];this.Yd=""}jk.prototype=new E;s=jk.prototype;s.Pa=function(a){if(a.name)this.Yd=a.name};function kk(a,b){var c=X(Sa,a.parent.parent,b);a.xa.push(c);c.Yq=a;return c}s.Pi=function(a){for(var b=0;b<this.xa.length;b++)this.xa[b]==a&&(F(this.xa[b]),this.xa.splice(b,1))};s.jb=function(){lk(this)};s.qa=function(){this.P=!0;for(var a=0;a<this.xa.length;a++)this.xa[a].qa()};s.ra=function(){this.P=!1;for(var a=0;a<this.xa.length;a++)this.xa[a].ra()};
function lk(a){for(var b=0;b<a.xa.length;b++){for(var c=b;c<a.xa.length;c++)a.xa[b].ab-=1;F(a.xa[b])}}s.rm=function(a){this.xa.push(a);a.hf=this.id};s.Pi=function(a){for(var b=0;b<this.xa.length;b++)if(this.xa[b]==a){for(var c=b+1;c<this.xa.length;c++)this.xa[c].ab-=1;F(this.xa[b]);this.xa.splice(b,1)}};function mk(){this.name="ogImageLayer";this.type=Ea;this.Lc=-1}mk.prototype=new E;mk.prototype.sd=function(){var a=j,b=this.parent.parent.parent.c;if(b.d&&b.d.l)a=b.d.l.oa;return a};mk.prototype.ek=function(a){var b=this.sd();if(b)this.Lc=b.ek(a)};mk.prototype.zk=function(){var a=this.sd();a&&this.Lc!=-1&&a.zk(this.Lc)};mk.prototype.Pa=function(a){this.ek(a)};function nk(){this.name="ogBillboardLayer";this.type=$a;this.P=!1;this.fb=[];this.Yd=""}nk.prototype=new E;s=nk.prototype;s.Pa=function(a){if(a.name)this.Yd=a.name};s.jb=function(){for(var a=0;a<this.fb.length;a++)F(this.fb[a])};s.qa=function(){this.P=!0;for(var a=0;a<this.fb.length;a++)this.fb[a].qa()};s.ra=function(){this.P=!1;for(var a=0;a<this.fb.length;a++)this.fb[a].ra()};s.xk=function(a){for(var b=0;b<this.fb.length;b++)this.fb[b]==a&&(F(this.fb[b]),this.fb.splice(b,1))};s.bk=function(a){this.fb.push(a)};function ok(){this.name="ogPointSpriteObject";this.type=cb;this.$b=this.options=this.Jd=j;this.zj=this.ij=0}ok.prototype=new E;s=ok.prototype;s.Pa=function(a){this.options=a;this.Jd=new bd(this.parent.parent.parent.c);a.Vertices&&this.Jd.Bg(a.Vertices);if(a.PointUrl)pk(this,a.PointUrl),this.wq=a.NumberOfPoints,this.Jd.Uj=this.wq;this.Jd.oh(a.Center[0],a.Center[1],a.Center[2])};s.jb=function(){if(this.Jd)this.Jd.o(),this.Jd=j,this.status=3};s.qa=function(){this.Jd.P=!0};s.We=n();
s.ra=function(){this.Jd.P=!1};function pk(a,b){b==j?alert("invalid xyzurl"):(a.$q=b,a.Q=new window.XMLHttpRequest,a.Q.open("GET",a.$q,!0),a.Q.onreadystatechange=function(){a.Q.readyState==4&&(a.Q.status==404?alert("xyz-file not found..."):qk(a))},a.Q.onprogress=function(){qk(a)},a.Q.send(),a.ij=0,a.zj=0)}
function qk(a){var b=a.Q.responseText;a.ij=b.lastIndexOf("\n");for(var b=b.substr(a.zj,a.ij-a.zj-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.Jd.Bg(c);a.zj=a.ij};function rk(){this.name="ogGeometryLayer";this.type=Ia;this.P=!1;this.N=[];this.yo=!1;this.Yd=""}rk.prototype=new E;s=rk.prototype;s.Pa=function(a){if(a.name)this.Yd=a.name;a.type=="static"?this.yo=!0:this.dk(a)};s.jb=function(){this.Ni()};s.qa=function(){this.P=!0;for(var a=0;a<this.N.length;a++)this.N[a].qa()};s.ra=function(){this.P=!1;for(var a=0;a<this.N.length;a++)this.N[a].ra()};s.Ni=function(){for(var a=0;a<this.N.length;a++){for(var b=a;b<this.N.length;b++)this.N[a].ab-=1;F(this.N[a])}};
s.rd=function(a){this.N.push(a);a.hf=this.id};s.Mi=function(a){for(var b=0;b<this.N.length;b++)if(this.N[b]==a){for(var c=b+1;c<this.N.length;c++)this.N[c].ab-=1;F(this.N[b]);this.N.splice(b,1)}};s.sd=function(){var a=j,b=this.parent.parent.parent.c;if(b.d&&b.d.l)a=b.d.l.oa;return a};s.dk=function(a){var b=this.sd();if(b)this.Lc=b.dk(a)};s.Ni=function(){if(!this.yo){var a=this.sd();a&&this.Lc!=-1&&a.Ni(this.Lc)}};function sk(){this.name="ogSurface";this.type=Ra;this.Tr=this.Gr=!1;this.elevation=this.latitude=this.longitude=0;this.status=kb;this.u=j;this.elevation=this.latitude=this.longitude=0}sk.prototype=new E;s=sk.prototype;s.We=function(a,b,c,d,e,f){this.longitude=a;this.latitude=b;this.elevation=c;this.u.oh(a,b,c,d,e,f)};
s.rh=function(a,b,c,d){this.longitude=a;this.latitude=b;this.elevation=c;var e=this.u;e.oc=a;e.nc=b;e.lc=c;var f=new Q(a,b,c),c=Array(3);f.$(c);f=new L;f.ge(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new L;c.Qd(a);a=new L;a.Qd([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Ye();b=new L;b.wg(d[0],d[1],d[2],d[3]);b.Ye();f=new L;f.ba(a,b);d=new L;d.ba(a,f);b=new L;
b.Qd([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Ye();a=new L;a.ba(b,d);d=new L;d.ba(c,a);c=new L;c.me(H,H,H);a=new L;a.ba(d,c);e.va=a;Uc(e)};s.Nb=function(a,b,c){this.u.Nb(a,b,c)};s.Df=function(a,b,c){this.u.Df(a,b,c)};
s.Pa=function(a){if(a==j)hc(G("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==j)hc(G("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Qa)hc(G("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.u=new M(this.parent.parent.parent.parent.c);this.u.P=!1;this.u.xq=this.id;var b=this;this.u.Mb(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.We(b.longitude,b.latitude,b.elevation);b.status=jb;b.F&&b.F(b.id)},function(){b.status=
3;b.D&&b.D(b.id)});this.ed=a.url;this.u.So=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*H:5E4*H}this.longitude=a.jsonobject.Center[0];this.latitude=a.jsonobject.Center[1];this.elevation=a.jsonobject.Center[2]}};s.jb=function(){if(this.u)this.u.o(),this.u=j,this.status=3};s.ra=function(){if(this.u)this.u.P=!1};s.qa=function(){if(this.u)this.u.P=!0};s.Cf=function(a,b,c,d){this.u&&this.u.Cf(a,b,c,d)};var tk=-1;function X(a,b,c){var d=j;a==B?d=new oi:a==C?d=new qi:a==Da?d=new pi:a==Ea?d=new mk:a==Fa?d=new wi:a!=Ga&&(a==Ha?d=new ui:a==Ia?d=new rk:a==Ja?d=new xi:a!=Ka&&a!=Ma&&(a==Na?d=new lc:a==Ya?d=new si:a!=Oa&&(a==Pa?d=new Hg:a==Qa?d=new Di:a==Ra?d=new sk:a==Ta?d=new sc:a!=Ua&&a!=Va&&a!=Wa&&a!=Xa&&(a==Za?d=new Bi:a==$a?d=new nk:a==ab?d=new ik:a==bb?d=new Ve:a==cb?d=new ok:a==db?d=new zi:a==La?d=new jk:a==Sa&&(d=new ak)))));if(d!=j)tk++,d.id=tk,d.parent=b,lb.push(d),d.Pa(c);return d}
x("_CreateObject",X);x("ogGetObjectType",function(a){return(a=D(a))?a.type:eb});x("ogGetObjectName",function(a){return(a=D(a))?a.name:""});
x("ogGetObjectPosition",function(a){var a=D(a),b={};if(a)switch(a.type){case Pa:b={};if(w(a.options.jsonobject)&&w(a.options.jsonobject.Center))b.longitude=a.options.jsonobject.Center[0],b.latitude=a.options.jsonobject.Center[1],b.elevation=a.options.jsonobject.Center[2];break;case Ya:var c=new Q;c.xc(a.Ba.lf,a.Ba.mf,a.Ba.nf);b={};b.longitude=c.J[0];b.latitude=c.J[1];b.elevation=c.J[2]}return b});x("ogGetNumObjects",function(){return lb.length});
x("ogGetObjectAt",function(a){a=a<0||a>lb.length-1?j:lb[a];return a==j?-1:a.id});x("ogGetParentObject",function(a){if((a=D(a))&&a.parent)return a.parent.id;return-1});x("ogSetObjectName",function(a,b){var c=D(a);if(c)c.name=b});x("ogGetObjectByName",function(a){a:{for(var b=0;b<lb.length;b++)if(lb[b].name==a){a=lb[b];break a}a=j}if(a)return a.id;return-1});x("ogGetObjectStatus",function(a){if(a=D(a))return a.status;return 3});x("ogOnLoad",function(a,b){var c=D(a);if(c)c.status==jb?b(a):c.F=b});
x("ogOnFailure",function(a,b){var c=D(a);if(c)c.status==3?b(a):c.D=b});function uk(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=X(B,j,a);if(a!=j)return a.id;return-1}x("ogCreateContext",uk);x("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return uk(f,c,d,e)});x("ogCreateNewContext",function(a,b,c,d){var e={};e.fullscreen=a?!0:!1;e["new"]=!0;return uk(e,b,c,d)});x("ogDestroyContext",function(a){(a=D(a))&&a.type==B&&F(a)});
x("ogGetGL",function(a){if((a=D(a))&&a.type==B)return a.c.b;return j});x("ogGetWidth",function(a){if((a=D(a))&&a.type==B)return a=a.c?a.c.width:0,a;return 0});x("ogGetHeight",function(a){if((a=D(a))&&a.type==B)return a=a.c?a.c.height:0,a;return 0});x("ogGetScene",function(a){if((a=D(a))&&a.type==B&&a.d)return a.d.id;return-1});x("ogSetBackgroundColor",function(a,b,c,d,e){(a=D(a))&&a.type==B&&a.c&&a.c.Lm(b,c,d,e)});x("ogSetTextColor",function(a,b,c,d){(a=D(a))&&a.type==B&&a.fontcolor.n(b,c,d,1)});
x("ogDrawText",function(a,b,c,d){(a=D(a))&&a.type==B&&a.Oe(b,c,d)});x("ogGetTextSize",function(a,b){var c=D(a);if(c&&c.type==B&&(c=c.lk(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});x("ogSetMouseDownFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Td=b});x("ogSetMouseUpFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Ud=b});x("ogSetMouseMoveFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Tf=b});x("ogSetMouseWheelFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Bd=b});
x("ogSetKeyDownFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Zk=b});x("ogSetKeyUpFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.$k=b});x("ogSetResizeFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Ze=b});x("ogSetRenderFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.xe=b});x("ogSetTimerFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.ye=b});x("ogSetRenderGeometryFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.tr=b});
x("ogSetBeginRenderFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.rr=b});x("ogSetEndRenderFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.sr=b});x("ogSetFlyToStartedFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Rf=b});x("ogSetInPositionFunction",function(a,b){var c=D(a);if(c&&c.type==B)c.Sf=b});x("ogSetNumRenderPasses",function(a,b){var c=D(a);if(c&&c.type==B)c.vq=b});x("ogExec",n());x("ogSetArtworkDirectory",function(a){Zc=a});
function vk(a,b,c){w(c)||(c={});if((a=D(a))&&a.type==B)return c.type=b,b==fb||b==hb||b==gb||b==ib?(b==ib?pc=H=1:(H=1.1920930376163766E-7,pc=8388607),b=X(C,a,c),a.d=b,b.id):(hc(G("owg.og"),"** WARNING: wrong scene type"),-1);hc(G("owg.og"),"** WARNING: context is not valid");return-1}x("ogCreateScene",vk);x("ogGetContext",function(a){if((a=D(a))&&a.type==C)if(a=a.parent)return a.id;return-1});x("ogGetWorld",function(a){if((a=D(a))&&a.type==C)if(a=a.Vg)return a.id;return-1});
x("ogPickGlobe",function(a,b,c){if((a=D(a))&&a.type==C&&a.tc==fb)return a.jh(b,c);return[!1,0,0,0,0,0,0]});x("ogToCartesian",function(a,b,c,d){if((a=D(a))&&a.type==C&&(a.tc==fb||a.tc==ib)){var e=[];(new Q(b,c,d)).$(e)}return e||j});x("ogToWGS84",function(a,b,c,d){if((a=D(a))&&a.type==C&&a.tc==fb){var e=new Q;e.xc(b,c,d);e=[e.J[0],e.J[1],e.J[2]]}return e||j});x("ogHideLogo",function(a,b){var c=D(a);c&&c.type==C&&c.nk(b)});
x("ogCreateCamera",function(a){if((a=D(a))&&a.type==C){var b=X(Ta,a,j);a.cj.push(b);return b.id}return-1});x("ogDestroyCamera",function(a){(a=D(a))&&a.type==Ta&&F(a)});x("ogSetPosition",function(a,b,c,d){(a=D(a))&&a.type==Ta&&a.Ia(b,c,d)});function wk(a){if((a=D(a))&&a.type==C)return a=a.Pf,uc(a),a.wf();return j}x("ogGetPosition",wk);function xk(a,b,c,d){if((a=D(a))&&a.type==Ta)return b>360&&(b-=360),b<0&&(b=360+b),a.Nb(b,c,d);return j}x("ogSetOrientation",xk);
x("ogSetOrientationFromQuaternion",function(a,b,c,d,e){if((a=D(a))&&a.type==Ta)return a.qh(b,c,d,e);return j});function yk(a){if((a=D(a))&&a.type==C)return a=a.Pf,uc(a),a.eh();return j}x("ogGetOrientation",yk);function zk(a){if((a=D(a))&&a.type==C)return a.Pf.id;return-1}x("ogGetActiveCamera",zk);x("ogSetActiveCamera",function(a){(a=D(a))&&a.type==Ta&&ri(a.parent,a.id)});x("ogGetNumCameras",function(a){if((a=D(a))&&a.type==C)return a.cj.length});
x("ogGetCameraAt",function(a,b){var c=D(a);if(c&&c.type==C)return c.cj[b].id;return-1});
x("ogLookAt",function(a,b,c,d){var e=zk(a);uc(D(e));var f=wk(a),g=[];(new Q(f.longitude,f.latitude,f.elevation)).$(g);var i=new K(g[0],g[1],g[2]),k=[];(new Q(b,c,d)).$(k);b=(new K(k[0],k[1],k[2])).uf();b.Dk(i);i=new L;i.ge(f.longitude,f.latitude);f=new L;f.xd(g[0],g[1],g[2]);g=new L;g.ba(f,i);g.Ye();g=g.Ha(b);g.Wc();g=g.a;f=g[0];i=g[1];b=g[2];g=Math.acos(f/Math.sqrt(1-b*b))*57.29577951308232;i<0&&f>0&&(g=360-g);i<0&&f<0&&(g=360-g);f=-(90-Math.acos(b)*57.29577951308232);b<-0.9&&(g=180+g,f=-f);a=yk(a);
xk(e,g,f,a.roll)});x("ogSetNavigationMode",function(a,b,c){w(c)||(c={});(a=D(a))&&a.type==C&&a.Bk(b,c)});function Ak(a){if((a=D(a))&&a.type==C){var b={};b.scenetype=a.tc;b.shownavigation=a.Ql;b=X(Da,a,b);a.Vg=b;var c=X(Ta,a,j);uc(c);ri(a,c.id);a.cj.push(c);return b.id}return-1}x("ogCreateWorld",Ak);x("ogCreateGlobe",function(a){a=vk(a,fb);return Ak(a)});x("ogSetNorthpoleColor",function(a,b,c,d){if((a=D(a))&&a.type==Da)a.parent.parent.c.d.l.oa.lg=[b,c,d]});
x("ogSetSouthpoleColor",function(a,b,c,d){if((a=D(a))&&a.type==Da)a.parent.parent.c.d.l.oa.rg=[b,c,d]});x("ogSetRenderQuality",function(a,b){var c=D(a);if(c&&c.type==Da&&(c=c.parent.parent.c.d.l.oa,b>0&&b<=3))c.qo=b});x("ogSetRenderEffect",function(a,b,c){(a=D(a))&&a.type==Da&&a.Qi(b,c)});x("ogGetElevationAt",function(a,b,c){var d={hasvalue:!1,elevation:0,lod:0};(a=D(a))&&a.type==Da&&(d=a.parent.parent.c.xg(b,c));return d});
x("ogLoadTextureAsync",function(a,b){var c=D(a);if(c&&c.type==C){var d={};d.url=b;return X(Na,c,d).id}return-1});x("ogDestroyTexture",function(a){(a=D(a))&&a.type==Na&&F(a)});x("ogBlitTexture",function(a,b,c,d){(a=D(a))&&a.type==Na&&a.U(b,c,d)});x("ogAddImageLayer",function(a,b){var c=D(a);if(c&&c.type==Da)return X(Ea,c,b).id;return-1});x("ogRemoveImageLayer",function(a){if((a=D(a))&&a.type==Ea)a.zk(),F(a)});x("ogAddElevationLayer",function(a,b){var c=D(a);if(c&&c.type==Da)return X(Fa,c,b).id;return-1});
x("ogRemoveElevationLayer",function(a){if((a=D(a))&&a.type==Fa)a.yk(),F(a)});x("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=D(a))&&a.type==Da)return X(Ha,a,e).id;return-1});x("ogRemovePOILayer",function(a){(a=D(a))&&a.type==Ha&&F(a)});x("ogHidePOILayer",function(a){(a=D(a))&&a.type==Ha&&a.qa()});x("ogShowPOILayer",function(a){(a=D(a))&&a.type==Ha&&a.ra()});x("ogAddVectorLayer",function(a,b){var c=D(a);if(c&&c.type==Da)return X(La,c,b).id;return-1});
x("ogRemoveVectorLayer",function(a){if((a=D(a))&&a.type==La)lk(a),F(a)});x("ogLoadVectorAsync",function(a,b){var c=D(a);if(c&&c.type==La)return kk(c,{url:b,dynamic:!1,type:"GeoJSON"}).id;return-1});x("ogDestroyVector",function(a){if((a=D(a))&&a.type==Sa)if(a.g){var b=a.Yq;b&&b.type==La&&b.Pi(a)}else F(a);return-1});x("ogAddGeoJSON",function(a,b){var c=D(a);if(c&&c.type==La)return kk(c,{dynamic:!0,type:"GeoJSON",data:b}).id;return-1});
x("ogCreatePOI",function(a,b){var c=D(a);if(c&&c.type==Ha){b.textstyle=c.vg;b.iconstyle=c.bg;var d=X(Ya,c.parent.parent,b);c.cb.push(d);d.Kr=c;return d.id}return-1});x("ogDestroyPOI",function(a){if((a=D(a))&&a.type==Ya)if(a.g){var b=a.g;if(b&&b.type==Ha)for(var c=0;c<b.cb.length;c++)b.cb[c]==a&&(F(b.cb[c]),b.cb.splice(c,1))}else F(a);return-1});x("ogChangePOIText",function(a,b){var c=D(a);if(c&&c.type==Ya){var d=c.parent.parent;c.vg&&d.c.Pg.um(c.Ba,b,c.vg)}});
x("ogChangePOIIcon",function(a,b){var c=D(a);if(c&&c.type==Ya){var d=c.parent.parent;c.bg&&d.c.Pg.tm(c.Ba,b,c.bg)}});x("ogChangePOISize",function(a,b){var c=D(a);c&&c.type==Ya&&c.Ba.Ri(b)});x("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=D(a))&&a.type==Ya){var e=[];(new Q(b,c,d)).$(e);b=e[0];c=e[1];e=e[2];a.Ba.ng?a.Ba.Ia(b,c,e,0):a.Ba.Ia(b,c,e,j)}});x("ogChangePOIPosition",function(a,b,c,d){(a=D(a))&&a.type==Ya&&(a.Ba.ng?a.Ba.Ia(b,c,d,0):a.Ba.Ia(b,c,d,j))});
x("ogHidePOI",function(a){(a=D(a))&&a.type==Ya&&a.qa()});x("ogShowPOI",function(a){(a=D(a))&&a.type==Ya&&a.ra()});x("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=D(a))&&a.type==Ya)a.Ba.Ll=new Gc(b,c,d,e)});x("ogPickPOI",function(a,b,c){if((a=D(a))&&a.type==C&&a.tc==fb)return a.lh(b,c);return-1});x("ogAddGeometryLayer",function(a,b){var c=D(a);if(c&&c.type==Da)return b.name="3d-stream",b.type="3d-stream",X(Ia,c,b).id;return-1});
x("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;c.type="static";var d=D(a);if(d&&d.type==Da)return X(Ia,d,c).id;return-1});x("ogAddPointCloudLayer",function(a,b){var c=D(a);if(c&&c.type==Da)return b.name="pointcloud",b.type="pointcloud",X(Ja,c,b).id;return-1});x("ogHideElevationOnPointCloud",function(a,b){var c=D(a);if(c&&c.type==Da)c.parent.parent.c.d.l.oa.zn=b});x("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=D(a);if(d&&d.type==Da)return X(ab,d,c).id;return-1});
x("ogCreateAoeImage",function(a,b){var c=D(a);if(c&&c.type==ab){var d=X(bb,c.parent.parent,b);c.ak(d);return d.id}return-1});x("ogDestroyAoeImage",function(a){if((a=D(a))&&a.type==bb){var b=D(a.hf);b&&b.type==ab&&b.wk(a)}return-1});x("ogHideGeometryLayer",function(a){(a=D(a))&&a.type==Ia&&a.qa()});x("ogShowGeometryLayer",function(a){(a=D(a))&&a.type==Ia&&a.ra()});x("ogRemoveGeometryLayer",function(a){(a=D(a))&&a.type==Ia&&F(a);return-1});
x("ogCreateGeometry",function(a,b){var c={};w(b.type)?c=b:c.jsonobject=b;var d=D(a);if(d&&d.type==Ia)return c=X(Pa,d.parent.parent,c),d.rd(c),c.id;return-1});x("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=D(a);if(d&&d.type==Ia)return c=X(Pa,d.parent.parent,c),d.rd(c),c.id;return-1});x("ogDestroyGeometry",function(a){if((a=D(a))&&a.type==Pa){var b=D(a.hf);b&&b.type==Ia&&b.Mi(a)}return-1});
x("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=D(a))&&a.type==Pa)return a.We(b,c,d,e,f,g);return-1});x("ogSetGeometryOrientation",function(a,b,c,d){if((a=D(a))&&a.type==Pa)return a.Nb(b,c,d);return-1});x("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=D(a))&&a.type==Pa)return a.rh(b,c,d,e);return-1});x("ogSetGeometryScale",function(a,b,c,d){(a=D(a))&&a.type==Pa&&a.Df(b,c,d)});x("ogGetNumMeshes",function(a){if((a=D(a))&&a.type==Pa)return a.nb.length;return-1});
x("ogGetMeshAt",function(a,b){var c=D(a);if(c&&c.type==Pa)return c.nb[b].id;return-1});x("ogHideGeometry",function(a){(a=D(a))&&a.type==Pa&&a.qa()});x("ogShowGeometry",function(a){(a=D(a))&&a.type==Pa&&a.ra()});x("ogHighlightGeometry",function(a,b,c,d,e){(a=D(a))&&a.type==Pa&&a.Cf(b,c,d,e)});x("ogPickGeometry",function(a,b,c){if((a=D(a))&&a.type==C&&a.tc==fb)if(b=a.Af(b,c),b=D(b))return b.parent.parent.id;return-1});
x("ogCreatePolylineWGS84",function(a,b,c){if((a=D(a))&&a.type==Ia)return c.coords=b,c.type="EarthPolyline",b=X(Pa,a.parent.parent,c),a.rd(b),b.id;return-1});x("ogEnableStereo",function(a,b,c){c=c||{};if((a=D(a))&&a.type==C)a=a.parent.c.d.l,a.Wl=b,a.Vl=w(c.topbottom)&&c.topbottom?Og:Ng});x("ogGetSurfaceAt",function(a,b){var c=D(a);if(c&&c.type==Qa)return c.qb[b].id;return-1});x("ogHideMesh",function(a){(a=D(a))&&a.type==Qa&&a.qa()});x("ogShowMesh",function(a){(a=D(a))&&a.type==Qa&&a.ra()});
x("ogPickMesh",function(a,b,c){if((a=D(a))&&a.type==C&&a.tc==fb)if(b=a.Af(b,c),b=D(b))return b.parent.id;return-1});x("ogHideSurface",function(a){(a=D(a))&&a.type==Ra&&a.qa()});x("ogShowSurface",function(a){(a=D(a))&&a.type==Ra&&a.ra()});x("ogPickSurface",function(a,b,c){if((a=D(a))&&a.type==C&&a.tc==fb)return a.Af(b,c);return-1});x("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=D(a);if(d&&d.type==Da)return X($a,d,c).id;return-1});
x("ogRemoveBillboardLayer",function(a){(a=D(a))&&a.type==$a&&F(a)});x("ogHideBillboardLayer",function(a){(a=D(a))&&a.type==$a&&a.qa()});x("ogShowBillboardLayer",function(a){(a=D(a))&&a.type==$a&&a.ra()});x("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=D(a))&&a.type==$a){var f={};f.canvas=b;f.position=[c,d,e];b=X(Za,a.parent.parent,f);a.bk(b);b.g=a.id;return b.id}return-1});x("ogDestroyBillboard",function(a){if((a=D(a))&&a.type==Za)if(a.g){var b=D(a.g);b&&b.type==$a&&b.xk(a)}else F(a);return-1});
x("ogHideBillboard",function(a){(a=D(a))&&a.type==Za&&a.qa();return-1});x("ogShowBillboard",function(a){(a=D(a))&&a.type==Za&&a.ra();return-1});x("ogPickBillboard",function(a,b,c){if((a=D(a))&&a.type==C&&a.tc==fb)return a.kh(b,c);return-1});x("ogUpdateBillboard",function(a,b){var c=D(a);if(c&&c.type==Za)c.ad.canvas=b,c.ad.uh();else return-1});x("ogFlyTo",function(a,b,c,d,e,f,g){(a=D(a).parent.c)&&Ue(a.ya,b,c,d,e,f,g)});
x("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,i){(a=D(a).parent.c)&&a.kk(b,c,d,e,f,g,i)});x("ogSetFlightDuration",function(a,b){var c=D(a).parent.c;c&&c.ph(b)});x("ogStopFlyTo",function(a){(a=D(a).parent.c)&&a.th()});x("ogLockNavigation",function(a){(a=D(a).parent.c)&&a.d.T.gh(!0)});x("ogUnlockNavigation",function(a){(a=D(a).parent.c)&&a.d.T.gh(!1)});x("ogSetCanvasSizeOffset",function(a,b,c){a=D(a).parent.c;a.om=b;a.wl=c;Vh()});x("ogDebug",function(){var a=new cj;Qi(a);a.Xd()});
x("ogWarning",function(a){hc(G("warning"),a)});function bi(a){G("error").log($b,a,h)}x("ogError",bi);function ai(a){G("message").info(a)}x("ogLog",ai);x("ogWorldToWindow",function(a,b,c,d){var e;if((a=D(a))&&a.type==C&&(a.tc==fb||a.tc==ib))e=a.parent.c,a=new L,a.ba(e.gd,e.gg),b=new K(b,c,d),d=a.Ha(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor((b+1)*0.5*e.width+0.5),c=Math.floor((c+1)*0.5*e.height-1+0.5),e=[b,c,(d+1)*0.5];return e||j});
x("ogCalcDistanceWGS84",function(a,b,c,d){a=mc*Math.acos(Math.sin(J(b))*Math.sin(J(d))+Math.cos(J(b))*Math.cos(J(d))*Math.cos(J(c-a)));isNaN(a)&&(a=0);return a});x("ogSetMinAltitude",function(a,b){var c=D(a);c&&c.type==C&&c.tc==fb&&c.parent.c.d.T.Pm(b)});x("ogNavKeyDown",function(a,b){var c=D(a);c&&c.parent.c.d.T.Se({keyCode:b,stopPropagation:n(),preventDefault:n(),cancelBubble:!1,cancel:!1,returnValue:!1})});
x("ogNavKeyUp",function(a,b){var c=D(a);c&&c.parent.c.d.T.Te({keyCode:b,stopPropagation:n(),preventDefault:n(),cancelBubble:!1,cancel:!1,returnValue:!1})});
